(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pGossipsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pGossipsub=(()=>{var Df=Object.defineProperty;var Cb=t=>Df(t,"__esModule",{value:!0});var Pf=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ee=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ft=(t,e)=>{Cb(t);for(var r in e)Df(t,r,{get:e[r],enumerable:!0})};var Nf=E((FT,kf)=>{var Tn=1e3,Rn=Tn*60,Dn=Rn*60,Wi=Dn*24,Tb=Wi*7,Rb=Wi*365.25;kf.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Db(t);if(r==="number"&&isFinite(t))return e.long?kb(t):Pb(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Db(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*Rb;case"weeks":case"week":case"w":return r*Tb;case"days":case"day":case"d":return r*Wi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Dn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Rn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Pb(t){var e=Math.abs(t);return e>=Wi?Math.round(t/Wi)+"d":e>=Dn?Math.round(t/Dn)+"h":e>=Rn?Math.round(t/Rn)+"m":e>=Tn?Math.round(t/Tn)+"s":t+"ms"}function kb(t){var e=Math.abs(t);return e>=Wi?Aa(t,e,Wi,"day"):e>=Dn?Aa(t,e,Dn,"hour"):e>=Rn?Aa(t,e,Rn,"minute"):e>=Tn?Aa(t,e,Tn,"second"):t+" ms"}function Aa(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var Lf=E((UT,Of)=>{function Nb(t){r.debug=r,r.default=r,r.coerce=f,r.disable=s,r.enable=n,r.enabled=a,r.humanize=Nf(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(c){let h,l=null,d,p;function y(...g){if(!y.enabled)return;let v=y,x=Number(new Date),w=x-(h||x);v.diff=w,v.prev=h,v.curr=x,h=x,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let P=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,F)=>{if(S==="%%")return"%";P++;let z=r.formatters[F];if(typeof z=="function"){let ee=g[P];S=z.call(v,ee),g.splice(P,1),P--}return S}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(c)),p),set:g=>{l=g}}),typeof r.init=="function"&&r.init(y),y}function i(c,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+c);return l.log=this.log,l}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.substr(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...r.names.map(o),...r.skips.map(o).map(h=>"-"+h)].join(",");return r.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(c))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(c))return!0;return!1}function o(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function f(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Of.exports=Nb});var Ta=E((Ot,Ca)=>{Ot.formatArgs=Lb;Ot.save=Mb;Ot.load=Kb;Ot.useColors=Ob;Ot.storage=Fb();Ot.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ot.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ob(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Lb(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ca.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}Ot.log=console.debug||console.log||(()=>{});function Mb(t){try{t?Ot.storage.setItem("debug",t):Ot.storage.removeItem("debug")}catch(e){}}function Kb(){let t;try{t=Ot.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Fb(){try{return localStorage}catch(t){}}Ca.exports=Lf()(Ot);var{formatters:Ub}=Ca.exports;Ub.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var A0=E((qT,B0)=>{"use strict";var Pn=typeof Reflect=="object"?Reflect:null,Mf=Pn&&typeof Pn.apply=="function"?Pn.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Ra;Pn&&typeof Pn.ownKeys=="function"?Ra=Pn.ownKeys:Object.getOwnPropertySymbols?Ra=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ra=function(e){return Object.getOwnPropertyNames(e)};function qb(t){console&&console.warn&&console.warn(t)}var Kf=Number.isNaN||function(e){return e!==e};function we(){we.init.call(this)}B0.exports=we;B0.exports.once=zb;we.EventEmitter=we;we.prototype._events=void 0;we.prototype._eventsCount=0;we.prototype._maxListeners=void 0;var Ff=10;function Da(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(we,"defaultMaxListeners",{enumerable:!0,get:function(){return Ff},set:function(t){if(typeof t!="number"||t<0||Kf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ff=t}});we.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};we.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Kf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Uf(t){return t._maxListeners===void 0?we.defaultMaxListeners:t._maxListeners}we.prototype.getMaxListeners=function(){return Uf(this)};we.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var f=s[e];if(f===void 0)return!1;if(typeof f=="function")Mf(f,this,r);else for(var u=f.length,c=zf(f,u),i=0;i<u;++i)Mf(c[i],this,r);return!0};function qf(t,e,r,i){var n,s,a;if(Da(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),n=Uf(t),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,qb(o)}return t}we.prototype.addListener=function(e,r){return qf(this,e,r,!1)};we.prototype.on=we.prototype.addListener;we.prototype.prependListener=function(e,r){return qf(this,e,r,!0)};function Vb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Vf(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=Vb.bind(i);return n.listener=r,i.wrapFn=n,n}we.prototype.once=function(e,r){return Da(r),this.on(e,Vf(this,e,r)),this};we.prototype.prependOnceListener=function(e,r){return Da(r),this.prependListener(e,Vf(this,e,r)),this};we.prototype.removeListener=function(e,r){var i,n,s,a,o;if(Da(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===r||i[a].listener===r){o=i[a].listener,s=a;break}if(s<0)return this;s===0?i.shift():Gb(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};we.prototype.off=we.prototype.removeListener;we.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),a;for(n=0;n<s.length;++n)a=s[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function Gf(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Hb(n):zf(n,n.length)}we.prototype.listeners=function(e){return Gf(this,e,!0)};we.prototype.rawListeners=function(e){return Gf(this,e,!1)};we.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Hf.call(t,e)};we.prototype.listenerCount=Hf;function Hf(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}we.prototype.eventNames=function(){return this._eventsCount>0?Ra(this._events):[]};function zf(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Gb(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Hb(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function zb(t,e){return new Promise(function(r,i){function n(a){t.removeListener(e,s),i(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}jf(t,e,s,{once:!0}),e!=="error"&&jb(t,n,{once:!0})})}function jb(t,e,r){typeof t.on=="function"&&jf(t,"error",e,r)}function jf(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Oe=E((VT,Yf)=>{"use strict";function Wf(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Wb(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Wf(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Wf(new n,r)}}Yf.exports=Wb});var T0=E((GT,kn)=>{var $f=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},C0=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),Pa=t=>t&&typeof t.sink=="function"&&C0(t.source),Yb=t=>e=>(t.sink(e),t.source),Qf=(...t)=>{if(Pa(t[0])){let e=t[0];t[0]=()=>e.source}else if(C0(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&Pa(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)Pa(t[e])&&(t[e]=Yb(t[e]));return $f(...t)};kn.exports=Qf;kn.exports.pipe=Qf;kn.exports.rawPipe=$f;kn.exports.isIterable=C0;kn.exports.isDuplex=Pa});var Xf=E((HT,R0)=>{"use strict";var $b=Object.prototype.hasOwnProperty,St="~";function _s(){}Object.create&&(_s.prototype=Object.create(null),new _s().__proto__||(St=!1));function Qb(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function Zf(t,e,r,i,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Qb(r,i||t,n),a=St?St+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function ka(t,e){--t._eventsCount==0?t._events=new _s:delete t._events[e]}function pt(){this._events=new _s,this._eventsCount=0}pt.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)$b.call(r,i)&&e.push(St?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};pt.prototype.listeners=function(e){var r=St?St+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a};pt.prototype.listenerCount=function(e){var r=St?St+e:e,i=this._events[r];return i?i.fn?1:i.length:0};pt.prototype.emit=function(e,r,i,n,s,a){var o=St?St+e:e;if(!this._events[o])return!1;var f=this._events[o],u=arguments.length,c,h;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),u){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,i),!0;case 4:return f.fn.call(f.context,r,i,n),!0;case 5:return f.fn.call(f.context,r,i,n,s),!0;case 6:return f.fn.call(f.context,r,i,n,s,a),!0}for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];f.fn.apply(f.context,c)}else{var l=f.length,d;for(h=0;h<l;h++)switch(f[h].once&&this.removeListener(e,f[h].fn,void 0,!0),u){case 1:f[h].fn.call(f[h].context);break;case 2:f[h].fn.call(f[h].context,r);break;case 3:f[h].fn.call(f[h].context,r,i);break;case 4:f[h].fn.call(f[h].context,r,i,n);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];f[h].fn.apply(f[h].context,c)}}return!0};pt.prototype.on=function(e,r,i){return Zf(this,e,r,i,!1)};pt.prototype.once=function(e,r,i){return Zf(this,e,r,i,!0)};pt.prototype.removeListener=function(e,r,i,n){var s=St?St+e:e;if(!this._events[s])return this;if(!r)return ka(this,s),this;var a=this._events[s];if(a.fn)a.fn===r&&(!n||a.once)&&(!i||a.context===i)&&ka(this,s);else{for(var o=0,f=[],u=a.length;o<u;o++)(a[o].fn!==r||n&&!a[o].once||i&&a[o].context!==i)&&f.push(a[o]);f.length?this._events[s]=f.length===1?f[0]:f:ka(this,s)}return this};pt.prototype.removeAllListeners=function(e){var r;return e?(r=St?St+e:e,this._events[r]&&ka(this,r)):(this._events=new _s,this._eventsCount=0),this};pt.prototype.off=pt.prototype.removeListener;pt.prototype.addListener=pt.prototype.on;pt.prefixed=St;pt.EventEmitter=pt;typeof R0!="undefined"&&(R0.exports=pt)});var eh=E((zT,Jf)=>{"use strict";Jf.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(i=>{i(e())}).then(()=>r),r=>new Promise(i=>{i(e())}).then(()=>{throw r})))});var rh=E((jT,Na)=>{"use strict";var Zb=eh(),D0=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},th=(t,e,r)=>new Promise((i,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){i(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{i(r())}catch(f){n(f)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new D0(a);typeof t.cancel=="function"&&t.cancel(),n(o)},e);Zb(t.then(i,n),()=>{clearTimeout(s)})});Na.exports=th;Na.exports.default=th;Na.exports.TimeoutError=D0});var ih=E(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});function Xb(t,e,r){let i=0,n=t.length;for(;n>0;){let s=n/2|0,a=i+s;r(t[a],e)<=0?(i=++a,n-=s+1):n=s}return i}P0.default=Xb});var sh=E(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});var Jb=ih(),nh=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let i={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(i);return}let n=Jb.default(this._queue,i,(s,a)=>a.priority-s.priority);this._queue.splice(n,0,i)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};k0.default=nh});var uh=E(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});var em=Xf(),ah=rh(),tm=sh(),Oa=()=>{},rm=new ah.TimeoutError,oh=class extends em{constructor(e){var r,i,n,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Oa,this._resolveIdle=Oa,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:tm.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Oa,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Oa,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((i,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&r.timeout===void 0?e():ah.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&n(rm)});i(await a)}catch(a){n(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async i=>this.add(i,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};N0.default=oh});var ph=E((QT,lh)=>{"use strict";var ch=()=>{},fh=Symbol.for("@libp2p/js-interfaces/topology"),hh=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||ch,this._onDisconnect=i.onDisconnect||ch,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[fh](){return!0}static isTopology(e){return Boolean(e&&e[fh])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};lh.exports=hh});var vh=E((ZT,gh)=>{"use strict";var im=ph(),dh=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),yh=class extends im{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[dh](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[dh])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let a=this._registrar.peerStore.get(e);this._updatePeers([a]);return}}_onPeerConnect(e){let r=e.remotePeer,i=this._registrar.peerStore.protoBook.get(r);!i||this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};gh.exports=yh});var La=E(xh=>{"use strict";xh.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var mh=E((JT,bh)=>{"use strict";bh.exports=nm;function nm(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(o,f){r[i]=function(c){if(s)if(s=!1,c)f(c);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];o.apply(null,h)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,f(u))}})}});var _h=E(Sh=>{"use strict";var Ma=Sh;Ma.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var Nn=new Array(64),Eh=new Array(123);for(Xt=0;Xt<64;)Eh[Nn[Xt]=Xt<26?Xt+65:Xt<52?Xt+71:Xt<62?Xt-4:Xt-59|43]=Xt++;var Xt;Ma.encode=function(e,r,i){for(var n=null,s=[],a=0,o=0,f;r<i;){var u=e[r++];switch(o){case 0:s[a++]=Nn[u>>2],f=(u&3)<<4,o=1;break;case 1:s[a++]=Nn[f|u>>4],f=(u&15)<<2,o=2;break;case 2:s[a++]=Nn[f|u>>6],s[a++]=Nn[u&63],o=0;break}a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0)}return o&&(s[a++]=Nn[f],s[a++]=61,o===1&&(s[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var wh="invalid encoding";Ma.decode=function(e,r,i){for(var n=i,s=0,a,o=0;o<e.length;){var f=e.charCodeAt(o++);if(f===61&&s>1)break;if((f=Eh[f])===void 0)throw Error(wh);switch(s){case 0:a=f,s=1;break;case 1:r[i++]=a<<2|(f&48)>>4,a=f,s=2;break;case 2:r[i++]=(a&15)<<4|(f&60)>>2,a=f,s=3;break;case 3:r[i++]=(a&3)<<6|f,s=0;break}}if(s===1)throw Error(wh);return i-n};Ma.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Bh=E((tR,Ih)=>{"use strict";Ih.exports=Ka;function Ka(){this._listeners={}}Ka.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};Ka.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};Ka.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var kh=E((rR,Ph)=>{"use strict";Ph.exports=Ah(Ah);function Ah(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function s(f,u,c){e[0]=f,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function a(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],e[0]}function o(f,u){return r[3]=f[u],r[2]=f[u+1],r[1]=f[u+2],r[0]=f[u+3],e[0]}t.readFloatLE=i?a:o,t.readFloatBE=i?o:a}():function(){function e(i,n,s,a){var o=n<0?1:0;if(o&&(n=-n),n===0)i(1/n>0?0:2147483648,s,a);else if(isNaN(n))i(2143289344,s,a);else if(n>34028234663852886e22)i((o<<31|2139095040)>>>0,s,a);else if(n<11754943508222875e-54)i((o<<31|Math.round(n/1401298464324817e-60))>>>0,s,a);else{var f=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-f)*8388608)&8388607;i((o<<31|f+127<<23|u)>>>0,s,a)}}t.writeFloatLE=e.bind(null,Ch),t.writeFloatBE=e.bind(null,Th);function r(i,n,s){var a=i(n,s),o=(a>>31)*2+1,f=a>>>23&255,u=a&8388607;return f===255?u?NaN:o*(1/0):f===0?o*1401298464324817e-60*u:o*Math.pow(2,f-150)*(u+8388608)}t.readFloatLE=r.bind(null,Rh),t.readFloatBE=r.bind(null,Dh)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function s(f,u,c){e[0]=f,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function a(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],r[4]=f[u+4],r[5]=f[u+5],r[6]=f[u+6],r[7]=f[u+7],e[0]}function o(f,u){return r[7]=f[u],r[6]=f[u+1],r[5]=f[u+2],r[4]=f[u+3],r[3]=f[u+4],r[2]=f[u+5],r[1]=f[u+6],r[0]=f[u+7],e[0]}t.readDoubleLE=i?a:o,t.readDoubleBE=i?o:a}():function(){function e(i,n,s,a,o,f){var u=a<0?1:0;if(u&&(a=-a),a===0)i(0,o,f+n),i(1/a>0?0:2147483648,o,f+s);else if(isNaN(a))i(0,o,f+n),i(2146959360,o,f+s);else if(a>17976931348623157e292)i(0,o,f+n),i((u<<31|2146435072)>>>0,o,f+s);else{var c;if(a<22250738585072014e-324)c=a/5e-324,i(c>>>0,o,f+n),i((u<<31|c/4294967296)>>>0,o,f+s);else{var h=Math.floor(Math.log(a)/Math.LN2);h===1024&&(h=1023),c=a*Math.pow(2,-h),i(c*4503599627370496>>>0,o,f+n),i((u<<31|h+1023<<20|c*1048576&1048575)>>>0,o,f+s)}}}t.writeDoubleLE=e.bind(null,Ch,0,4),t.writeDoubleBE=e.bind(null,Th,4,0);function r(i,n,s,a,o){var f=i(a,o+n),u=i(a,o+s),c=(u>>31)*2+1,h=u>>>20&2047,l=4294967296*(u&1048575)+f;return h===2047?l?NaN:c*(1/0):h===0?c*5e-324*l:c*Math.pow(2,h-1075)*(l+4503599627370496)}t.readDoubleLE=r.bind(null,Rh,0,4),t.readDoubleBE=r.bind(null,Dh,4,0)}(),t}function Ch(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Th(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Rh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Dh(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Nh=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Lh=E(Oh=>{"use strict";var O0=Oh;O0.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};O0.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,a=[],o=0,f;r<i;)f=e[r++],f<128?a[o++]=f:f>191&&f<224?a[o++]=(f&31)<<6|e[r++]&63:f>239&&f<365?(f=((f&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,a[o++]=55296+(f>>10),a[o++]=56320+(f&1023)):a[o++]=(f&15)<<12|(e[r++]&63)<<6|e[r++]&63,o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};O0.write=function(e,r,i){for(var n=i,s,a,o=0;o<e.length;++o)s=e.charCodeAt(o),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((a=e.charCodeAt(o+1))&64512)==56320?(s=65536+((s&1023)<<10)+(a&1023),++o,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var Kh=E((nR,Mh)=>{"use strict";Mh.exports=sm;function sm(t,e,r){var i=r||8192,n=i>>>1,s=null,a=i;return function(f){if(f<1||f>n)return t(f);a+f>i&&(s=t(i),a=0);var u=e.call(s,a,a+=f);return a&7&&(a=(a|7)+1),u}}});var Uh=E((sR,Fh)=>{"use strict";Fh.exports=et;var Is=li();function et(t,e){this.lo=t>>>0,this.hi=e>>>0}var Yi=et.zero=new et(0,0);Yi.toNumber=function(){return 0};Yi.zzEncode=Yi.zzDecode=function(){return this};Yi.length=function(){return 1};var am=et.zeroHash="\0\0\0\0\0\0\0\0";et.fromNumber=function(e){if(e===0)return Yi;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new et(i,n)};et.from=function(e){if(typeof e=="number")return et.fromNumber(e);if(Is.isString(e))if(Is.Long)e=Is.Long.fromString(e);else return et.fromNumber(parseInt(e,10));return e.low||e.high?new et(e.low>>>0,e.high>>>0):Yi};et.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};et.prototype.toLong=function(e){return Is.Long?new Is.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var hi=String.prototype.charCodeAt;et.fromHash=function(e){return e===am?Yi:new et((hi.call(e,0)|hi.call(e,1)<<8|hi.call(e,2)<<16|hi.call(e,3)<<24)>>>0,(hi.call(e,4)|hi.call(e,5)<<8|hi.call(e,6)<<16|hi.call(e,7)<<24)>>>0)};et.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};et.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};et.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};et.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var li=E(L0=>{"use strict";var j=L0;j.asPromise=mh();j.base64=_h();j.EventEmitter=Bh();j.float=kh();j.inquire=Nh();j.utf8=Lh();j.pool=Kh();j.LongBits=Uh();j.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);j.global=j.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||L0;j.emptyArray=Object.freeze?Object.freeze([]):[];j.emptyObject=Object.freeze?Object.freeze({}):{};j.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};j.isString=function(e){return typeof e=="string"||e instanceof String};j.isObject=function(e){return e&&typeof e=="object"};j.isset=j.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};j.Buffer=function(){try{var t=j.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();j._Buffer_from=null;j._Buffer_allocUnsafe=null;j.newBuffer=function(e){return typeof e=="number"?j.Buffer?j._Buffer_allocUnsafe(e):new j.Array(e):j.Buffer?j._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};j.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;j.Long=j.global.dcodeIO&&j.global.dcodeIO.Long||j.global.Long||j.inquire("long");j.key2Re=/^true|false|0|1$/;j.key32Re=/^-?(?:0|[1-9][0-9]*)$/;j.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;j.longToHash=function(e){return e?j.LongBits.from(e).toHash():j.LongBits.zeroHash};j.longFromHash=function(e,r){var i=j.LongBits.fromHash(e);return j.Long?j.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function qh(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}j.merge=qh;j.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Vh(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&qh(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}j.newError=Vh;j.ProtocolError=Vh("ProtocolError");j.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};j.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};j.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};j._configure=function(){var t=j.Buffer;if(!t){j._Buffer_from=j._Buffer_allocUnsafe=null;return}j._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},j._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var G0=E((oR,jh)=>{"use strict";jh.exports=ce;var Kt=li(),M0,Fa=Kt.LongBits,Gh=Kt.base64,Hh=Kt.utf8;function Bs(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function K0(){}function om(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function ce(){this.len=0,this.head=new Bs(K0,0,0),this.tail=this.head,this.states=null}var zh=function(){return Kt.Buffer?function(){return(ce.create=function(){return new M0})()}:function(){return new ce}};ce.create=zh();ce.alloc=function(e){return new Kt.Array(e)};Kt.Array!==Array&&(ce.alloc=Kt.pool(ce.alloc,Kt.Array.prototype.subarray));ce.prototype._push=function(e,r,i){return this.tail=this.tail.next=new Bs(e,r,i),this.len+=r,this};function F0(t,e,r){e[r]=t&255}function um(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function U0(t,e){this.len=t,this.next=void 0,this.val=e}U0.prototype=Object.create(Bs.prototype);U0.prototype.fn=um;ce.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new U0((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};ce.prototype.int32=function(e){return e<0?this._push(q0,10,Fa.fromNumber(e)):this.uint32(e)};ce.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function q0(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}ce.prototype.uint64=function(e){var r=Fa.from(e);return this._push(q0,r.length(),r)};ce.prototype.int64=ce.prototype.uint64;ce.prototype.sint64=function(e){var r=Fa.from(e).zzEncode();return this._push(q0,r.length(),r)};ce.prototype.bool=function(e){return this._push(F0,1,e?1:0)};function V0(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}ce.prototype.fixed32=function(e){return this._push(V0,4,e>>>0)};ce.prototype.sfixed32=ce.prototype.fixed32;ce.prototype.fixed64=function(e){var r=Fa.from(e);return this._push(V0,4,r.lo)._push(V0,4,r.hi)};ce.prototype.sfixed64=ce.prototype.fixed64;ce.prototype.float=function(e){return this._push(Kt.float.writeFloatLE,4,e)};ce.prototype.double=function(e){return this._push(Kt.float.writeDoubleLE,8,e)};var cm=Kt.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};ce.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(F0,1,0);if(Kt.isString(e)){var i=ce.alloc(r=Gh.length(e));Gh.decode(e,i,0),e=i}return this.uint32(r)._push(cm,r,e)};ce.prototype.string=function(e){var r=Hh.length(e);return r?this.uint32(r)._push(Hh.write,r,e):this._push(F0,1,0)};ce.prototype.fork=function(){return this.states=new om(this),this.head=this.tail=new Bs(K0,0,0),this.len=0,this};ce.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Bs(K0,0,0),this.len=0),this};ce.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};ce.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};ce._configure=function(t){M0=t,ce.create=zh(),M0._configure()}});var $h=E((uR,Yh)=>{"use strict";Yh.exports=pr;var Wh=G0();(pr.prototype=Object.create(Wh.prototype)).constructor=pr;var pi=li();function pr(){Wh.call(this)}pr._configure=function(){pr.alloc=pi._Buffer_allocUnsafe,pr.writeBytesBuffer=pi.Buffer&&pi.Buffer.prototype instanceof Uint8Array&&pi.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};pr.prototype.bytes=function(e){pi.isString(e)&&(e=pi._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(pr.writeBytesBuffer,r,e),this};function fm(t,e,r){t.length<40?pi.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}pr.prototype.string=function(e){var r=pi.Buffer.byteLength(e);return this.uint32(r),r&&this._push(fm,r,e),this};pr._configure()});var j0=E((cR,el)=>{"use strict";el.exports=je;var dr=li(),H0,Qh=dr.LongBits,hm=dr.utf8;function Jt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function je(t){this.buf=t,this.pos=0,this.len=t.length}var Zh=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new je(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new je(e);throw Error("illegal buffer")},Xh=function(){return dr.Buffer?function(r){return(je.create=function(n){return dr.Buffer.isBuffer(n)?new H0(n):Zh(n)})(r)}:Zh};je.create=Xh();je.prototype._slice=dr.Array.prototype.subarray||dr.Array.prototype.slice;je.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Jt(this,10);return e}}();je.prototype.int32=function(){return this.uint32()|0};je.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function z0(){var t=new Qh(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Jt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Jt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}je.prototype.bool=function(){return this.uint32()!==0};function Ua(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}je.prototype.fixed32=function(){if(this.pos+4>this.len)throw Jt(this,4);return Ua(this.buf,this.pos+=4)};je.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Jt(this,4);return Ua(this.buf,this.pos+=4)|0};function Jh(){if(this.pos+8>this.len)throw Jt(this,8);return new Qh(Ua(this.buf,this.pos+=4),Ua(this.buf,this.pos+=4))}je.prototype.float=function(){if(this.pos+4>this.len)throw Jt(this,4);var e=dr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};je.prototype.double=function(){if(this.pos+8>this.len)throw Jt(this,4);var e=dr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};je.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw Jt(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};je.prototype.string=function(){var e=this.bytes();return hm.read(e,0,e.length)};je.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Jt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Jt(this);while(this.buf[this.pos++]&128);return this};je.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};je._configure=function(t){H0=t,je.create=Xh(),H0._configure();var e=dr.Long?"toLong":"toNumber";dr.merge(je.prototype,{int64:function(){return z0.call(this)[e](!1)},uint64:function(){return z0.call(this)[e](!0)},sint64:function(){return z0.call(this).zzDecode()[e](!1)},fixed64:function(){return Jh.call(this)[e](!0)},sfixed64:function(){return Jh.call(this)[e](!1)}})}});var nl=E((fR,il)=>{"use strict";il.exports=$i;var tl=j0();($i.prototype=Object.create(tl.prototype)).constructor=$i;var rl=li();function $i(t){tl.call(this,t)}$i._configure=function(){rl.Buffer&&($i.prototype._slice=rl.Buffer.prototype.slice)};$i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};$i._configure()});var al=E((hR,sl)=>{"use strict";sl.exports=As;var W0=li();(As.prototype=Object.create(W0.EventEmitter.prototype)).constructor=As;function As(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");W0.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}As.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var a=this;if(!s)return W0.asPromise(t,a,e,r,i,n);if(!a.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(f,u){if(f)return a.emit("error",f,e),s(f);if(u===null){a.end(!0);return}if(!(u instanceof i))try{u=i[a.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return a.emit("error",c,e),s(c)}return a.emit("data",u,e),s(null,u)})}catch(o){a.emit("error",o,e),setTimeout(function(){s(o)},0);return}};As.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ul=E(ol=>{"use strict";var lm=ol;lm.Service=al()});var fl=E((pR,cl)=>{"use strict";cl.exports={}});var pl=E(ll=>{"use strict";var Ct=ll;Ct.build="minimal";Ct.Writer=G0();Ct.BufferWriter=$h();Ct.Reader=j0();Ct.BufferReader=nl();Ct.util=li();Ct.rpc=ul();Ct.roots=fl();Ct.configure=hl;function hl(){Ct.util._configure(),Ct.Writer._configure(Ct.BufferWriter),Ct.Reader._configure(Ct.BufferReader)}hl()});var Qi=E((yR,dl)=>{"use strict";dl.exports=pl()});var $0=E((gR,yl)=>{"use strict";var di=Qi(),On=di.Reader,Y0=di.Writer,te=di.util,Ze=di.roots["libp2p-pubsub-rpc"]||(di.roots["libp2p-pubsub-rpc"]={});Ze.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=te.emptyArray,t.prototype.msgs=te.emptyArray,t.encode=function(r,i){if(i||(i=Y0.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)Ze.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)Ze.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof On||(r=On.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ze.RPC;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(Ze.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(Ze.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof Ze.RPC)return r;var i=new Ze.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=Ze.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=Ze.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=Ze.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=Ze.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,di.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:te.oneOfGetter(r=["subscribe"]),set:te.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:te.oneOfGetter(r=["topicID"]),set:te.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=Y0.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof On||(n=On.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new Ze.RPC.SubOpts;n.pos<a;){var f=n.uint32();switch(f>>>3){case 1:o.subscribe=n.bool();break;case 2:o.topicID=n.string();break;default:n.skipType(f&7);break}}return o},e.fromObject=function(n){if(n instanceof Ze.RPC.SubOpts)return n;var s=new Ze.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var a={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(a.subscribe=n.subscribe,s.oneofs&&(a._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(a.topicID=n.topicID,s.oneofs&&(a._topicID="topicID")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,di.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=te.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:te.oneOfGetter(r=["from"]),set:te.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:te.oneOfGetter(r=["data"]),set:te.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:te.oneOfGetter(r=["seqno"]),set:te.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:te.oneOfGetter(r=["signature"]),set:te.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:te.oneOfGetter(r=["key"]),set:te.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=Y0.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var a=0;a<n.topicIDs.length;++a)s.uint32(34).string(n.topicIDs[a]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof On||(n=On.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new Ze.RPC.Message;n.pos<a;){var f=n.uint32();switch(f>>>3){case 1:o.from=n.bytes();break;case 2:o.data=n.bytes();break;case 3:o.seqno=n.bytes();break;case 4:o.topicIDs&&o.topicIDs.length||(o.topicIDs=[]),o.topicIDs.push(n.string());break;case 5:o.signature=n.bytes();break;case 6:o.key=n.bytes();break;default:n.skipType(f&7);break}}return o},e.fromObject=function(n){if(n instanceof Ze.RPC.Message)return n;var s=new Ze.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?te.base64.decode(n.from,s.from=te.newBuffer(te.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?te.base64.decode(n.data,s.data=te.newBuffer(te.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?te.base64.decode(n.seqno,s.seqno=te.newBuffer(te.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)s.topicIDs[a]=String(n.topicIDs[a])}return n.signature!=null&&(typeof n.signature=="string"?te.base64.decode(n.signature,s.signature=te.newBuffer(te.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?te.base64.decode(n.key,s.key=te.newBuffer(te.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var a={};if((s.arrays||s.defaults)&&(a.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(a.from=s.bytes===String?te.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(a._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(a.data=s.bytes===String?te.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(a._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(a.seqno=s.bytes===String?te.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(a._seqno="seqno")),n.topicIDs&&n.topicIDs.length){a.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)a.topicIDs[o]=n.topicIDs[o]}return n.signature!=null&&n.hasOwnProperty("signature")&&(a.signature=s.bytes===String?te.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(a._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(a.key=s.bytes===String?te.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(a._key="key")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,di.util.toJSONOptions)},e}(),t}();yl.exports=Ze});var Z0=E(qa=>{"use strict";qa.byteLength=dm;qa.toByteArray=gm;qa.fromByteArray=bm;var yr=[],Ft=[],pm=typeof Uint8Array!="undefined"?Uint8Array:Array,Q0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Zi=0,gl=Q0.length;Zi<gl;++Zi)yr[Zi]=Q0[Zi],Ft[Q0.charCodeAt(Zi)]=Zi;var Zi,gl;Ft["-".charCodeAt(0)]=62;Ft["_".charCodeAt(0)]=63;function vl(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function dm(t){var e=vl(t),r=e[0],i=e[1];return(r+i)*3/4-i}function ym(t,e,r){return(e+r)*3/4-r}function gm(t){var e,r=vl(t),i=r[0],n=r[1],s=new pm(ym(t,i,n)),a=0,o=n>0?i-4:i,f;for(f=0;f<o;f+=4)e=Ft[t.charCodeAt(f)]<<18|Ft[t.charCodeAt(f+1)]<<12|Ft[t.charCodeAt(f+2)]<<6|Ft[t.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=Ft[t.charCodeAt(f)]<<2|Ft[t.charCodeAt(f+1)]>>4,s[a++]=e&255),n===1&&(e=Ft[t.charCodeAt(f)]<<10|Ft[t.charCodeAt(f+1)]<<4|Ft[t.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function vm(t){return yr[t>>18&63]+yr[t>>12&63]+yr[t>>6&63]+yr[t&63]}function xm(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(vm(i));return n.join("")}function bm(t){for(var e,r=t.length,i=r%3,n=[],s=16383,a=0,o=r-i;a<o;a+=s)n.push(xm(t,a,a+s>o?o:a+s));return i===1?(e=t[r-1],n.push(yr[e>>2]+yr[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(yr[e>>10]+yr[e>>4&63]+yr[e<<2&63]+"=")),n.join("")}});var xl=E(X0=>{X0.read=function(t,e,r,i,n){var s,a,o=n*8-i-1,f=(1<<o)-1,u=f>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+t[e+h],h+=l,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=i;c>0;a=a*256+t[e+h],h+=l,c-=8);if(s===0)s=1-u;else{if(s===f)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-u}return(d?-1:1)*a*Math.pow(2,s-i)};X0.write=function(t,e,r,i,n,s){var a,o,f,u=s*8-n-1,c=(1<<u)-1,h=c>>1,l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+h>=1?e+=l/f:e+=l*Math.pow(2,1-h),e*f>=2&&(a++,f/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*f-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=o&255,d+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;t[r+d]=a&255,d+=p,a/=256,u-=8);t[r+d-p]|=y*128}});var Un=E(Fn=>{"use strict";var J0=Z0(),Ln=xl(),bl=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Fn.Buffer=A;Fn.SlowBuffer=Im;Fn.INSPECT_MAX_BYTES=50;var Va=2147483647;Fn.kMaxLength=Va;A.TYPED_ARRAY_SUPPORT=mm();!A.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function mm(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(!!A.isBuffer(this))return this.buffer}});Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(!!A.isBuffer(this))return this.byteOffset}});function Hr(t){if(t>Va)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,A.prototype),e}function A(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return eu(t)}return ml(t,e,r)}A.poolSize=8192;function ml(t,e,r){if(typeof t=="string")return wm(t,e);if(ArrayBuffer.isView(t))return Sm(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(gr(t,ArrayBuffer)||t&&gr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(gr(t,SharedArrayBuffer)||t&&gr(t.buffer,SharedArrayBuffer)))return ru(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return A.from(i,e,r);let n=_m(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return A.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}A.from=function(t,e,r){return ml(t,e,r)};Object.setPrototypeOf(A.prototype,Uint8Array.prototype);Object.setPrototypeOf(A,Uint8Array);function El(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Em(t,e,r){return El(t),t<=0?Hr(t):e!==void 0?typeof r=="string"?Hr(t).fill(e,r):Hr(t).fill(e):Hr(t)}A.alloc=function(t,e,r){return Em(t,e,r)};function eu(t){return El(t),Hr(t<0?0:iu(t)|0)}A.allocUnsafe=function(t){return eu(t)};A.allocUnsafeSlow=function(t){return eu(t)};function wm(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!A.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=wl(t,e)|0,i=Hr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function tu(t){let e=t.length<0?0:iu(t.length)|0,r=Hr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function Sm(t){if(gr(t,Uint8Array)){let e=new Uint8Array(t);return ru(e.buffer,e.byteOffset,e.byteLength)}return tu(t)}function ru(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,A.prototype),i}function _m(t){if(A.isBuffer(t)){let e=iu(t.length)|0,r=Hr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||au(t.length)?Hr(0):tu(t);if(t.type==="Buffer"&&Array.isArray(t.data))return tu(t.data)}function iu(t){if(t>=Va)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Va.toString(16)+" bytes");return t|0}function Im(t){return+t!=t&&(t=0),A.alloc(+t)}A.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==A.prototype};A.compare=function(e,r){if(gr(e,Uint8Array)&&(e=A.from(e,e.offset,e.byteLength)),gr(r,Uint8Array)&&(r=A.from(r,r.offset,r.byteLength)),!A.isBuffer(e)||!A.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};A.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};A.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return A.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=A.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let a=e[i];if(gr(a,Uint8Array))s+a.length>n.length?(A.isBuffer(a)||(a=A.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(A.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function wl(t,e){if(A.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||gr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return su(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Nl(t).length;default:if(n)return i?-1:su(t).length;e=(""+e).toLowerCase(),n=!0}}A.byteLength=wl;function Bm(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Lm(this,e,r);case"utf8":case"utf-8":return Il(this,e,r);case"ascii":return Nm(this,e,r);case"latin1":case"binary":return Om(this,e,r);case"base64":return Pm(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mm(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}A.prototype._isBuffer=!0;function Xi(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}A.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Xi(this,r,r+1);return this};A.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Xi(this,r,r+3),Xi(this,r+1,r+2);return this};A.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Xi(this,r,r+7),Xi(this,r+1,r+6),Xi(this,r+2,r+5),Xi(this,r+3,r+4);return this};A.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Il(this,0,e):Bm.apply(this,arguments)};A.prototype.toLocaleString=A.prototype.toString;A.prototype.equals=function(e){if(!A.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:A.compare(this,e)===0};A.prototype.inspect=function(){let e="",r=Fn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};bl&&(A.prototype[bl]=A.prototype.inspect);A.prototype.compare=function(e,r,i,n,s){if(gr(e,Uint8Array)&&(e=A.from(e,e.offset,e.byteLength)),!A.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,o=i-r,f=Math.min(a,o),u=this.slice(n,s),c=e.slice(r,i);for(let h=0;h<f;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0};function Sl(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,au(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=A.from(e,i)),A.isBuffer(e))return e.length===0?-1:_l(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_l(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function _l(t,e,r,i,n){let s=1,a=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function f(c,h){return s===1?c[h]:c.readUInt16BE(h*s)}let u;if(n){let c=-1;for(u=r;u<a;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(r+o>a&&(r=a-o),u=r;u>=0;u--){let c=!0;for(let h=0;h<o;h++)if(f(t,u+h)!==f(e,h)){c=!1;break}if(c)return u}return-1}A.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};A.prototype.indexOf=function(e,r,i){return Sl(this,e,r,i,!0)};A.prototype.lastIndexOf=function(e,r,i){return Sl(this,e,r,i,!1)};function Am(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){let o=parseInt(e.substr(a*2,2),16);if(au(o))return a;t[r+a]=o}return a}function Cm(t,e,r,i){return Ga(su(e,t.length-r),t,r,i)}function Tm(t,e,r,i){return Ga(qm(e),t,r,i)}function Rm(t,e,r,i){return Ga(Nl(e),t,r,i)}function Dm(t,e,r,i){return Ga(Vm(e,t.length-r),t,r,i)}A.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return Am(this,e,r,i);case"utf8":case"utf-8":return Cm(this,e,r,i);case"ascii":case"latin1":case"binary":return Tm(this,e,r,i);case"base64":return Rm(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dm(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pm(t,e,r){return e===0&&r===t.length?J0.fromByteArray(t):J0.fromByteArray(t.slice(e,r))}function Il(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){let f,u,c,h;switch(o){case 1:s<128&&(a=s);break;case 2:f=t[n+1],(f&192)==128&&(h=(s&31)<<6|f&63,h>127&&(a=h));break;case 3:f=t[n+1],u=t[n+2],(f&192)==128&&(u&192)==128&&(h=(s&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:f=t[n+1],u=t[n+2],c=t[n+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(h=(s&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=o}return km(i)}var Bl=4096;function km(t){let e=t.length;if(e<=Bl)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Bl));return r}function Nm(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function Om(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Lm(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=Gm[t[s]];return n}function Mm(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}A.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,A.prototype),n};function tt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||tt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return n};A.prototype.readUintBE=A.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||tt(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};A.prototype.readUint8=A.prototype.readUInt8=function(e,r){return e=e>>>0,r||tt(e,1,this.length),this[e]};A.prototype.readUint16LE=A.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||tt(e,2,this.length),this[e]|this[e+1]<<8};A.prototype.readUint16BE=A.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||tt(e,2,this.length),this[e]<<8|this[e+1]};A.prototype.readUint32LE=A.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};A.prototype.readUint32BE=A.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};A.prototype.readBigUInt64LE=yi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});A.prototype.readBigUInt64BE=yi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});A.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||tt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};A.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||tt(e,r,this.length);let n=r,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};A.prototype.readInt8=function(e,r){return e=e>>>0,r||tt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};A.prototype.readInt16LE=function(e,r){e=e>>>0,r||tt(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};A.prototype.readInt16BE=function(e,r){e=e>>>0,r||tt(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};A.prototype.readInt32LE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};A.prototype.readInt32BE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};A.prototype.readBigInt64LE=yi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});A.prototype.readBigInt64BE=yi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Cs(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});A.prototype.readFloatLE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),Ln.read(this,e,!0,23,4)};A.prototype.readFloatBE=function(e,r){return e=e>>>0,r||tt(e,4,this.length),Ln.read(this,e,!1,23,4)};A.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||tt(e,8,this.length),Ln.read(this,e,!0,52,8)};A.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||tt(e,8,this.length),Ln.read(this,e,!1,52,8)};function Tt(t,e,r,i,n,s){if(!A.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Tt(this,e,r,i,o,0)}let s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};A.prototype.writeUintBE=A.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Tt(this,e,r,i,o,0)}let s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};A.prototype.writeUint8=A.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,1,255,0),this[r]=e&255,r+1};A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Al(t,e,r,i,n){kl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function Cl(t,e,r,i,n){kl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}A.prototype.writeBigUInt64LE=yi(function(e,r=0){return Al(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});A.prototype.writeBigUInt64BE=yi(function(e,r=0){return Cl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});A.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Tt(this,e,r,i,f-1,-f)}let s=0,a=1,o=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&o===0&&this[r+s-1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};A.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Tt(this,e,r,i,f-1,-f)}let s=i-1,a=1,o=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[r+s+1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};A.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};A.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};A.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};A.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};A.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Tt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};A.prototype.writeBigInt64LE=yi(function(e,r=0){return Al(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});A.prototype.writeBigInt64BE=yi(function(e,r=0){return Cl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Tl(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Rl(t,e,r,i,n){return e=+e,r=r>>>0,n||Tl(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ln.write(t,e,r,i,23,4),r+4}A.prototype.writeFloatLE=function(e,r,i){return Rl(this,e,r,!0,i)};A.prototype.writeFloatBE=function(e,r,i){return Rl(this,e,r,!1,i)};function Dl(t,e,r,i,n){return e=+e,r=r>>>0,n||Tl(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ln.write(t,e,r,i,52,8),r+8}A.prototype.writeDoubleLE=function(e,r,i){return Dl(this,e,r,!0,i)};A.prototype.writeDoubleBE=function(e,r,i){return Dl(this,e,r,!1,i)};A.prototype.copy=function(e,r,i,n){if(!A.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};A.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!A.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let a=A.isBuffer(e)?e:A.from(e,n),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=a[s%o]}return this};var Mn={};function nu(t,e,r){Mn[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}nu("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);nu("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);nu("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Pl(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=Pl(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function Pl(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Km(t,e,r){Kn(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Cs(e,t.length-(r+1))}function kl(t,e,r,i,n,s){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",o;throw s>3?e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:o=`>= ${e}${a} and <= ${r}${a}`,new Mn.ERR_OUT_OF_RANGE("value",o,t)}Km(i,n,s)}function Kn(t,e){if(typeof t!="number")throw new Mn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Cs(t,e,r){throw Math.floor(t)!==t?(Kn(t,r),new Mn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Mn.ERR_BUFFER_OUT_OF_BOUNDS:new Mn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Fm=/[^+/0-9A-Za-z-_]/g;function Um(t){if(t=t.split("=")[0],t=t.trim().replace(Fm,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function su(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let a=0;a<i;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function qm(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Vm(t,e){let r,i,n,s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function Nl(t){return J0.toByteArray(Um(t))}function Ga(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function gr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function au(t){return t!==t}var Gm=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function yi(t){return typeof BigInt=="undefined"?Hm:t}function Hm(){throw new Error("BigInt not supported")}});var Ol=E(ou=>{ou.read=function(t,e,r,i,n){var s,a,o=n*8-i-1,f=(1<<o)-1,u=f>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+t[e+h],h+=l,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=i;c>0;a=a*256+t[e+h],h+=l,c-=8);if(s===0)s=1-u;else{if(s===f)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-u}return(d?-1:1)*a*Math.pow(2,s-i)};ou.write=function(t,e,r,i,n,s){var a,o,f,u=s*8-n-1,c=(1<<u)-1,h=c>>1,l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+h>=1?e+=l/f:e+=l*Math.pow(2,1-h),e*f>=2&&(a++,f/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*f-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=o&255,d+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;t[r+d]=a&255,d+=p,a/=256,u-=8);t[r+d-p]|=y*128}});var Xl=E(Hn=>{"use strict";var uu=Z0(),qn=Ol(),Ll=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Hn.Buffer=C;Hn.SlowBuffer=Qm;Hn.INSPECT_MAX_BYTES=50;var Ha=2147483647;Hn.kMaxLength=Ha;C.TYPED_ARRAY_SUPPORT=zm();!C.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function zm(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.buffer}});Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.byteOffset}});function zr(t){if(t>Ha)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,C.prototype),e}function C(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return cu(t)}return Ml(t,e,r)}C.poolSize=8192;function Ml(t,e,r){if(typeof t=="string")return Wm(t,e);if(ArrayBuffer.isView(t))return Ym(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(vr(t,ArrayBuffer)||t&&vr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(vr(t,SharedArrayBuffer)||t&&vr(t.buffer,SharedArrayBuffer)))return hu(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return C.from(i,e,r);let n=$m(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return C.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}C.from=function(t,e,r){return Ml(t,e,r)};Object.setPrototypeOf(C.prototype,Uint8Array.prototype);Object.setPrototypeOf(C,Uint8Array);function Kl(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function jm(t,e,r){return Kl(t),t<=0?zr(t):e!==void 0?typeof r=="string"?zr(t).fill(e,r):zr(t).fill(e):zr(t)}C.alloc=function(t,e,r){return jm(t,e,r)};function cu(t){return Kl(t),zr(t<0?0:lu(t)|0)}C.allocUnsafe=function(t){return cu(t)};C.allocUnsafeSlow=function(t){return cu(t)};function Wm(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!C.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Fl(t,e)|0,i=zr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function fu(t){let e=t.length<0?0:lu(t.length)|0,r=zr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function Ym(t){if(vr(t,Uint8Array)){let e=new Uint8Array(t);return hu(e.buffer,e.byteOffset,e.byteLength)}return fu(t)}function hu(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,C.prototype),i}function $m(t){if(C.isBuffer(t)){let e=lu(t.length)|0,r=zr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||yu(t.length)?zr(0):fu(t);if(t.type==="Buffer"&&Array.isArray(t.data))return fu(t.data)}function lu(t){if(t>=Ha)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ha.toString(16)+" bytes");return t|0}function Qm(t){return+t!=t&&(t=0),C.alloc(+t)}C.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==C.prototype};C.compare=function(e,r){if(vr(e,Uint8Array)&&(e=C.from(e,e.offset,e.byteLength)),vr(r,Uint8Array)&&(r=C.from(r,r.offset,r.byteLength)),!C.isBuffer(e)||!C.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};C.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};C.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return C.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=C.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let a=e[i];if(vr(a,Uint8Array))s+a.length>n.length?(C.isBuffer(a)||(a=C.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(C.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function Fl(t,e){if(C.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||vr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return du(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Zl(t).length;default:if(n)return i?-1:du(t).length;e=(""+e).toLowerCase(),n=!0}}C.byteLength=Fl;function Zm(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return oE(this,e,r);case"utf8":case"utf-8":return Vl(this,e,r);case"ascii":return sE(this,e,r);case"latin1":case"binary":return aE(this,e,r);case"base64":return iE(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uE(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}C.prototype._isBuffer=!0;function Ji(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}C.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Ji(this,r,r+1);return this};C.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Ji(this,r,r+3),Ji(this,r+1,r+2);return this};C.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Ji(this,r,r+7),Ji(this,r+1,r+6),Ji(this,r+2,r+5),Ji(this,r+3,r+4);return this};C.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Vl(this,0,e):Zm.apply(this,arguments)};C.prototype.toLocaleString=C.prototype.toString;C.prototype.equals=function(e){if(!C.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:C.compare(this,e)===0};C.prototype.inspect=function(){let e="",r=Hn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Ll&&(C.prototype[Ll]=C.prototype.inspect);C.prototype.compare=function(e,r,i,n,s){if(vr(e,Uint8Array)&&(e=C.from(e,e.offset,e.byteLength)),!C.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,o=i-r,f=Math.min(a,o),u=this.slice(n,s),c=e.slice(r,i);for(let h=0;h<f;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0};function Ul(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,yu(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=C.from(e,i)),C.isBuffer(e))return e.length===0?-1:ql(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ql(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function ql(t,e,r,i,n){let s=1,a=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function f(c,h){return s===1?c[h]:c.readUInt16BE(h*s)}let u;if(n){let c=-1;for(u=r;u<a;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(r+o>a&&(r=a-o),u=r;u>=0;u--){let c=!0;for(let h=0;h<o;h++)if(f(t,u+h)!==f(e,h)){c=!1;break}if(c)return u}return-1}C.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};C.prototype.indexOf=function(e,r,i){return Ul(this,e,r,i,!0)};C.prototype.lastIndexOf=function(e,r,i){return Ul(this,e,r,i,!1)};function Xm(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){let o=parseInt(e.substr(a*2,2),16);if(yu(o))return a;t[r+a]=o}return a}function Jm(t,e,r,i){return za(du(e,t.length-r),t,r,i)}function eE(t,e,r,i){return za(lE(e),t,r,i)}function tE(t,e,r,i){return za(Zl(e),t,r,i)}function rE(t,e,r,i){return za(pE(e,t.length-r),t,r,i)}C.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return Xm(this,e,r,i);case"utf8":case"utf-8":return Jm(this,e,r,i);case"ascii":case"latin1":case"binary":return eE(this,e,r,i);case"base64":return tE(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rE(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function iE(t,e,r){return e===0&&r===t.length?uu.fromByteArray(t):uu.fromByteArray(t.slice(e,r))}function Vl(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){let f,u,c,h;switch(o){case 1:s<128&&(a=s);break;case 2:f=t[n+1],(f&192)==128&&(h=(s&31)<<6|f&63,h>127&&(a=h));break;case 3:f=t[n+1],u=t[n+2],(f&192)==128&&(u&192)==128&&(h=(s&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:f=t[n+1],u=t[n+2],c=t[n+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(h=(s&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=o}return nE(i)}var Gl=4096;function nE(t){let e=t.length;if(e<=Gl)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Gl));return r}function sE(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function aE(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function oE(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=dE[t[s]];return n}function uE(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}C.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,C.prototype),n};function rt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return n};C.prototype.readUintBE=C.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};C.prototype.readUint8=C.prototype.readUInt8=function(e,r){return e=e>>>0,r||rt(e,1,this.length),this[e]};C.prototype.readUint16LE=C.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||rt(e,2,this.length),this[e]|this[e+1]<<8};C.prototype.readUint16BE=C.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||rt(e,2,this.length),this[e]<<8|this[e+1]};C.prototype.readUint32LE=C.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};C.prototype.readUint32BE=C.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};C.prototype.readBigUInt64LE=gi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ts(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});C.prototype.readBigUInt64BE=gi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ts(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});C.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};C.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=r,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};C.prototype.readInt8=function(e,r){return e=e>>>0,r||rt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};C.prototype.readInt16LE=function(e,r){e=e>>>0,r||rt(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};C.prototype.readInt16BE=function(e,r){e=e>>>0,r||rt(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};C.prototype.readInt32LE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};C.prototype.readInt32BE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};C.prototype.readBigInt64LE=gi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ts(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});C.prototype.readBigInt64BE=gi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ts(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});C.prototype.readFloatLE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),qn.read(this,e,!0,23,4)};C.prototype.readFloatBE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),qn.read(this,e,!1,23,4)};C.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||rt(e,8,this.length),qn.read(this,e,!0,52,8)};C.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||rt(e,8,this.length),qn.read(this,e,!1,52,8)};function Rt(t,e,r,i,n,s){if(!C.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Rt(this,e,r,i,o,0)}let s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};C.prototype.writeUintBE=C.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Rt(this,e,r,i,o,0)}let s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};C.prototype.writeUint8=C.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,1,255,0),this[r]=e&255,r+1};C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Hl(t,e,r,i,n){Ql(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function zl(t,e,r,i,n){Ql(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}C.prototype.writeBigUInt64LE=gi(function(e,r=0){return Hl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeBigUInt64BE=gi(function(e,r=0){return zl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Rt(this,e,r,i,f-1,-f)}let s=0,a=1,o=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&o===0&&this[r+s-1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};C.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Rt(this,e,r,i,f-1,-f)}let s=i-1,a=1,o=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[r+s+1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};C.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};C.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};C.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};C.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};C.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};C.prototype.writeBigInt64LE=gi(function(e,r=0){return Hl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});C.prototype.writeBigInt64BE=gi(function(e,r=0){return zl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function jl(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Wl(t,e,r,i,n){return e=+e,r=r>>>0,n||jl(t,e,r,4,34028234663852886e22,-34028234663852886e22),qn.write(t,e,r,i,23,4),r+4}C.prototype.writeFloatLE=function(e,r,i){return Wl(this,e,r,!0,i)};C.prototype.writeFloatBE=function(e,r,i){return Wl(this,e,r,!1,i)};function Yl(t,e,r,i,n){return e=+e,r=r>>>0,n||jl(t,e,r,8,17976931348623157e292,-17976931348623157e292),qn.write(t,e,r,i,52,8),r+8}C.prototype.writeDoubleLE=function(e,r,i){return Yl(this,e,r,!0,i)};C.prototype.writeDoubleBE=function(e,r,i){return Yl(this,e,r,!1,i)};C.prototype.copy=function(e,r,i,n){if(!C.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};C.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!C.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let a=C.isBuffer(e)?e:C.from(e,n),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=a[s%o]}return this};var Vn={};function pu(t,e,r){Vn[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}pu("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);pu("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);pu("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=$l(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=$l(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function $l(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function cE(t,e,r){Gn(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ts(e,t.length-(r+1))}function Ql(t,e,r,i,n,s){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",o;throw s>3?e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:o=`>= ${e}${a} and <= ${r}${a}`,new Vn.ERR_OUT_OF_RANGE("value",o,t)}cE(i,n,s)}function Gn(t,e){if(typeof t!="number")throw new Vn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ts(t,e,r){throw Math.floor(t)!==t?(Gn(t,r),new Vn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Vn.ERR_BUFFER_OUT_OF_BOUNDS:new Vn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var fE=/[^+/0-9A-Za-z-_]/g;function hE(t){if(t=t.split("=")[0],t=t.trim().replace(fE,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function du(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let a=0;a<i;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function lE(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function pE(t,e){let r,i,n,s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function Zl(t){return uu.toByteArray(hE(t))}function za(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function vr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function yu(t){return t!==t}var dE=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function gi(t){return typeof BigInt=="undefined"?yE:t}function yE(){throw new Error("BigInt not supported")}});var gu=E((_R,ep)=>{"use strict";var{Buffer:er}=Xl(),Jl=Symbol.for("BufferList");function Re(t){if(!(this instanceof Re))return new Re(t);Re._init.call(this,t)}Re._init=function(e){Object.defineProperty(this,Jl,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Re.prototype._new=function(e){return new Re(e)};Re.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};Re.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};Re.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Re.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Re.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||er.alloc(0);let s=!!e,a=this._offset(i),o=n-i,f=o,u=s&&r||0,c=a[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:er.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,u),u+=this._bufs[h].length;return e}if(f<=this._bufs[a[0]].length-c)return s?this._bufs[a[0]].copy(e,r,c,c+f):this._bufs[a[0]].slice(c,c+f);s||(e=er.allocUnsafe(o));for(let h=a[0];h<this._bufs.length;h++){let l=this._bufs[h].length-c;if(f>l)this._bufs[h].copy(e,u,c),u+=l;else{this._bufs[h].copy(e,u,c,c+f),u+=l;break}f-=l,c&&(c=0)}return e.length>u?e.slice(0,u):e};Re.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};Re.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};Re.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Re.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Re.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(er.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(er.from(e));return this};Re.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Re.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=er.from([t]):typeof t=="string"?t=er.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=er.from(t.buffer,t.byteOffset,t.byteLength):er.isBuffer(t)||(t=er.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let a=this._bufs[n];for(;s<a.length;)if(a.length-s>=t.length){let f=a.indexOf(t,s);if(f!==-1)return this._reverseOffset([n,f]);s=a.length-t.length+1}else{let f=this._reverseOffset([n,s]);if(this._match(f,t))return f;s++}s=0}return-1};Re.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Re.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:Re.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();Re.prototype._isBufferList=function(e){return e instanceof Re||Re.isBufferList(e)};Re.isBufferList=function(e){return e!=null&&e[Jl]};ep.exports=Re});var ip=E((IR,rp)=>{rp.exports=vu;var tp=128,gE=127,vE=~gE,xE=Math.pow(2,31);function vu(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw vu.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=xE;)e[r++]=t&255|tp,t/=128;for(;t&vE;)e[r++]=t&255|tp,t>>>=7;return e[r]=t|0,vu.bytes=r-i+1,e}});var ap=E((BR,sp)=>{sp.exports=xu;var bE=128,np=127;function xu(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a||i>49)throw xu.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&np)<<i:(s&np)*Math.pow(2,i),i+=7}while(s>=bE);return xu.bytes=n-e,r}});var up=E((AR,op)=>{var mE=Math.pow(2,7),EE=Math.pow(2,14),wE=Math.pow(2,21),SE=Math.pow(2,28),_E=Math.pow(2,35),IE=Math.pow(2,42),BE=Math.pow(2,49),AE=Math.pow(2,56),CE=Math.pow(2,63);op.exports=function(t){return t<mE?1:t<EE?2:t<wE?3:t<SE?4:t<_E?5:t<IE?6:t<BE?7:t<AE?8:t<CE?9:10}});var ja=E((CR,cp)=>{cp.exports={encode:ip(),decode:ap(),encodingLength:up()}});var bu=E((TR,lp)=>{"use strict";var fp=ja(),{Buffer:TE}=Un(),hp=(t,e,r)=>{let i=fp.encode(t,e,r);return hp.bytes=fp.encode.bytes,e||TE.from(i)};lp.exports=hp});var xp=E((RR,Wa)=>{"use strict";var{Buffer:pp}=Un(),dp=gu(),yp=bu(),mu=8,gp=10*1024;function vp(t){t=t||{};let e=Math.max(t.poolSize||gp,t.minPoolSize||mu),r=t.lengthEncoder||yp;return async function*(n){let s=pp.alloc(e),a=0;for await(let o of n){r(o.length,s,a);let f=s.slice(a,a+r.bytes);a+=r.bytes,s.length-a<mu&&(s=pp.alloc(e),a=0),yield new dp().append(f).append(o)}}}vp.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||yp;return new dp([r(t.length),t.slice()])};Wa.exports=vp;Wa.exports.MIN_POOL_SIZE=mu;Wa.exports.DEFAULT_POOL_SIZE=gp});var Eu=E((DR,Ep)=>{"use strict";var bp=ja(),{Buffer:RE}=Un(),DE=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),mp=t=>{let e=bp.decode(RE.isBuffer(t)?t:DE(t));return mp.bytes=bp.decode.bytes,e};Ep.exports=mp});var Ip=E((PR,Ya)=>{"use strict";var{Buffer:PE}=Un(),wu=gu(),kE=Eu(),wp=8,Sp=1024*1024*4,_p=PE.alloc(0),vi={LENGTH:"readLength",DATA:"readData"},NE={[vi.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:vi.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new wu,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(_p),{mode:vi.LENGTH,chunk:t,buffer:e,data:_p}):{mode:vi.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[vi.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:vi.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),a=e.length>n?e.shallowSlice(n):void 0;return e=new wu,i.onData&&i.onData(s),{mode:vi.LENGTH,chunk:a,buffer:e,state:void 0,data:s}}};function Su(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||kE,maxLengthLength:t.maxLengthLength||wp,maxDataLength:t.maxDataLength||Sp,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new wu,s=vi.LENGTH,a;for await(let o of i){let f=o;for(;f;){let u=NE[s](f,n,a,e);s=u.mode,f=u.chunk,n=u.buffer,a=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}Su.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return Su({...e||{},onLength:s=>{r=s}})(i)};Ya.exports=Su;Ya.exports.MAX_LENGTH_LENGTH=wp;Ya.exports.MAX_DATA_LENGTH=Sp});var Cp=E((kR,Ap)=>{"use strict";var{Buffer:OE}=Un(),Bp=(t,e,r)=>(e=e||OE.allocUnsafe(4),e.writeInt32BE(t,r),e);Bp.bytes=4;Ap.exports=Bp});var Dp=E((NR,Rp)=>{"use strict";var Tp=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Tp.bytes=4;Rp.exports=Tp});var Pp=E(en=>{"use strict";en.encode=xp();en.decode=Ip();en.varintEncode=bu();en.varintDecode=Eu();en.int32BEEncode=Cp();en.int32BEDecode=Dp()});var Np=E((MR,kp)=>{kp.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Mp=E((FR,Lp)=>{var Op=Np();Lp.exports=class{constructor(e){this.hwm=e||16,this.head=new Op(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new Op(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Fp=E((UR,Kp)=>{var _u=Mp();Kp.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new _u,i,n,s,a=()=>{if(!r.isEmpty()){if(t.writev){let y,g=[];for(;!r.isEmpty();){if(y=r.shift(),y.error)throw y.error;g.push(y.value)}return{done:y.done,value:g}}let p=r.shift();if(p.error)throw p.error;return p}return s?{done:!0}:new Promise((p,y)=>{n=g=>(n=null,g.error?y(g.error):t.writev&&!g.done?p({done:g.done,value:[g.value]}):p(g),i)})},o=p=>n?n(p):(r.push(p),i),f=p=>(r=new _u,n?n({error:p}):(r.push({error:p}),i)),u=p=>s?i:o({done:!1,value:p}),c=p=>s?i:(s=!0,p?f(p):o({done:!0})),h=()=>(r=new _u,c(),{done:!0}),l=p=>(c(p),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:l,push:u,end:c},!e)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:u,end(p){return d.end(p),e&&(e(p),e=null),i}},i}});var qp=E((qR,Up)=>{Up.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Gp=E((GR,Vp)=>{Vp.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Wp=E((HR,tn)=>{var LE=qp(),Iu=Gp(),Hp=(t,e,r)=>Bu(t,Array.isArray(e)?e:[{signal:e,options:r}]),Bu=(t,e)=>{t=LE(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:o,options:f}of e)if(o.aborted){let{abortMessage:u,abortCode:c}=f;throw new Iu(u,c)}let a=new Promise((o,f)=>{i=()=>{let{options:u}=e.find(({signal:l})=>l.aborted),{abortMessage:c,abortCode:h}=u;f(new Iu(c,h))}});s=await Promise.race([a,t.next()]),i=null}catch(a){for(let{signal:u}of e)u.removeEventListener("abort",n);let o=e.find(({signal:u})=>u.aborted),f=a.type==="aborted"&&o;if(f&&o.options.onAbort&&await o.options.onAbort(t),typeof t.return=="function")try{let u=t.return();u instanceof Promise&&u.catch(c=>{o.options.onReturnError!=null&&o.options.onReturnError(c)})}catch(u){o.options.onReturnError!=null&&o.options.onReturnError(u)}if(f&&o.options.returnOnAbort)return;throw a}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},zp=(t,e,r)=>jp(t,Array.isArray(e)?e:[{signal:e,options:r}]),jp=(t,e)=>r=>t(Bu(r,e)),ME=(t,e,r)=>KE(t,Array.isArray(e)?e:[{signal:e,options:r}]),KE=(t,e)=>({sink:jp(t.sink,e),source:Bu(t.source,e)});tn.exports=Hp;tn.exports.AbortError=Iu;tn.exports.source=Hp;tn.exports.sink=zp;tn.exports.transform=zp;tn.exports.duplex=ME});var Jp=E((zR,Xp)=>{"use strict";var Yp=Ta(),FE=Object.assign(Yp("libp2p-pubsub:peer-streams"),{error:Yp("libp2p-pubsub:peer-streams:err")}),{EventEmitter:UE}=A0(),$p=Pp(),qE=Fp(),{pipe:Qp}=T0(),{source:VE}=Wp(),Zp=class extends UE{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=VE(Qp(this._rawInboundStream,$p.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=qE({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),Qp(this.outboundStream,$p.encode(),this._rawOutboundStream).catch(i=>{FE.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};Xp.exports=Zp});var td=E(ed=>{"use strict";var GE={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};ed.SignaturePolicy=GE});var Qa=E((WR,rd)=>{"use strict";var $a=65536;function HE(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>$a)for(;r<t;)r+$a>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+$a)),r+=$a);else crypto.getRandomValues(e);return e}rd.exports=HE});var nd=E((YR,id)=>{"use strict";var zE=Qa(),jE=Oe();id.exports=function(t){if(isNaN(t)||t<=0)throw jE(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return zE(t)}});function WE(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=n}var o=t.length,f=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,g=0,v=0,x=p.length;v!==x&&p[v]===0;)v++,y++;for(var w=(x-v)*c+1>>>0,P=new Uint8Array(w);v!==x;){for(var B=p[v],S=0,F=w-1;(B!==0||S<g)&&F!==-1;F--,S++)B+=256*P[F]>>>0,P[F]=B%o>>>0,B=B/o>>>0;if(B!==0)throw new Error("Non-zero carry");g=S,v++}for(var z=w-g;z!==w&&P[z]===0;)z++;for(var ee=f.repeat(y);z<w;++z)ee+=t.charAt(P[z]);return ee}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var g=0,v=0;p[y]===f;)g++,y++;for(var x=(p.length-y)*u+1>>>0,w=new Uint8Array(x);p[y];){var P=r[p.charCodeAt(y)];if(P===255)return;for(var B=0,S=x-1;(P!==0||B<v)&&S!==-1;S--,B++)P+=o*w[S]>>>0,w[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");v=B,y++}if(p[y]!==" "){for(var F=x-v;F!==x&&w[F]===0;)F++;for(var z=new Uint8Array(g+(x-F)),ee=g;F!==x;)z[ee++]=w[F++];return z}}}function d(p){var y=l(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var YE,$E,sd,ad=Ee(()=>{YE=WE,$E=YE,sd=$E});var QR,od,jr,ud,cd,xi=Ee(()=>{QR=new Uint8Array(0),od=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},jr=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ud=t=>new TextEncoder().encode(t),cd=t=>new TextDecoder().decode(t)});var hd,ld,pd,dd,yd,Za,bi,QE,ZE,Ge,xr=Ee(()=>{ad();xi();hd=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ld=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return dd(this,e)}},pd=class{constructor(e){this.decoders=e}or(e){return dd(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},dd=(t,e)=>new pd({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),yd=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new hd(e,r,i),this.decoder=new ld(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Za=({name:t,prefix:e,encode:r,decode:i})=>new yd(t,e,r,i),bi=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=sd(r,e);return Za({prefix:t,name:e,encode:i,decode:s=>jr(n(s))})},QE=(t,e,r,i)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),o=0,f=0,u=0;for(let c=0;c<s;++c){let h=n[t[c]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,o+=r,o>=8&&(o-=8,a[u++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return a},ZE=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",a=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],a+=8;a>r;)a-=r,s+=e[n&o>>a];if(a&&(s+=e[n&o<<r-a]),i)for(;s.length*r&7;)s+="=";return s},Ge=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Za({prefix:e,name:t,encode(n){return ZE(n,i,r)},decode(n){return QE(n,i,r,t)}})});var Au={};ft(Au,{identity:()=>XE});var XE,gd=Ee(()=>{xr();xi();XE=Za({prefix:"\0",name:"identity",encode:t=>cd(t),decode:t=>ud(t)})});var Cu={};ft(Cu,{base2:()=>JE});var JE,vd=Ee(()=>{xr();JE=Ge({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Tu={};ft(Tu,{base8:()=>ew});var ew,xd=Ee(()=>{xr();ew=Ge({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Ru={};ft(Ru,{base10:()=>tw});var tw,bd=Ee(()=>{xr();tw=bi({prefix:"9",name:"base10",alphabet:"0123456789"})});var Xa={};ft(Xa,{base16:()=>rw,base16upper:()=>iw});var rw,iw,Du=Ee(()=>{xr();rw=Ge({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iw=Ge({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Rs={};ft(Rs,{base32:()=>zn,base32hex:()=>ow,base32hexpad:()=>cw,base32hexpadupper:()=>fw,base32hexupper:()=>uw,base32pad:()=>sw,base32padupper:()=>aw,base32upper:()=>nw,base32z:()=>hw});var zn,nw,sw,aw,ow,uw,cw,fw,hw,Ds=Ee(()=>{xr();zn=Ge({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nw=Ge({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sw=Ge({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aw=Ge({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ow=Ge({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uw=Ge({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cw=Ge({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fw=Ge({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hw=Ge({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Ja={};ft(Ja,{base36:()=>lw,base36upper:()=>pw});var lw,pw,Pu=Ee(()=>{xr();lw=bi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pw=bi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var rn={};ft(rn,{base58btc:()=>br,base58flickr:()=>dw});var br,dw,nn=Ee(()=>{xr();br=bi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dw=bi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var mi={};ft(mi,{base64:()=>yw,base64pad:()=>gw,base64url:()=>vw,base64urlpad:()=>xw});var yw,gw,vw,xw,sn=Ee(()=>{xr();yw=Ge({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gw=Ge({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vw=Ge({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xw=Ge({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function Ed(t,e,r){e=e||[],r=r||0;for(var i=r;t>=ww;)e[r++]=t&255|md,t/=128;for(;t&Ew;)e[r++]=t&255|md,t>>>=7;return e[r]=t|0,Ed.bytes=r-i+1,e}function ku(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a)throw ku.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&wd)<<i:(s&wd)*Math.pow(2,i),i+=7}while(s>=_w);return ku.bytes=n-e,r}var bw,md,mw,Ew,ww,Sw,_w,wd,Iw,Bw,Aw,Cw,Tw,Rw,Dw,Pw,kw,Nw,Ow,Lw,Ps,Sd=Ee(()=>{bw=Ed,md=128,mw=127,Ew=~mw,ww=Math.pow(2,31);Sw=ku,_w=128,wd=127;Iw=Math.pow(2,7),Bw=Math.pow(2,14),Aw=Math.pow(2,21),Cw=Math.pow(2,28),Tw=Math.pow(2,35),Rw=Math.pow(2,42),Dw=Math.pow(2,49),Pw=Math.pow(2,56),kw=Math.pow(2,63),Nw=function(t){return t<Iw?1:t<Bw?2:t<Aw?3:t<Cw?4:t<Tw?5:t<Rw?6:t<Dw?7:t<Pw?8:t<kw?9:10},Ow={encode:bw,decode:Sw,encodingLength:Nw},Lw=Ow,Ps=Lw});var ks,jn,Wn,eo=Ee(()=>{Sd();ks=t=>[Ps.decode(t),Ps.decode.bytes],jn=(t,e,r=0)=>(Ps.encode(t,e,r),e),Wn=t=>Ps.encodingLength(t)});var to={};ft(to,{Digest:()=>Yn,create:()=>Ei,decode:()=>Nu,equals:()=>Ou});var Ei,Nu,Ou,Yn,$n=Ee(()=>{xi();eo();Ei=(t,e)=>{let r=e.byteLength,i=Wn(t),n=i+Wn(r),s=new Uint8Array(n+r);return jn(t,s,0),jn(r,s,i),s.set(e,n),new Yn(t,r,e,s)},Nu=t=>{let e=jr(t),[r,i]=ks(e),[n,s]=ks(e.subarray(i)),a=e.subarray(i+s);if(a.byteLength!==n)throw new Error("Incorrect length");return new Yn(r,n,a,e)},Ou=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&od(t.bytes,e.bytes),Yn=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});var Lu,Id,Mu=Ee(()=>{$n();Lu=({name:t,code:e,encode:r})=>new Id(t,e,r),Id=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Ei(this.code,r):r.then(i=>Ei(this.code,i))}else throw Error("Unknown type, must be binary type")}}});var Ut={};ft(Ut,{sha256:()=>Mw,sha512:()=>Kw});var Ad,Mw,Kw,tr=Ee(()=>{Mu();Ad=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Mw=Lu({name:"sha2-256",code:18,encode:Ad("SHA-256")}),Kw=Lu({name:"sha2-512",code:19,encode:Ad("SHA-512")})});var Qn={};ft(Qn,{identity:()=>qw});var Cd,Fw,Uw,qw,Ns=Ee(()=>{xi();$n();Cd=0,Fw="identity",Uw=t=>Ei(Cd,jr(t)),qw={code:Cd,name:Fw,digest:Uw}});var Td=Ee(()=>{xi()});var b6,m6,Rd=Ee(()=>{b6=new TextEncoder,m6=new TextDecoder});var kd={};ft(kd,{CID:()=>Xe});var Xe,Hw,zw,jw,Os,Ww,Dd,Pd,ro,io,Yw,$w,Qw,Ku=Ee(()=>{eo();$n();nn();Ds();xi();Xe=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:io,byteLength:io,code:ro,version:ro,multihash:ro,bytes:ro,_baseCache:io,asCID:io})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Os)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ww)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Xe.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=Ei(e,r);return Xe.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ou(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return zw(r,n,e||br.encoder);default:return jw(r,n,e||zn.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return $w(/^0\.0/,Qw),!!(e&&(e[Pd]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Xe)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new Xe(r,i,n,s||Dd(r,i,n.bytes))}else if(e!=null&&e[Pd]===!0){let{version:r,multihash:i,code:n}=e,s=Nu(i);return Xe.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Os)throw new Error(`Version 0 CID must use dag-pb (code: ${Os}) block encoding`);return new Xe(e,r,i,i.bytes)}case 1:{let n=Dd(e,r,i.bytes);return new Xe(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return Xe.create(0,Os,e)}static createV1(e,r){return Xe.create(1,e,r)}static decode(e){let[r,i]=Xe.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Xe.inspectBytes(e),i=r.size-r.multihashSize,n=jr(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),a=new Yn(r.multihashCode,r.digestSize,s,n);return[r.version===0?Xe.createV0(a):Xe.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[h,l]=ks(e.subarray(r));return r+=l,h},n=i(),s=Os;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let a=r,o=i(),f=i(),u=r+f,c=u-a;return{version:n,codec:s,multihashCode:o,digestSize:f,multihashSize:c,size:u}}static parse(e,r){let[i,n]=Hw(e,r),s=Xe.decode(n);return s._baseCache.set(i,e),s}},Hw=(t,e)=>{switch(t[0]){case"Q":{let r=e||br;return[br.prefix,r.decode(`${br.prefix}${t}`)]}case br.prefix:{let r=e||br;return[br.prefix,r.decode(t)]}case zn.prefix:{let r=e||zn;return[zn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},zw=(t,e,r)=>{let{prefix:i}=r;if(i!==br.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},jw=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},Os=112,Ww=18,Dd=(t,e,r)=>{let i=Wn(t),n=i+Wn(e),s=new Uint8Array(n+r.byteLength);return jn(t,s,0),jn(e,s,i),s.set(r,n),s},Pd=Symbol.for("@ipld/js-cid/CID"),ro={writable:!1,configurable:!1,enumerable:!0},io={writable:!1,enumerable:!1,configurable:!1},Yw="0.0.0-dev",$w=(t,e)=>{if(t.test(Yw))console.warn(e);else throw new Error(e)},Qw=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Nd=Ee(()=>{Ku();eo();xi();Mu();$n()});var Fu,T6,Od=Ee(()=>{gd();vd();xd();bd();Du();Ds();Pu();nn();sn();tr();Ns();Td();Rd();Nd();Fu={...Au,...Cu,...Tu,...Ru,...Xa,...Rs,...Ja,...rn,...mi},T6={...Ut,...Qn}});function Ld(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var Md,Uu,Zw,no,qu=Ee(()=>{Od();Md=Ld("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Uu=Ld("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Zw={utf8:Md,"utf-8":Md,hex:Fu.base16,latin1:Uu,ascii:Uu,binary:Uu,...Fu},no=Zw});var dt={};ft(dt,{toString:()=>Xw});function Xw(t,e="utf8"){let r=no[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var yt=Ee(()=>{qu()});var ht={};ft(ht,{fromString:()=>Jw});function Jw(t,e="utf8"){let r=no[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var lt=Ee(()=>{qu()});var ao=E((O6,Fd)=>{"use strict";var an=Qi(),so=an.Reader,Kd=an.Writer,gt=an.util,qt=an.roots["libp2p-crypto-keys"]||(an.roots["libp2p-crypto-keys"]={});qt.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();qt.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=gt.newBuffer([]),t.encode=function(r,i){return i||(i=Kd.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof so||(r=so.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new qt.PublicKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw gt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw gt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof qt.PublicKey)return r;var i=new qt.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?gt.base64.decode(r.Data,i.Data=gt.newBuffer(gt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=gt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?qt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?gt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,an.util.toJSONOptions)},t}();qt.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=gt.newBuffer([]),t.encode=function(r,i){return i||(i=Kd.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof so||(r=so.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new qt.PrivateKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw gt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw gt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof qt.PrivateKey)return r;var i=new qt.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?gt.base64.decode(r.Data,i.Data=gt.newBuffer(gt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=gt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?qt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?gt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,an.util.toJSONOptions)},t}();Fd.exports=qt});var Se=E((L6,Ud)=>{Ud.exports={options:{usePureJavaScript:!1}}});var Gd=E((M6,Vd)=>{var Vu={};Vd.exports=Vu;var qd={};Vu.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=eS(t,e);else{var n=0,s=e.length,a=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var f=0,u=t[n];f<o.length;++f)u+=o[f]<<8,o[f]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=a;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var c=new RegExp(".{1,"+r+"}","g");i=i.match(c).join(`\r
`)}return i};Vu.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=qd[e];if(!r){r=qd[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),a=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var f=0,u=o;f<a.length;++f)u+=a[f]*n,a[f]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;t[c]===s&&c<t.length-1;++c)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function eS(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%i,o=o/i|0;for(;o>0;)s.push(o%i),o=o/i|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=n;for(r=s.length-1;r>=0;--r)f+=e[s[r]];return f}});var $e=E((K6,Wd)=>{var Hd=Se(),zd=Gd(),b=Wd.exports=Hd.util=Hd.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){b.nextTick=process.nextTick,typeof setImmediate=="function"?b.setImmediate=setImmediate:b.setImmediate=b.nextTick;return}if(typeof setImmediate=="function"){b.setImmediate=function(){return setImmediate.apply(void 0,arguments)},b.nextTick=function(o){return setImmediate(o)};return}if(b.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var a=o,t="forge.setImmediate",e=[];b.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=b.setImmediate;b.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),s(f)):(e.push(f),e.length===1&&n.setAttribute("a",i=!i))}}b.nextTick=b.setImmediate})();b.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;b.globalScope=function(){return b.isNodejs?globalThis:typeof self=="undefined"?window:self}();b.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};b.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};b.isArrayBufferView=function(t){return t&&b.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ls(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}b.ByteBuffer=Gu;function Gu(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(b.isArrayBuffer(t)||b.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Gu||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}b.ByteStringBuffer=Gu;var tS=4096;b.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>tS&&(this.data.substr(0,1),this._constructedStringLength=0)};b.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};b.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};b.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};b.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};b.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};b.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(b.encodeUtf8(t))};b.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};b.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};b.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};b.ByteStringBuffer.prototype.putInt=function(t,e){Ls(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};b.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};b.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};b.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};b.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};b.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};b.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};b.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};b.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};b.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};b.ByteStringBuffer.prototype.getInt=function(t){Ls(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};b.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};b.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};b.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};b.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};b.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};b.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};b.ByteStringBuffer.prototype.copy=function(){var t=b.createBuffer(this.data);return t.read=this.read,t};b.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};b.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};b.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};b.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};b.ByteStringBuffer.prototype.toString=function(){return b.decodeUtf8(this.bytes())};function rS(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=b.isArrayBuffer(t),i=b.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}b.DataBuffer=rS;b.DataBuffer.prototype.length=function(){return this.write-this.read};b.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};b.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};b.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};b.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};b.DataBuffer.prototype.putBytes=function(t,e){if(b.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(b.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof b.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&b.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof b.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=b.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=b.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};b.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};b.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};b.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};b.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};b.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};b.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};b.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};b.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};b.DataBuffer.prototype.putInt=function(t,e){Ls(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};b.DataBuffer.prototype.putSignedInt=function(t,e){return Ls(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};b.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};b.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};b.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};b.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};b.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};b.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};b.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};b.DataBuffer.prototype.getInt=function(t){Ls(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};b.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};b.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};b.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};b.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};b.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};b.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};b.DataBuffer.prototype.copy=function(){return new b.DataBuffer(this)};b.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};b.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};b.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};b.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};b.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return b.binary.raw.encode(e);if(t==="hex")return b.binary.hex.encode(e);if(t==="base64")return b.binary.base64.encode(e);if(t==="utf8")return b.text.utf8.decode(e);if(t==="utf16")return b.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};b.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=b.encodeUtf8(t)),new b.ByteBuffer(t)};b.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};b.xorBytes=function(t,e,r){for(var i="",n="",s="",a=0,o=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(i+=s,s="",o=0),s+=String.fromCharCode(n),++o;return i+=s,i};b.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};b.bytesToHex=function(t){return b.createBuffer(t).toHex()};b.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Si=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],jd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";b.encode64=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.length;)n=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=wi.charAt(n>>2),r+=wi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=wi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":wi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};b.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,a=0;a<t.length;)r=Si[t.charCodeAt(a++)-43],i=Si[t.charCodeAt(a++)-43],n=Si[t.charCodeAt(a++)-43],s=Si[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};b.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};b.decodeUtf8=function(t){return decodeURIComponent(escape(t))};b.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:zd.encode,decode:zd.decode}};b.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};b.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};b.binary.hex.encode=b.bytesToHex;b.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};b.binary.base64.encode=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.byteLength;)n=t[o++],s=t[o++],a=t[o++],r+=wi.charAt(n>>2),r+=wi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=wi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":wi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};b.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,a,o,f=0,u=r;f<t.length;)n=Si[t.charCodeAt(f++)-43],s=Si[t.charCodeAt(f++)-43],a=Si[t.charCodeAt(f++)-43],o=Si[t.charCodeAt(f++)-43],i[u++]=n<<2|s>>4,a!==64&&(i[u++]=(s&15)<<4|a>>2,o!==64&&(i[u++]=(a&3)<<6|o));return e?u-r:i.subarray(0,u)};b.binary.base58.encode=function(t,e){return b.binary.baseN.encode(t,jd,e)};b.binary.base58.decode=function(t,e){return b.binary.baseN.decode(t,jd,e)};b.text={utf8:{},utf16:{}};b.text.utf8.encode=function(t,e,r){t=b.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};b.text.utf8.decode=function(t){return b.decodeUtf8(String.fromCharCode.apply(null,t))};b.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o),s+=2;return e?s-r:i};b.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};b.deflate=function(t,e,r){if(e=b.decode64(t.deflate(b.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};b.inflate=function(t,e,r){var i=t.inflate(b.encode64(e)).rval;return i===null?null:b.decode64(i)};var Hu=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=b.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},zu=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(b.decode64(r))),r},iS=function(t,e,r,i){var n=zu(t,e);n===null&&(n={}),n[r]=i,Hu(t,e,n)},nS=function(t,e,r){var i=zu(t,e);return i!==null&&(i=r in i?i[r]:null),i},sS=function(t,e,r){var i=zu(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),Hu(t,e,i)}},aS=function(t,e){Hu(t,e,null)},oo=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,a=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(f){a=f}if(s)break}if(!s)throw a;return i};b.setItem=function(t,e,r,i,n){oo(iS,arguments,n)};b.getItem=function(t,e,r,i){return oo(nS,arguments,i)};b.removeItem=function(t,e,r,i){oo(sS,arguments,i)};b.clearItems=function(t,e,r){oo(aS,arguments,r)};b.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};b.format=function(t){for(var e=/%./g,r,i,n=0,s=[],a=0;r=e.exec(t);){i=t.substring(a,e.lastIndex-2),i.length>0&&s.push(i),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};b.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=i===void 0?".":i,f=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(n-u).toFixed(s).slice(2):"")};b.formatSize=function(t){return t>=1073741824?t=b.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=b.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=b.formatNumber(t/1024,0)+" KiB":t=b.formatNumber(t,0)+" bytes",t};b.bytesFromIP=function(t){return t.indexOf(".")!==-1?b.bytesFromIPv4(t):t.indexOf(":")!==-1?b.bytesFromIPv6(t):null};b.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=b.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};b.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=b.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=b.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};b.bytesToIP=function(t){return t.length===4?b.bytesToIPv4(t):t.length===16?b.bytesToIPv6(t):null};b.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};b.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=b.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var f=r[i];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};b.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in b&&!t.update)return e(null,b.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return b.cores=navigator.hardwareConcurrency,e(null,b.cores);if(typeof Worker=="undefined")return b.cores=1,e(null,b.cores);if(typeof Blob=="undefined")return b.cores=2,e(null,b.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(a,o,f){if(o===0){var u=Math.floor(a.reduce(function(c,h){return c+h},0)/a.length);return b.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,b.cores)}n(f,function(c,h){a.push(s(f,h)),i(a,o-1,f)})}function n(a,o){for(var f=[],u=[],c=0;c<a;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===a){for(var d=0;d<a;++d)f[d].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<a;++c)f[c].postMessage(c)}function s(a,o){for(var f=[],u=0;u<a;++u)for(var c=o[u],h=f[u]=[],l=0;l<a;++l)if(u!==l){var d=o[l];(c.st>d.st&&c.st<d.et||d.st>c.st&&d.st<c.et)&&h.push(l)}return f.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var uo=E((F6,Yd)=>{var Ms=Se();Ms.pki=Ms.pki||{};var ju=Yd.exports=Ms.pki.oids=Ms.oids=Ms.oids||{};function L(t,e){ju[t]=e,ju[e]=t}function ge(t,e){ju[t]=e}L("1.2.840.113549.1.1.1","rsaEncryption");L("1.2.840.113549.1.1.4","md5WithRSAEncryption");L("1.2.840.113549.1.1.5","sha1WithRSAEncryption");L("1.2.840.113549.1.1.7","RSAES-OAEP");L("1.2.840.113549.1.1.8","mgf1");L("1.2.840.113549.1.1.9","pSpecified");L("1.2.840.113549.1.1.10","RSASSA-PSS");L("1.2.840.113549.1.1.11","sha256WithRSAEncryption");L("1.2.840.113549.1.1.12","sha384WithRSAEncryption");L("1.2.840.113549.1.1.13","sha512WithRSAEncryption");L("1.3.101.112","EdDSA25519");L("1.2.840.10040.4.3","dsa-with-sha1");L("1.3.14.3.2.7","desCBC");L("1.3.14.3.2.26","sha1");L("1.3.14.3.2.29","sha1WithRSASignature");L("2.16.840.1.101.3.4.2.1","sha256");L("2.16.840.1.101.3.4.2.2","sha384");L("2.16.840.1.101.3.4.2.3","sha512");L("1.2.840.113549.2.5","md5");L("1.2.840.113549.1.7.1","data");L("1.2.840.113549.1.7.2","signedData");L("1.2.840.113549.1.7.3","envelopedData");L("1.2.840.113549.1.7.4","signedAndEnvelopedData");L("1.2.840.113549.1.7.5","digestedData");L("1.2.840.113549.1.7.6","encryptedData");L("1.2.840.113549.1.9.1","emailAddress");L("1.2.840.113549.1.9.2","unstructuredName");L("1.2.840.113549.1.9.3","contentType");L("1.2.840.113549.1.9.4","messageDigest");L("1.2.840.113549.1.9.5","signingTime");L("1.2.840.113549.1.9.6","counterSignature");L("1.2.840.113549.1.9.7","challengePassword");L("1.2.840.113549.1.9.8","unstructuredAddress");L("1.2.840.113549.1.9.14","extensionRequest");L("1.2.840.113549.1.9.20","friendlyName");L("1.2.840.113549.1.9.21","localKeyId");L("1.2.840.113549.1.9.22.1","x509Certificate");L("1.2.840.113549.1.12.10.1.1","keyBag");L("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");L("1.2.840.113549.1.12.10.1.3","certBag");L("1.2.840.113549.1.12.10.1.4","crlBag");L("1.2.840.113549.1.12.10.1.5","secretBag");L("1.2.840.113549.1.12.10.1.6","safeContentsBag");L("1.2.840.113549.1.5.13","pkcs5PBES2");L("1.2.840.113549.1.5.12","pkcs5PBKDF2");L("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");L("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");L("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");L("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");L("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");L("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");L("1.2.840.113549.2.7","hmacWithSHA1");L("1.2.840.113549.2.8","hmacWithSHA224");L("1.2.840.113549.2.9","hmacWithSHA256");L("1.2.840.113549.2.10","hmacWithSHA384");L("1.2.840.113549.2.11","hmacWithSHA512");L("1.2.840.113549.3.7","des-EDE3-CBC");L("2.16.840.1.101.3.4.1.2","aes128-CBC");L("2.16.840.1.101.3.4.1.22","aes192-CBC");L("2.16.840.1.101.3.4.1.42","aes256-CBC");L("2.5.4.3","commonName");L("2.5.4.4","surname");L("2.5.4.5","serialNumber");L("2.5.4.6","countryName");L("2.5.4.7","localityName");L("2.5.4.8","stateOrProvinceName");L("2.5.4.9","streetAddress");L("2.5.4.10","organizationName");L("2.5.4.11","organizationalUnitName");L("2.5.4.12","title");L("2.5.4.13","description");L("2.5.4.15","businessCategory");L("2.5.4.17","postalCode");L("2.5.4.42","givenName");L("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");L("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");L("2.16.840.1.113730.1.1","nsCertType");L("2.16.840.1.113730.1.13","nsComment");ge("2.5.29.1","authorityKeyIdentifier");ge("2.5.29.2","keyAttributes");ge("2.5.29.3","certificatePolicies");ge("2.5.29.4","keyUsageRestriction");ge("2.5.29.5","policyMapping");ge("2.5.29.6","subtreesConstraint");ge("2.5.29.7","subjectAltName");ge("2.5.29.8","issuerAltName");ge("2.5.29.9","subjectDirectoryAttributes");ge("2.5.29.10","basicConstraints");ge("2.5.29.11","nameConstraints");ge("2.5.29.12","policyConstraints");ge("2.5.29.13","basicConstraints");L("2.5.29.14","subjectKeyIdentifier");L("2.5.29.15","keyUsage");ge("2.5.29.16","privateKeyUsagePeriod");L("2.5.29.17","subjectAltName");L("2.5.29.18","issuerAltName");L("2.5.29.19","basicConstraints");ge("2.5.29.20","cRLNumber");ge("2.5.29.21","cRLReason");ge("2.5.29.22","expirationDate");ge("2.5.29.23","instructionCode");ge("2.5.29.24","invalidityDate");ge("2.5.29.25","cRLDistributionPoints");ge("2.5.29.26","issuingDistributionPoint");ge("2.5.29.27","deltaCRLIndicator");ge("2.5.29.28","issuingDistributionPoint");ge("2.5.29.29","certificateIssuer");ge("2.5.29.30","nameConstraints");L("2.5.29.31","cRLDistributionPoints");L("2.5.29.32","certificatePolicies");ge("2.5.29.33","policyMappings");ge("2.5.29.34","policyConstraints");L("2.5.29.35","authorityKeyIdentifier");ge("2.5.29.36","policyConstraints");L("2.5.29.37","extKeyUsage");ge("2.5.29.46","freshestCRL");ge("2.5.29.54","inhibitAnyPolicy");L("1.3.6.1.4.1.11129.2.4.2","timestampList");L("1.3.6.1.5.5.7.1.1","authorityInfoAccess");L("1.3.6.1.5.5.7.3.1","serverAuth");L("1.3.6.1.5.5.7.3.2","clientAuth");L("1.3.6.1.5.5.7.3.3","codeSigning");L("1.3.6.1.5.5.7.3.4","emailProtection");L("1.3.6.1.5.5.7.3.8","timeStamping")});var Fs=E((U6,Qd)=>{var Le=Se();$e();uo();var U=Qd.exports=Le.asn1=Le.asn1||{};U.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};U.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};U.create=function(t,e,r,i,n){if(Le.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)i[a]!==void 0&&s.push(i[a]);i=s}var o={tagClass:t,type:e,constructed:r,composed:r||Le.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=U.copy(o)),o};U.copy=function(t,e){var r;if(Le.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(U.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:U.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};U.equals=function(t,e,r){if(Le.util.isArray(t)){if(!Le.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!U.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&U.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};U.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function Ks(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var oS=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;Ks(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};U.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Le.util.createBuffer(t)),co(t,t.length(),0,e)};function co(t,e,r,i){var n;Ks(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;n=t.length();var f=oS(t,e);if(e-=n-t.length(),f!==void 0&&f>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,h,l=(s&32)==32;if(l)if(c=[],f===void 0)for(;;){if(Ks(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),c.push(co(t,e,r+1,i)),e-=n-t.length()}else for(;f>0;)n=t.length(),c.push(co(t,f,r+1,i)),e-=n-t.length(),f-=n-t.length();if(c===void 0&&a===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&(h=t.bytes(f)),c===void 0&&i.decodeBitStrings&&a===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&f>1){var d=t.read,p=e,y=0;if(o===U.Type.BITSTRING&&(Ks(t,e,1),y=t.getByte(),e--),y===0)try{n=t.length();var g={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=co(t,e,r+1,g),x=n-t.length();e-=x,o==U.Type.BITSTRING&&x++;var w=v.tagClass;x===f&&(w===U.Class.UNIVERSAL||w===U.Class.CONTEXT_SPECIFIC)&&(c=[v])}catch(B){}c===void 0&&(t.read=d,e=p)}if(c===void 0){if(f===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===U.Type.BMPSTRING)for(c="";f>0;f-=2)Ks(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var P=h===void 0?null:{bitStringContents:h};return U.create(a,o,l,c,P)}U.toDer=function(t){var e=Le.util.createBuffer(),r=t.tagClass|t.type,i=Le.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=U.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(U.toDer(t.value[s]))}else if(t.type===U.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===U.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var a=i.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(i),e};U.oidToDer=function(t){var e=t.split("."),r=Le.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,a,o=2;o<e.length;++o){i=!0,n=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,i||(a|=128),n.push(a),i=!1;while(s>0);for(var f=n.length-1;f>=0;--f)r.putByte(n[f])}return r};U.derToOid=function(t){var e;typeof t=="string"&&(t=Le.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};U.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};U.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=d*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,f),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,a,o,f)),e};U.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};U.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};U.integerToDer=function(t){var e=Le.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};U.derToInteger=function(t){typeof t=="string"&&(t=Le.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};U.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Le.util.isArray(e.value))for(var s=0,a=0;n&&a<e.value.length;++a)n=e.value[a].optional||!1,t.value[s]&&(n=U.validate(t.value[s],e.value[a],r,i),n?++s:e.value[a].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var $d=/[^\\u0000-\\u00ff]/;U.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case U.Class.UNIVERSAL:i+="Universal:";break;case U.Class.APPLICATION:i+="Application:";break;case U.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case U.Class.PRIVATE:i+="Private:";break}if(t.tagClass===U.Class.UNIVERSAL)switch(i+=t.type,t.type){case U.Type.NONE:i+=" (None)";break;case U.Type.BOOLEAN:i+=" (Boolean)";break;case U.Type.INTEGER:i+=" (Integer)";break;case U.Type.BITSTRING:i+=" (Bit string)";break;case U.Type.OCTETSTRING:i+=" (Octet string)";break;case U.Type.NULL:i+=" (Null)";break;case U.Type.OID:i+=" (Object Identifier)";break;case U.Type.ODESC:i+=" (Object Descriptor)";break;case U.Type.EXTERNAL:i+=" (External or Instance of)";break;case U.Type.REAL:i+=" (Real)";break;case U.Type.ENUMERATED:i+=" (Enumerated)";break;case U.Type.EMBEDDED:i+=" (Embedded PDV)";break;case U.Type.UTF8:i+=" (UTF8)";break;case U.Type.ROID:i+=" (Relative Object Identifier)";break;case U.Type.SEQUENCE:i+=" (Sequence)";break;case U.Type.SET:i+=" (Set)";break;case U.Type.PRINTABLESTRING:i+=" (Printable String)";break;case U.Type.IA5String:i+=" (IA5String (ASCII))";break;case U.Type.UTCTIME:i+=" (UTC time)";break;case U.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case U.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=U.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));i+=n+"Sub values: "+a+o}else{if(i+=n+"Value: ",t.type===U.Type.OID){var f=U.derToOid(t.value);i+=f,Le.pki&&Le.pki.oids&&f in Le.pki.oids&&(i+=" ("+Le.pki.oids[f]+") ")}if(t.type===U.Type.INTEGER)try{i+=U.derToInteger(t.value)}catch(c){i+="0x"+Le.util.bytesToHex(t.value)}else if(t.type===U.Type.BITSTRING){if(t.value.length>1?i+="0x"+Le.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===U.Type.OCTETSTRING?($d.test(t.value)||(i+="("+t.value+") "),i+="0x"+Le.util.bytesToHex(t.value)):t.type===U.Type.UTF8?i+=Le.util.decodeUtf8(t.value):t.type===U.Type.PRINTABLESTRING||t.type===U.Type.IA5String?i+=t.value:$d.test(t.value)?i+="0x"+Le.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var Yu=E((q6,Zd)=>{var it=Se();$e();Zd.exports=it.cipher=it.cipher||{};it.cipher.algorithms=it.cipher.algorithms||{};it.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=it.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new it.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};it.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=it.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new it.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};it.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),it.cipher.algorithms[t]=e};it.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in it.cipher.algorithms?it.cipher.algorithms[t]:null};var Wu=it.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Wu.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=it.util.createBuffer(),this.output=t.output||it.util.createBuffer(),this.mode.start(e)};Wu.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Wu.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Qu=E((V6,Xd)=>{var nt=Se();$e();nt.cipher=nt.cipher||{};var re=Xd.exports=nt.cipher.modes=nt.cipher.modes||{};re.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};re.ecb.prototype.start=function(t){};re.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};re.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};re.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};re.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};re.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};re.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=fo(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};re.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};re.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};re.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};re.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};re.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=nt.util.createBuffer(),this._partialBytes=0};re.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=nt.util.createBuffer(),this._partialBytes=0};re.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.ofb.prototype.decrypt=re.ofb.prototype.encrypt;re.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=nt.util.createBuffer(),this._partialBytes=0};re.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}ho(this._inBlock)};re.ctr.prototype.decrypt=re.ctr.prototype.encrypt;re.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=nt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};re.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=nt.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=nt.util.createBuffer(t.additionalData):r=nt.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=nt.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat($u(i*8)))}this._inBlock=this._j0.slice(0),ho(this._inBlock),this._partialBytes=0,r=nt.util.createBuffer(r),this._aDataLength=$u(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};re.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),ho(this._inBlock)};re.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),ho(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};re.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=nt.util.createBuffer();var i=this._aDataLength.concat($u(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};re.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};re.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};re.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};re.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};re.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),a=0;a<n;++a){var o=[0,0,0,0],f=a/i|0,u=(i-1-a%i)*e;o[f]=1<<e-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};re.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var a=1;a<s;++a){var o=n[s],f=n[a];n[s+a]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function fo(t,e){if(typeof t=="string"&&(t=nt.util.createBuffer(t)),nt.util.isArray(t)&&t.length>4){var r=t;t=nt.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!nt.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function ho(t){t[t.length-1]=t[t.length-1]+1&4294967295}function $u(t){return[t/4294967296|0,t&4294967295]}});var ec=E((G6,ry)=>{var De=Se();Yu();Qu();$e();ry.exports=De.aes=De.aes||{};De.aes.startEncrypting=function(t,e,r,i){var n=lo({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};De.aes.createEncryptionCipher=function(t,e){return lo({key:t,output:null,decrypt:!1,mode:e})};De.aes.startDecrypting=function(t,e,r,i){var n=lo({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};De.aes.createDecryptionCipher=function(t,e){return lo({key:t,output:null,decrypt:!0,mode:e})};De.aes.Algorithm=function(t,e){Zu||ey();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return Ju(r._w,i,n,!1)},decrypt:function(i,n){return Ju(r._w,i,n,!0)}}}),r._init=!1};De.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=De.util.createBuffer(e);else if(De.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=De.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!De.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!De.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=ty(e,t.decrypt&&!a),this._init=!0}};De.aes._expandKey=function(t,e){return Zu||ey(),ty(t,e)};De.aes._updateBlock=Ju;Zn("AES-ECB",De.cipher.modes.ecb);Zn("AES-CBC",De.cipher.modes.cbc);Zn("AES-CFB",De.cipher.modes.cfb);Zn("AES-OFB",De.cipher.modes.ofb);Zn("AES-CTR",De.cipher.modes.ctr);Zn("AES-GCM",De.cipher.modes.gcm);function Zn(t,e){var r=function(){return new De.aes.Algorithm(t,e)};De.cipher.registerAlgorithm(t,r)}var Zu=!1,Xn=4,_t,Xu,Jd,on,rr;function ey(){Zu=!0,Jd=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;_t=new Array(256),Xu=new Array(256),on=new Array(4),rr=new Array(4);for(var e=0;e<4;++e)on[e]=new Array(256),rr[e]=new Array(256);for(var r=0,i=0,n,s,a,o,f,u,c,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,_t[r]=o,Xu[o]=r,f=t[o],n=t[r],s=t[n],a=t[s],u=f<<24^o<<16^o<<8^(o^f),c=(n^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^n^a);for(var h=0;h<4;++h)on[h][r]=u,rr[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=i=1:(r=n^t[t[t[n^a]]],i^=t[t[i]])}}function ty(t,e){for(var r=t.slice(0),i,n=1,s=r.length,a=s+6+1,o=Xn*a,f=s;f<o;++f)i=r[f-1],f%s==0?(i=_t[i>>>16&255]<<24^_t[i>>>8&255]<<16^_t[i&255]<<8^_t[i>>>24]^Jd[n]<<24,n++):s>6&&f%s==4&&(i=_t[i>>>24]<<24^_t[i>>>16&255]<<16^_t[i>>>8&255]<<8^_t[i&255]),r[f]=r[f-s]^i;if(e){var u,c=rr[0],h=rr[1],l=rr[2],d=rr[3],p=r.slice(0);o=r.length;for(var f=0,y=o-Xn;f<o;f+=Xn,y-=Xn)if(f===0||f===o-Xn)p[f]=r[y],p[f+1]=r[y+3],p[f+2]=r[y+2],p[f+3]=r[y+1];else for(var g=0;g<Xn;++g)u=r[y+g],p[f+(3&-g)]=c[_t[u>>>24]]^h[_t[u>>>16&255]]^l[_t[u>>>8&255]]^d[_t[u&255]];r=p}return r}function Ju(t,e,r,i){var n=t.length/4-1,s,a,o,f,u;i?(s=rr[0],a=rr[1],o=rr[2],f=rr[3],u=Xu):(s=on[0],a=on[1],o=on[2],f=on[3],u=_t);var c,h,l,d,p,y,g;c=e[0]^t[0],h=e[i?3:1]^t[1],l=e[2]^t[2],d=e[i?1:3]^t[3];for(var v=3,x=1;x<n;++x)p=s[c>>>24]^a[h>>>16&255]^o[l>>>8&255]^f[d&255]^t[++v],y=s[h>>>24]^a[l>>>16&255]^o[d>>>8&255]^f[c&255]^t[++v],g=s[l>>>24]^a[d>>>16&255]^o[c>>>8&255]^f[h&255]^t[++v],d=s[d>>>24]^a[c>>>16&255]^o[h>>>8&255]^f[l&255]^t[++v],c=p,h=y,l=g;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[i?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[c&255]^t[++v],r[2]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^t[++v],r[i?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^t[++v]}function lo(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=De.cipher.createDecipher(r,t.key):i=De.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof De.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var sy=E((H6,ny)=>{var Me=Se();Yu();Qu();$e();ny.exports=Me.des=Me.des||{};Me.des.startEncrypting=function(t,e,r,i){var n=po({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Me.des.createEncryptionCipher=function(t,e){return po({key:t,output:null,decrypt:!1,mode:e})};Me.des.startDecrypting=function(t,e,r,i){var n=po({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Me.des.createDecryptionCipher=function(t,e){return po({key:t,output:null,decrypt:!0,mode:e})};Me.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return iy(r._keys,i,n,!1)},decrypt:function(i,n){return iy(r._keys,i,n,!0)}}}),r._init=!1};Me.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Me.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=gS(e),this._init=!0}};mr("DES-ECB",Me.cipher.modes.ecb);mr("DES-CBC",Me.cipher.modes.cbc);mr("DES-CFB",Me.cipher.modes.cfb);mr("DES-OFB",Me.cipher.modes.ofb);mr("DES-CTR",Me.cipher.modes.ctr);mr("3DES-ECB",Me.cipher.modes.ecb);mr("3DES-CBC",Me.cipher.modes.cbc);mr("3DES-CFB",Me.cipher.modes.cfb);mr("3DES-OFB",Me.cipher.modes.ofb);mr("3DES-CTR",Me.cipher.modes.ctr);function mr(t,e){var r=function(){return new Me.des.Algorithm(t,e)};Me.cipher.registerAlgorithm(t,r)}var uS=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],cS=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],fS=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],hS=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],lS=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],pS=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],dS=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],yS=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function gS(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,w,P=0;P<y;P++){var B=t.getInt32(),S=t.getInt32();w=(B>>>4^S)&252645135,S^=w,B^=w<<4,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>2^S)&858993459,S^=w,B^=w<<2,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=(S>>>8^B)&16711935,B^=w,S^=w<<8,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=B<<8|S>>>20&240,B=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=w;for(var F=0;F<v.length;++F){v[F]?(B=B<<2|B>>>26,S=S<<2|S>>>26):(B=B<<1|B>>>27,S=S<<1|S>>>27),B&=-15,S&=-15;var z=e[B>>>28]|r[B>>>24&15]|i[B>>>20&15]|n[B>>>16&15]|s[B>>>12&15]|a[B>>>8&15]|o[B>>>4&15],ee=f[S>>>28]|u[S>>>24&15]|c[S>>>20&15]|h[S>>>16&15]|l[S>>>12&15]|d[S>>>8&15]|p[S>>>4&15];w=(ee>>>16^z)&65535,g[x++]=z^w,g[x++]=ee^w<<16}}return g}function iy(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],f=e[1];a=(o>>>4^f)&252645135,f^=a,o^=a<<4,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<n;u+=3){for(var c=s[u+1],h=s[u+2],l=s[u];l!=c;l+=h){var d=f^t[l],p=(f>>>4|f<<28)^t[l+1];a=o,o=f,f=a^(cS[d>>>24&63]|hS[d>>>16&63]|pS[d>>>8&63]|yS[d&63]|uS[p>>>24&63]|fS[p>>>16&63]|lS[p>>>8&63]|dS[p&63])}a=o,o=f,f=a}o=o>>>1|o<<31,f=f>>>1|f<<31,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(o>>>4^f)&252645135,f^=a,o^=a<<4,r[0]=o,r[1]=f}function po(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Me.cipher.createDecipher(r,t.key):i=Me.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Me.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var un=E((z6,ay)=>{var yo=Se();ay.exports=yo.md=yo.md||{};yo.md.algorithms=yo.md.algorithms||{}});var uy=E((j6,oy)=>{var Wr=Se();un();$e();var vS=oy.exports=Wr.hmac=Wr.hmac||{};vS.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Wr.md.algorithms)e=Wr.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=Wr.util.createBuffer(a);else if(Wr.util.isArray(a)){var o=a;a=Wr.util.createBuffer();for(var f=0;f<o.length;++f)a.putByte(o[f])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=Wr.util.createBuffer(),i=Wr.util.createBuffer(),u=a.length();for(var f=0;f<u;++f){var o=a.at(f);r.putByte(54^o),i.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var Yr=E(()=>{});var fy=E(($6,cy)=>{var It=Se();uy();un();$e();var xS=It.pkcs5=It.pkcs5||{},$r;It.util.isNodejs&&!It.options.usePureJavaScript&&($r=Yr());cy.exports=It.pbkdf2=xS.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),It.util.isNodejs&&!It.options.usePureJavaScript&&$r.pbkdf2&&(n===null||typeof n!="object")&&($r.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?$r.pbkdf2Sync.length===4?$r.pbkdf2(t,e,r,i,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):$r.pbkdf2(t,e,r,i,n,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):$r.pbkdf2Sync.length===4?$r.pbkdf2Sync(t,e,r,i).toString("binary"):$r.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in It.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=It.md[n].create()}var a=n.digestLength;if(i>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var f=Math.ceil(i/a),u=i-(f-1)*a,c=It.hmac.create();c.start(n,t);var h="",l,d,p;if(!s){for(var y=1;y<=f;++y){c.start(null,null),c.update(e),c.update(It.util.int32ToBytes(y)),l=p=c.digest().getBytes();for(var g=2;g<=r;++g)c.start(null,null),c.update(p),d=c.digest().getBytes(),l=It.util.xorBytes(l,d,a),p=d;h+=y<f?l:l.substr(0,u)}return h}var y=1,g;function v(){if(y>f)return s(null,h);c.start(null,null),c.update(e),c.update(It.util.int32ToBytes(y)),l=p=c.digest().getBytes(),g=2,x()}function x(){if(g<=r)return c.start(null,null),c.update(p),d=c.digest().getBytes(),l=It.util.xorBytes(l,d,a),p=d,++g,It.util.setImmediate(x);h+=y<f?l:l.substr(0,u),++y,v()}v()}});var py=E((Q6,ly)=>{var go=Se();$e();var hy=ly.exports=go.pem=go.pem||{};hy.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=vo(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=vo(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=vo(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=vo(t.headers[n]);return t.procType&&(r+=`\r
`),r+=go.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};hy.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:go.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var f=s[2].split(n),u=0;s&&u<f.length;){for(var c=f[u].replace(/\s+$/,""),h=u+1;h<f.length;++h){var l=f[h];if(!/\s/.test(l[0]))break;c+=l,u=h}if(s=c.match(i),s){for(var d={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)d.values.push(bS(p[y]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function vo(t){for(var e=t.name+": ",r=[],i=function(f,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,a=-1,n=0;n<e.length;++n,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=n-a-1,a=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(a=n);return e}function bS(t){return t.replace(/^\s+/,"")}});var by=E((Z6,xy)=>{var Er=Se();un();$e();var dy=xy.exports=Er.sha256=Er.sha256||{};Er.md.sha256=Er.md.algorithms.sha256=dy;dy.create=function(){yy||mS();var t=null,e=Er.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Er.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Er.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),vy(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Er.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(tc.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};vy(h,r,n);var l=Er.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},i};var tc=null,yy=!1,gy=null;function mS(){tc=String.fromCharCode(128),tc+=Er.util.fillString(String.fromCharCode(0),64),gy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],yy=!0}function vy(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x=r.length();x>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=g^p&(y^g),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),i=v+a+o+gy[u]+e[u],n=s+f,v=g,g=y,y=p,p=d+i>>>0,d=l,l=h,h=c,c=i+n>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,x-=64}}});var Ey=E((X6,my)=>{var wr=Se();$e();var xo=null;wr.util.isNodejs&&!wr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(xo=Yr());var ES=my.exports=wr.prng=wr.prng||{};ES.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=wr.util.createBuffer();e.key=null,g();function g(v){if(v)return c(v);if(y.length()>=u)return c(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return wr.util.nextTick(function(){s(g)});var x=h(e.key,e.seed);e.generated+=x.length,y.putBytes(x),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),wr.util.setImmediate(g)}},e.generateSync=function(u){var c=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=wr.util.createBuffer();p.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=c(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(c(e.key,h(e.seed))),e.seed=d(c(e.key,e.seed))}return p.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(h,l){if(h)return u(h);e.collect(l),o(),u()})}function a(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,h=0;h<32;++h)e.reseeds%c==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var l=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function f(u){var c=null,h=wr.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(B){return l.getRandomValues(B)});var d=wr.util.createBuffer();if(c)for(;d.length()<u;){var p=Math.max(1,Math.min(u-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{c(y);for(var g=0;g<y.length;++g)d.putInt32(y[g])}catch(B){if(!(typeof QuotaExceededError!="undefined"&&B instanceof QuotaExceededError))throw B}}if(d.length()<u)for(var v,x,w,P=Math.floor(Math.random()*65536);d.length()<u;){x=16807*(P&65535),v=16807*(P>>16),x+=(v&32767)<<16,x+=v>>15,x=(x&2147483647)+(x>>31),P=x&4294967295;for(var g=0;g<3;++g)w=P>>>(g<<3),w^=Math.floor(Math.random()*256),d.putByte(w&255)}return d.getBytes(u)}return xo?(e.seedFile=function(u,c){xo.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},e.seedFileSync=function(u){return xo.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,h=0;h<c;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){u.postMessage({forge:{prng:{err:d,bytes:p}}})})};u.addEventListener("message",c)}},e}});var Us=E((J6,rc)=>{var st=Se();ec();by();Ey();$e();(function(){if(st.random&&st.random.getBytes){rc.exports=st.random;return}(function(t){var e={},r=new Array(4),i=st.util.createBuffer();e.formatKey=function(h){var l=st.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),st.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=st.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return st.aes._updateBlock(h,l,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=st.md.sha256;function n(){var h=st.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=n(),a=null,o=st.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(a=function(h){return f.getRandomValues(h)}),st.options.usePureJavaScript||!st.util.isNodejs&&!a){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}s.collect(u),u=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!st.random)st.random=s;else for(var c in s)st.random[c]=s[c];st.random.createInstance=n,rc.exports=st.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Iy=E((e5,_y)=>{var Dt=Se();$e();var ic=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],wy=[1,2,3,5],wS=function(t,e){return t<<e&65535|(t&65535)>>16-e},SS=function(t,e){return(t&65535)>>e|t<<16-e&65535};_y.exports=Dt.rc2=Dt.rc2||{};Dt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Dt.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),a=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(ic[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-s,ic[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,ic[r.at(o+1)^r.at(o+s)]);return r};var Sy=function(t,e,r){var i=!1,n=null,s=null,a=null,o,f,u,c,h=[];for(t=Dt.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=wS(p[u],wy[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=SS(p[u],wy[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var y=[];for(u=0;u<4;u++){var g=n.getInt16Le();a!==null&&(r?g^=a.getInt16Le():a.putInt16Le(g)),y.push(g&65535)}c=r?0:63;for(var v=0;v<p.length;v++)for(var x=0;x<p[v][0];x++)p[v][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),s.putInt16Le(y[u])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=Dt.util.createBuffer(p)),i=!1,n=Dt.util.createBuffer(),s=y||new Dt.util.createBuffer,a=p,d.output=s},update:function(p){for(i||n.putBuffer(p);n.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,n,!r);else{var g=n.length()===8?8:8-n.length();n.fillWithByte(g,g)}if(y&&(i=!0,d.update()),!r&&(y=n.length()===0,y))if(p)y=p(8,s,!r);else{var v=s.length(),x=s.at(v-1);x>v?y=!1:s.truncate(x)}return y}},d};Dt.rc2.startEncrypting=function(t,e,r){var i=Dt.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};Dt.rc2.createEncryptionCipher=function(t,e){return Sy(t,e,!0)};Dt.rc2.startDecrypting=function(t,e,r){var i=Dt.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};Dt.rc2.createDecryptionCipher=function(t,e){return Sy(t,e,!1)}});var Eo=E((t5,ky)=>{var nc=Se();ky.exports=nc.jsbn=nc.jsbn||{};var Qr,_S=244837814094590,By=(_S&16777215)==15715070;function k(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}nc.jsbn.BigInteger=k;function fe(){return new k(null)}function IS(t,e,r,i,n,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=a&67108863}return n}function BS(t,e,r,i,n,s){for(var a=e&32767,o=e>>15;--s>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*a;f=a*f+((c&32767)<<15)+r.data[i]+(n&1073741823),n=(f>>>30)+(c>>>15)+o*u+(n>>>30),r.data[i++]=f&1073741823}return n}function Ay(t,e,r,i,n,s){for(var a=e&16383,o=e>>14;--s>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*a;f=a*f+((c&16383)<<14)+r.data[i]+n,n=(f>>28)+(c>>14)+o*u,r.data[i++]=f&268435455}return n}typeof navigator=="undefined"?(k.prototype.am=Ay,Qr=28):By&&navigator.appName=="Microsoft Internet Explorer"?(k.prototype.am=BS,Qr=30):By&&navigator.appName!="Netscape"?(k.prototype.am=IS,Qr=26):(k.prototype.am=Ay,Qr=28);k.prototype.DB=Qr;k.prototype.DM=(1<<Qr)-1;k.prototype.DV=1<<Qr;var sc=52;k.prototype.FV=Math.pow(2,sc);k.prototype.F1=sc-Qr;k.prototype.F2=2*Qr-sc;var AS="0123456789abcdefghijklmnopqrstuvwxyz",bo=new Array,Jn,Vt;Jn="0".charCodeAt(0);for(Vt=0;Vt<=9;++Vt)bo[Jn++]=Vt;Jn="a".charCodeAt(0);for(Vt=10;Vt<36;++Vt)bo[Jn++]=Vt;Jn="A".charCodeAt(0);for(Vt=10;Vt<36;++Vt)bo[Jn++]=Vt;function Cy(t){return AS.charAt(t)}function Ty(t,e){var r=bo[t.charCodeAt(e)];return r??-1}function CS(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function TS(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function _i(t){var e=fe();return e.fromInt(t),e}function RS(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=r==8?t[i]&255:Ty(t,i);if(a<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&k.ZERO.subTo(this,this)}function DS(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function PS(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(i=this.data[a]>>o)>0&&(n=!0,s=Cy(i));a>=0;)o<e?(i=(this.data[a]&(1<<o)-1)<<e-o,i|=this.data[--a]>>(o+=this.DB-e)):(i=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(s+=Cy(i));return n?s:"0"}function kS(){var t=fe();return k.ZERO.subTo(this,t),t}function NS(){return this.s<0?this.negate():this}function OS(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function mo(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function LS(){return this.t<=0?0:this.DB*(this.t-1)+mo(this.data[this.t-1]^this.s&this.DM)}function MS(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function KS(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function FS(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>i|a,a=(this.data[o]&n)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function US(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function qS(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function VS(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&k.ZERO.subTo(e,e)}function GS(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function HS(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=fe());var s=fe(),a=this.s,o=t.s,f=this.DB-mo(i.data[i.t-1]);f>0?(i.lShiftTo(f,s),n.lShiftTo(f,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,c=s.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,g=y-u,v=e??fe();for(s.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),k.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var x=r.data[--y]==c?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=s.am(0,x,r,g,0,u))<x)for(s.dlShiftTo(g,v),r.subTo(v,r);r.data[y]<--x;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),a!=o&&k.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),a<0&&k.ZERO.subTo(r,r)}}}function zS(t){var e=fe();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(k.ZERO)>0&&t.subTo(e,e),e}function cn(t){this.m=t}function jS(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function WS(t){return t}function YS(t){t.divRemTo(this.m,null,t)}function $S(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function QS(t,e){t.squareTo(e),this.reduce(e)}cn.prototype.convert=jS;cn.prototype.revert=WS;cn.prototype.reduce=YS;cn.prototype.mulTo=$S;cn.prototype.sqrTo=QS;function ZS(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function fn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function XS(t){var e=fe();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(k.ZERO)>0&&this.m.subTo(e,e),e}function JS(t){var e=fe();return t.copyTo(e),this.reduce(e),e}function e_(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function t_(t,e){t.squareTo(e),this.reduce(e)}function r_(t,e,r){t.multiplyTo(e,r),this.reduce(r)}fn.prototype.convert=XS;fn.prototype.revert=JS;fn.prototype.reduce=e_;fn.prototype.mulTo=r_;fn.prototype.sqrTo=t_;function i_(){return(this.t>0?this.data[0]&1:this.s)==0}function n_(t,e){if(t>4294967295||t<1)return k.ONE;var r=fe(),i=fe(),n=e.convert(this),s=mo(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var a=r;r=i,i=a}return e.revert(r)}function s_(t,e){var r;return t<256||e.isEven()?r=new cn(e):r=new fn(e),this.exp(t,r)}k.prototype.copyTo=CS;k.prototype.fromInt=TS;k.prototype.fromString=RS;k.prototype.clamp=DS;k.prototype.dlShiftTo=MS;k.prototype.drShiftTo=KS;k.prototype.lShiftTo=FS;k.prototype.rShiftTo=US;k.prototype.subTo=qS;k.prototype.multiplyTo=VS;k.prototype.squareTo=GS;k.prototype.divRemTo=HS;k.prototype.invDigit=ZS;k.prototype.isEven=i_;k.prototype.exp=n_;k.prototype.toString=PS;k.prototype.negate=kS;k.prototype.abs=NS;k.prototype.compareTo=OS;k.prototype.bitLength=LS;k.prototype.mod=zS;k.prototype.modPowInt=s_;k.ZERO=_i(0);k.ONE=_i(1);function a_(){var t=fe();return this.copyTo(t),t}function o_(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function u_(){return this.t==0?this.s:this.data[0]<<24>>24}function c_(){return this.t==0?this.s:this.data[0]<<16>>16}function f_(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function h_(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function l_(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=_i(r),n=fe(),s=fe(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a}function p_(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,o=0;o<t.length;++o){var f=Ty(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}a=e*a+f,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&k.ZERO.subTo(this,this)}function d_(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(k.ONE.shiftLeft(t-1),ac,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(k.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function y_(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function g_(t){return this.compareTo(t)==0}function v_(t){return this.compareTo(t)<0?this:t}function x_(t){return this.compareTo(t)>0?this:t}function b_(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function m_(t,e){return t&e}function E_(t){var e=fe();return this.bitwiseTo(t,m_,e),e}function ac(t,e){return t|e}function w_(t){var e=fe();return this.bitwiseTo(t,ac,e),e}function Ry(t,e){return t^e}function S_(t){var e=fe();return this.bitwiseTo(t,Ry,e),e}function Dy(t,e){return t&~e}function __(t){var e=fe();return this.bitwiseTo(t,Dy,e),e}function I_(){for(var t=fe(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function B_(t){var e=fe();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function A_(t){var e=fe();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function C_(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function T_(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+C_(this.data[t]);return this.s<0?this.t*this.DB:-1}function R_(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function D_(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=R_(this.data[r]^e);return t}function P_(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function k_(t,e){var r=k.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function N_(t){return this.changeBit(t,ac)}function O_(t){return this.changeBit(t,Dy)}function L_(t){return this.changeBit(t,Ry)}function M_(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function K_(t){var e=fe();return this.addTo(t,e),e}function F_(t){var e=fe();return this.subTo(t,e),e}function U_(t){var e=fe();return this.multiplyTo(t,e),e}function q_(t){var e=fe();return this.divRemTo(t,e,null),e}function V_(t){var e=fe();return this.divRemTo(t,null,e),e}function G_(t){var e=fe(),r=fe();return this.divRemTo(t,e,r),new Array(e,r)}function H_(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function z_(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function qs(){}function Py(t){return t}function j_(t,e,r){t.multiplyTo(e,r)}function W_(t,e){t.squareTo(e)}qs.prototype.convert=Py;qs.prototype.revert=Py;qs.prototype.mulTo=j_;qs.prototype.sqrTo=W_;function Y_(t){return this.exp(t,new qs)}function $_(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function Q_(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function es(t){this.r2=fe(),this.q3=fe(),k.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Z_(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fe();return t.copyTo(e),this.reduce(e),e}function X_(t){return t}function J_(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function e8(t,e){t.squareTo(e),this.reduce(e)}function t8(t,e,r){t.multiplyTo(e,r),this.reduce(r)}es.prototype.convert=Z_;es.prototype.revert=X_;es.prototype.reduce=J_;es.prototype.mulTo=t8;es.prototype.sqrTo=e8;function r8(t,e){var r=t.bitLength(),i,n=_i(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new cn(e):e.isEven()?s=new es(e):s=new fn(e);var a=new Array,o=3,f=i-1,u=(1<<i)-1;if(a[1]=s.convert(this),i>1){var c=fe();for(s.sqrTo(a[1],c);o<=u;)a[o]=fe(),s.mulTo(c,a[o-2],a[o]),o+=2}var h=t.t-1,l,d=!0,p=fe(),y;for(r=mo(t.data[h])-1;h>=0;){for(r>=f?l=t.data[h]>>r-f&u:(l=(t.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=t.data[h-1]>>this.DB+r-f)),o=i;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),d)a[l].copyTo(n),d=!1;else{for(;o>1;)s.sqrTo(n,p),s.sqrTo(p,n),o-=2;o>0?s.sqrTo(n,p):(y=n,n=p,p=y),s.mulTo(p,a[l],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,p),y=n,n=p,p=y,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function i8(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function n8(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function s8(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return k.ZERO;for(var r=t.clone(),i=this.clone(),n=_i(1),s=_i(0),a=_i(0),o=_i(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(a,n),s.subTo(o,s)):(i.subTo(r,i),e&&a.subTo(n,a),o.subTo(s,o))}if(i.compareTo(k.ONE)!=0)return k.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var ir=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],a8=(1<<26)/ir[ir.length-1];function o8(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=ir[ir.length-1]){for(e=0;e<ir.length;++e)if(r.data[0]==ir[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<ir.length;){for(var i=ir[e],n=e+1;n<ir.length&&i<a8;)i*=ir[n++];for(i=r.modInt(i);e<n;)if(i%ir[e++]==0)return!1}return r.millerRabin(t)}function u8(t){var e=this.subtract(k.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=c8(),s,a=0;a<t;++a){do s=new k(this.bitLength(),n);while(s.compareTo(k.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(i,this);if(o.compareTo(k.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(k.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function c8(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}k.prototype.chunkSize=f_;k.prototype.toRadix=l_;k.prototype.fromRadix=p_;k.prototype.fromNumber=d_;k.prototype.bitwiseTo=b_;k.prototype.changeBit=k_;k.prototype.addTo=M_;k.prototype.dMultiply=H_;k.prototype.dAddOffset=z_;k.prototype.multiplyLowerTo=$_;k.prototype.multiplyUpperTo=Q_;k.prototype.modInt=n8;k.prototype.millerRabin=u8;k.prototype.clone=a_;k.prototype.intValue=o_;k.prototype.byteValue=u_;k.prototype.shortValue=c_;k.prototype.signum=h_;k.prototype.toByteArray=y_;k.prototype.equals=g_;k.prototype.min=v_;k.prototype.max=x_;k.prototype.and=E_;k.prototype.or=w_;k.prototype.xor=S_;k.prototype.andNot=__;k.prototype.not=I_;k.prototype.shiftLeft=B_;k.prototype.shiftRight=A_;k.prototype.getLowestSetBit=T_;k.prototype.bitCount=D_;k.prototype.testBit=P_;k.prototype.setBit=N_;k.prototype.clearBit=O_;k.prototype.flipBit=L_;k.prototype.add=K_;k.prototype.subtract=F_;k.prototype.multiply=U_;k.prototype.divide=q_;k.prototype.remainder=V_;k.prototype.divideAndRemainder=G_;k.prototype.modPow=r8;k.prototype.modInverse=s8;k.prototype.pow=Y_;k.prototype.gcd=i8;k.prototype.isProbablePrime=o8});var Ky=E((r5,My)=>{var Sr=Se();un();$e();var Ny=My.exports=Sr.sha1=Sr.sha1||{};Sr.md.sha1=Sr.md.algorithms.sha1=Ny;Ny.create=function(){Oy||f8();var t=null,e=Sr.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Sr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Sr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Ly(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Sr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(oc.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Ly(h,r,n);var l=Sr.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},i};var oc=null,Oy=!1;function f8(){oc=String.fromCharCode(128),oc+=Sr.util.fillString(String.fromCharCode(0),64),Oy=!0}function Ly(t,e,r){for(var i,n,s,a,o,f,u,c,h=r.length();h>=64;){for(n=t.h0,s=t.h1,a=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<20;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<32;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<40;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<60;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s&a|o&(s^a),i=(n<<5|n>>>27)+u+f+2400959708+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<80;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+3395469782+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,h-=64}}});var qy=E((i5,Uy)=>{var _r=Se();$e();Us();Ky();var Fy=Uy.exports=_r.pkcs1=_r.pkcs1||{};Fy.encode_rsa_oaep=function(t,e,r){var i,n,s,a;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=_r.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),f=o-2*s.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}i||(i=""),s.update(i,"raw");for(var c=s.digest(),h="",l=f-e.length,d=0;d<l;d++)h+="\0";var p=c.getBytes()+h+""+e;if(!n)n=_r.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var y=wo(n,o-s.digestLength-1,a),g=_r.util.xorBytes(p,y,p.length),v=wo(g,s.digestLength,a),x=_r.util.xorBytes(n,v,n.length);return"\0"+x+g};Fy.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=a,g}if(n===void 0?n=_r.md.sha1.create():n.start(),s||(s=n),a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),f=e.charAt(0),u=e.substring(1,n.digestLength+1),c=e.substring(1+n.digestLength),h=wo(c,n.digestLength,s),l=_r.util.xorBytes(u,h,u.length),d=wo(l,a-n.digestLength-1,s),p=_r.util.xorBytes(c,d,c.length),y=p.substring(0,n.digestLength),g=f!=="\0",v=0;v<n.digestLength;++v)g|=o.charAt(v)!==y.charAt(v);for(var x=1,w=n.digestLength,P=n.digestLength;P<p.length;P++){var B=p.charCodeAt(P),S=B&1^1,F=x?65534:0;g|=B&F,x=x&S,w+=x}if(g||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function wo(t,e,r){r||(r=_r.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}});var Vy=E((n5,uc)=>{var Ii=Se();$e();Eo();Us();(function(){if(Ii.prime){uc.exports=Ii.prime;return}var t=uc.exports=Ii.prime=Ii.prime||{},e=Ii.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Ii.random,g={nextBytes:function(v){for(var x=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=x.charCodeAt(w)}};if(p.name==="PRIMEINC")return s(h,g,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?f(h,l,d,p):a(h,l,d,p)}function a(h,l,d,p){var y=u(h,l),g=0,v=c(y.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var x=10;"maxBlockTime"in d&&(x=d.maxBlockTime),o(y,h,l,g,v,x,p)}function o(h,l,d,p,y,g,v){var x=+new Date;do{if(h.bitLength()>l&&(h=u(l,d)),h.isProbablePrime(y))return v(null,h);h.dAddOffset(r[p++%8],0)}while(g<0||+new Date-x<g);Ii.util.setImmediate(function(){o(h,l,d,p,y,g,v)})}function f(h,l,d,p){if(typeof Worker=="undefined")return a(h,l,d,p);var y=u(h,l),g=d.workers,v=d.workLoad||100,x=v*30/8,w=d.workerScript||"forge/prime.worker.js";if(g===-1)return Ii.util.estimateCores(function(B,S){B&&(S=2),g=S-1,P()});P();function P(){g=Math.max(1,g);for(var B=[],S=0;S<g;++S)B[S]=new Worker(w);for(var F=g,S=0;S<g;++S)B[S].addEventListener("message",ee);var z=!1;function ee(Te){if(!z){--F;var ye=Te.data;if(ye.found){for(var pe=0;pe<B.length;++pe)B[pe].terminate();return z=!0,p(null,new e(ye.prime,16))}y.bitLength()>h&&(y=u(h,l));var Nt=y.toString(16);Te.target.postMessage({hex:Nt,workLoad:v}),y.dAddOffset(x,0)}}}}function u(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),n,d),d.dAddOffset(31-d.mod(i).byteValue(),0),d}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var _o=E((s5,$y)=>{var W=Se();Fs();Eo();uo();qy();Vy();Us();$e();typeof ae=="undefined"&&(ae=W.jsbn.BigInteger);var ae,cc=W.util.isNodejs?Yr():null,_=W.asn1,Gt=W.util;W.pki=W.pki||{};$y.exports=W.pki.rsa=W.rsa=W.rsa||{};var Y=W.pki,h8=[6,4,2,4,2,4,6,2],l8={name:"PrivateKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p8={name:"RSAPrivateKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d8={name:"RSAPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y8=W.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},g8=function(t){var e;if(t.algorithm in Y.oids)e=Y.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=_.oidToDer(e).getBytes(),n=_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[]),s=_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[]);s.value.push(_.create(_.Class.UNIVERSAL,_.Type.OID,!1,i)),s.value.push(_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,""));var a=_.create(_.Class.UNIVERSAL,_.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),_.toDer(n).getBytes()},Gy=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ae.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ae.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new ae(W.util.bytesToHex(W.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(ae.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var a=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(i.modInverse(e.n)).mod(e.n),a};Y.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=Hy(t,e,r)):(n=W.util.createBuffer(),n.putBytes(t));for(var a=new ae(n.toHex(),16),o=Gy(a,e,i),f=o.toString(16),u=W.util.createBuffer(),c=s-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(f)),u.getBytes()};Y.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var a=new ae(W.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Gy(a,e,r),f=o.toString(16),u=W.util.createBuffer(),c=n-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(f)),i!==!1?So(u.getBytes(),e,r):u.getBytes()};Y.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||W.random,n={nextBytes:function(o){for(var f=i.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new ae(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Y.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ae(null);r.fromInt(30);for(var i=0,n=function(h,l){return h|l},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new ae(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ae.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(x8(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(h8[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ae.ONE),t.q1=t.q.subtract(ae.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ae.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:Y.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Y.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};Y.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!W.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(zy("generateKeyPair"))return cc.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return i(o);i(null,{privateKey:Y.privateKeyFromPem(u),publicKey:Y.publicKeyFromPem(f)})});if(jy("generateKey")&&jy("exportKey"))return Gt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Yy(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Gt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var f=Y.privateKeyFromAsn1(_.fromDer(W.util.createBuffer(o)));i(null,{privateKey:f,publicKey:Y.setRsaPublicKey(f.n,f.e)})}});if(Wy("generateKey")&&Wy("exportKey")){var n=Gt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Yy(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var f=o.target.result,u=Gt.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=Y.privateKeyFromAsn1(_.fromDer(W.util.createBuffer(h)));i(null,{privateKey:l,publicKey:Y.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){i(c)}},n.onerror=function(o){i(o)};return}}else if(zy("generateKeyPairSync")){var s=cc.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Y.privateKeyFromPem(s.privateKey),publicKey:Y.publicKeyFromPem(s.publicKey)}}}var a=Y.rsa.createKeyPairGenerationState(t,e,r);if(!i)return Y.rsa.stepKeyPairGenerationState(a,0),a.keys;v8(a,r,i)};Y.setRsaPublicKey=Y.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,f,u){return Hy(o,f,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,f){return W.pkcs1.encode_rsa_oaep(f,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(i,r,!0);return Y.rsa.encrypt(a,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,f){f=So(f,r,!0);var u=_.fromDer(f);return o===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,f){return f=So(f,r,!0),o===f}});var a=Y.rsa.decrypt(n,r,!0,!1);return s.verify(i,a,r.n.bitLength())},r};Y.setRsaPrivateKey=Y.rsa.setPrivateKey=function(t,e,r,i,n,s,a,o){var f={n:t,e,d:r,p:i,q:n,dP:s,dQ:a,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=Y.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:So};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(d,p){return W.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:g8},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return Y.rsa.encrypt(l,f,h)},f};Y.wrapRsaPrivateKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,_.integerToDer(0).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.OID,!1,_.oidToDer(Y.oids.rsaEncryption).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,"")]),_.create(_.Class.UNIVERSAL,_.Type.OCTETSTRING,!1,_.toDer(t).getBytes())])};Y.privateKeyFromAsn1=function(t){var e={},r=[];if(_.validate(t,l8,e,r)&&(t=_.fromDer(W.util.createBuffer(e.privateKey))),e={},r=[],!_.validate(t,p8,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,a,o,f,u,c,h;return n=W.util.createBuffer(e.privateKeyModulus).toHex(),s=W.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=W.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=W.util.createBuffer(e.privateKeyPrime1).toHex(),f=W.util.createBuffer(e.privateKeyPrime2).toHex(),u=W.util.createBuffer(e.privateKeyExponent1).toHex(),c=W.util.createBuffer(e.privateKeyExponent2).toHex(),h=W.util.createBuffer(e.privateKeyCoefficient).toHex(),Y.setRsaPrivateKey(new ae(n,16),new ae(s,16),new ae(a,16),new ae(o,16),new ae(f,16),new ae(u,16),new ae(c,16),new ae(h,16))};Y.privateKeyToAsn1=Y.privateKeyToRSAPrivateKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,_.integerToDer(0).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.n)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.e)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.d)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.p)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.q)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.dP)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.dQ)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.qInv))])};Y.publicKeyFromAsn1=function(t){var e={},r=[];if(_.validate(t,y8,e,r)){var i=_.derToOid(e.publicKeyOid);if(i!==Y.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!_.validate(t,d8,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=W.util.createBuffer(e.publicKeyModulus).toHex(),a=W.util.createBuffer(e.publicKeyExponent).toHex();return Y.setRsaPublicKey(new ae(s,16),new ae(a,16))};Y.publicKeyToAsn1=Y.publicKeyToSubjectPublicKeyInfo=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.OID,!1,_.oidToDer(Y.oids.rsaEncryption).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,"")]),_.create(_.Class.UNIVERSAL,_.Type.BITSTRING,!1,[Y.publicKeyToRSAPublicKey(t)])])};Y.publicKeyToRSAPublicKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.n)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Ir(t.e))])};function Hy(t,e,r){var i=W.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var a=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<a;++f)i.putByte(o)}else for(;a>0;){for(var u=0,c=W.random.getBytes(a),f=0;f<a;++f)o=c.charCodeAt(f),o===0?++u:i.putByte(o);a=u}return i.putByte(0),i.putBytes(t),i}function So(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=W.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=n-3-i;for(var u=0;u<f;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++f}else if(o===2)for(f=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++f}var c=s.getByte();if(c!==0||f!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function v8(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,f){W.prime.generateProbablePrime(o,i,f)}function a(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)!==0){t.p=null,n();return}if(t.q.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(ae.ONE),t.q1=t.q.subtract(ae.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ae.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:Y.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Y.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ir(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=W.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function x8(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function zy(t){return W.util.isNodejs&&typeof cc[t]=="function"}function jy(t){return typeof Gt.globalScope!="undefined"&&typeof Gt.globalScope.crypto=="object"&&typeof Gt.globalScope.crypto.subtle=="object"&&typeof Gt.globalScope.crypto.subtle[t]=="function"}function Wy(t){return typeof Gt.globalScope!="undefined"&&typeof Gt.globalScope.msCrypto=="object"&&typeof Gt.globalScope.msCrypto.subtle=="object"&&typeof Gt.globalScope.msCrypto.subtle[t]=="function"}function Yy(t){for(var e=W.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var tg=E((a5,eg)=>{var V=Se();ec();Fs();sy();un();uo();fy();py();Us();Iy();_o();$e();typeof Qy=="undefined"&&(Qy=V.jsbn.BigInteger);var Qy,T=V.asn1,X=V.pki=V.pki||{};eg.exports=X.pbe=V.pbe=V.pbe||{};var hn=X.oids,b8={name:"EncryptedPrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},m8={name:"PBES2Algorithms",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},E8={name:"pkcs-12PbeParams",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"iterations"}]};X.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=V.random.getBytesSync(r.saltSize),n=r.count,s=T.integerToDer(n),a,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":a=16,u=16,c=hn["aes128-CBC"],h=V.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=hn["aes192-CBC"],h=V.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=hn["aes256-CBC"],h=V.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=hn.desCBC,h=V.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Jy(d),y=V.pkcs5.pbkdf2(e,i,n,a,p),g=V.random.getBytesSync(u),v=h(y);v.start(g),v.update(T.toDer(t)),v.finish(),f=v.output.getBytes();var x=w8(i,s,a,d);o=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(hn.pkcs5PBES2).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(hn.pkcs5PBKDF2).getBytes()),x]),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(c).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){a=24;var w=new V.util.ByteBuffer(i),y=X.pbe.generatePkcs12Key(e,w,1,n,a),g=X.pbe.generatePkcs12Key(e,w,2,n,a),v=V.des.createEncryptionCipher(y);v.start(g),v.update(T.toDer(t)),v.finish(),f=v.output.getBytes(),o=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(hn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,i),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var P=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[o,T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,f)]);return P};X.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!T.validate(t,b8,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=T.derToOid(i.encryptionOid),o=X.pbe.getCipher(a,i.encryptionParams,e),f=V.util.createBuffer(i.encryptedData);return o.update(f),o.finish()&&(r=T.fromDer(o.output)),r};X.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:T.toDer(t).getBytes()};return V.pem.encode(r,{maxline:e})};X.encryptedPrivateKeyFromPem=function(t){var e=V.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return T.fromDer(e.body)};X.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=X.wrapRsaPrivateKey(X.privateKeyToAsn1(t));return i=X.encryptPrivateKeyInfo(i,e,r),X.encryptedPrivateKeyToPem(i)}var n,s,a,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",a=16,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",a=24,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",a=32,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",a=24,s=V.random.getBytesSync(8),o=V.des.createEncryptionCipher;break;case"des":n="DES-CBC",a=8,s=V.random.getBytesSync(8),o=V.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=V.pbe.opensslDeriveBytes(e,s.substr(0,8),a),c=o(u);c.start(s),c.update(T.toDer(X.privateKeyToAsn1(t))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:V.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return V.pem.encode(h)};X.decryptRsaPrivateKey=function(t,e){var r=null,i=V.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,a;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,a=V.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=V.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=V.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=V.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=V.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(h){return V.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,a=function(h){return V.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,a=function(h){return V.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=V.util.hexToBytes(i.dekInfo.parameters),f=V.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(f);if(u.start(o),u.update(V.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=X.decryptPrivateKeyInfo(T.fromDer(r),e):r=T.fromDer(r),r!==null&&(r=X.privateKeyFromAsn1(r)),r};X.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in V.md))throw new Error('"sha1" hash algorithm unavailable.');s=V.md.sha1.create()}var f=s.digestLength,u=s.blockLength,c=new V.util.ByteBuffer,h=new V.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var l=h.length(),d=e.length(),p=new V.util.ByteBuffer;p.fillWithByte(r,u);var y=u*Math.ceil(d/u),g=new V.util.ByteBuffer;for(o=0;o<y;o++)g.putByte(e.at(o%d));var v=u*Math.ceil(l/u),x=new V.util.ByteBuffer;for(o=0;o<v;o++)x.putByte(h.at(o%l));var w=g;w.putBuffer(x);for(var P=Math.ceil(n/f),B=1;B<=P;B++){var S=new V.util.ByteBuffer;S.putBytes(p.bytes()),S.putBytes(w.bytes());for(var F=0;F<i;F++)s.start(),s.update(S.getBytes()),S=s.digest();var z=new V.util.ByteBuffer;for(o=0;o<u;o++)z.putByte(S.at(o%f));var ee=Math.ceil(d/u)+Math.ceil(l/u),Te=new V.util.ByteBuffer;for(a=0;a<ee;a++){var ye=new V.util.ByteBuffer(w.getBytes(u)),pe=511;for(o=z.length()-1;o>=0;o--)pe=pe>>8,pe+=z.at(o)+ye.at(o),ye.setAt(o,pe&255);Te.putBuffer(ye)}w=Te,c.putBuffer(S)}return c.truncate(c.length()-n),c};X.pbe.getCipher=function(t,e,r){switch(t){case X.oids.pkcs5PBES2:return X.pbe.getCipherForPBES2(t,e,r);case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case X.oids["pbewithSHAAnd40BitRC2-CBC"]:return X.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};X.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!T.validate(e,m8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=T.derToOid(i.kdfOid),t!==X.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=T.derToOid(i.encOid),t!==X.oids["aes128-CBC"]&&t!==X.oids["aes192-CBC"]&&t!==X.oids["aes256-CBC"]&&t!==X.oids["des-EDE3-CBC"]&&t!==X.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=i.kdfSalt,o=V.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(X.oids[t]){case"aes128-CBC":f=16,u=V.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=V.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=V.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=V.des.createDecryptionCipher;break;case"desCBC":f=8,u=V.des.createDecryptionCipher;break}var c=Xy(i.prfOid),h=V.pkcs5.pbkdf2(r,a,o,f,c),l=i.encIv,d=u(h);return d.start(l),d};X.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!T.validate(e,E8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=V.util.createBuffer(i.salt),o=V.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=V.des.startDecrypting;break;case X.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(y,g){var v=V.rc2.createDecryptionCipher(y,40);return v.start(g,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=Xy(i.prfOid),l=X.pbe.generatePkcs12Key(r,a,1,o,f,h);h.start();var d=X.pbe.generatePkcs12Key(r,a,2,o,u,h);return c(l,d)};X.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in V.md))throw new Error('"md5" hash algorithm unavailable.');i=V.md.md5.create()}e===null&&(e="");for(var n=[Zy(i,t+e)],s=16,a=1;s<r;++a,s+=16)n.push(Zy(i,n[a-1]+t+e));return n.join("").substr(0,r)};function Zy(t,e){return t.start().update(e).digest().getBytes()}function Xy(t){var e;if(!t)e="hmacWithSHA1";else if(e=X.oids[T.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Jy(e)}function Jy(t){var e=V.md;switch(t){case"hmacWithSHA224":e=V.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function w8(t,e,r,i){var n=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,t),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,V.util.hexToBytes(r.toString(16))),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(X.oids[i]).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])),n}});var nr={};ft(nr,{concat:()=>S8});function S8(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var sr=Ee(()=>{});var Vs=E(rg=>{"use strict";rg.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var fc=E((u5,ng)=>{"use strict";var{concat:_8}=(sr(),nr),{fromString:ig}=(lt(),ht),I8=Vs();function B8({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let a=I8.get();r*=8;async function o(u,c){let h=a.getRandomValues(new Uint8Array(n)),l=a.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},y=await a.subtle.importKey("raw",ig(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),v=await a.subtle.encrypt(d,g,u);return _8([h,d.iv,new Uint8Array(v)])}async function f(u,c){let h=u.slice(0,n),l=u.slice(n,n+e),d=u.slice(n+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},g=await a.subtle.importKey("raw",ig(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await a.subtle.deriveKey(y,g,{name:t,length:r},!0,["decrypt"]),x=await a.subtle.decrypt(p,v,d);return new Uint8Array(x)}return{encrypt:o,decrypt:f}}ng.exports={create:B8}});var ag=E((c5,sg)=>{"use strict";var{base64:A8}=(sn(),mi),C8=fc();sg.exports={import:async function(t,e){let r=A8.decode(t);return await C8.create().decrypt(r,e)}}});var ar={};ft(ar,{equals:()=>T8});function T8(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var or=Ee(()=>{});var hg=E((f5,fg)=>{var ke=Se();un();$e();var Gs=fg.exports=ke.sha512=ke.sha512||{};ke.md.sha512=ke.md.algorithms.sha512=Gs;var og=ke.sha384=ke.sha512.sha384=ke.sha512.sha384||{};og.create=function(){return Gs.create("SHA-384")};ke.md.sha384=ke.md.algorithms.sha384=og;ke.sha512.sha256=ke.sha512.sha256||{create:function(){return Gs.create("SHA-512/256")}};ke.md["sha512/256"]=ke.md.algorithms["sha512/256"]=ke.sha512.sha256;ke.sha512.sha224=ke.sha512.sha224||{create:function(){return Gs.create("SHA-512/224")}};ke.md["sha512/224"]=ke.md.algorithms["sha512/224"]=ke.sha512.sha224;Gs.create=function(t){if(ug||R8(),typeof t=="undefined"&&(t="SHA-512"),!(t in ln))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=ln[t],r=null,i=ke.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);i=ke.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=ke.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return i.putBytes(f),cg(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var f=ke.util.createBuffer();f.putBytes(i.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(hc.substr(0,o.blockLength-c));for(var h,l,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,f.putInt32(d>>>0),d=h>>>0;f.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);cg(y,n,f);var g=ke.util.createBuffer(),v;t==="SHA-512"?v=y.length:t==="SHA-384"?v=y.length-2:v=y.length-4;for(var p=0;p<v;++p)g.putInt32(y[p][0]),(p!==v-1||t!=="SHA-512/224")&&g.putInt32(y[p][1]);return g},o};var hc=null,ug=!1,lc=null,ln=null;function R8(){hc=String.fromCharCode(128),hc+=ke.util.fillString(String.fromCharCode(0),128),lc=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],ln={},ln["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],ln["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],ln["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],ln["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ug=!0}function cg(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x,w,P,B,S,F,z,ee,Te,ye,pe,Nt,Gr,Z,be,O,Gi,Hi,zi,ji,Ss=r.length();Ss>=128;){for(Z=0;Z<16;++Z)e[Z][0]=r.getInt32()>>>0,e[Z][1]=r.getInt32()>>>0;for(;Z<80;++Z)Gi=e[Z-2],be=Gi[0],O=Gi[1],i=((be>>>19|O<<13)^(O>>>29|be<<3)^be>>>6)>>>0,n=((be<<13|O>>>19)^(O<<3|be>>>29)^(be<<26|O>>>6))>>>0,zi=e[Z-15],be=zi[0],O=zi[1],s=((be>>>1|O<<31)^(be>>>8|O<<24)^be>>>7)>>>0,a=((be<<31|O>>>1)^(be<<24|O>>>8)^(be<<25|O>>>7))>>>0,Hi=e[Z-7],ji=e[Z-16],O=n+Hi[1]+a+ji[1],e[Z][0]=i+Hi[0]+s+ji[0]+(O/4294967296>>>0)>>>0,e[Z][1]=O>>>0;for(y=t[0][0],g=t[0][1],v=t[1][0],x=t[1][1],w=t[2][0],P=t[2][1],B=t[3][0],S=t[3][1],F=t[4][0],z=t[4][1],ee=t[5][0],Te=t[5][1],ye=t[6][0],pe=t[6][1],Nt=t[7][0],Gr=t[7][1],Z=0;Z<80;++Z)u=((F>>>14|z<<18)^(F>>>18|z<<14)^(z>>>9|F<<23))>>>0,c=((F<<18|z>>>14)^(F<<14|z>>>18)^(z<<23|F>>>9))>>>0,h=(ye^F&(ee^ye))>>>0,l=(pe^z&(Te^pe))>>>0,o=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,f=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,d=(y&v|w&(y^v))>>>0,p=(g&x|P&(g^x))>>>0,O=Gr+c+l+lc[Z][1]+e[Z][1],i=Nt+u+h+lc[Z][0]+e[Z][0]+(O/4294967296>>>0)>>>0,n=O>>>0,O=f+p,s=o+d+(O/4294967296>>>0)>>>0,a=O>>>0,Nt=ye,Gr=pe,ye=ee,pe=Te,ee=F,Te=z,O=S+n,F=B+i+(O/4294967296>>>0)>>>0,z=O>>>0,B=w,S=P,w=v,P=x,v=y,x=g,O=n+a,y=i+s+(O/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+y+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+x,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+P,t[2][0]=t[2][0]+w+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+S,t[3][0]=t[3][0]+B+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+z,t[4][0]=t[4][0]+F+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+Te,t[5][0]=t[5][0]+ee+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+pe,t[6][0]=t[6][0]+ye+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+Gr,t[7][0]=t[7][0]+Nt+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,Ss-=128}}});var pc=E((h5,lg)=>{"use strict";var D8=Qa(),P8=Oe();lg.exports=function(t){if(isNaN(t)||t<=0)throw P8(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return D8(t)}});var Io=E(Hs=>{"use strict";$e();Eo();var k8=Se(),{fromString:N8}=(lt(),ht),{toString:pg}=(yt(),dt),{concat:dg}=(sr(),nr);Hs.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=dg([new Uint8Array(e-r.length),r])}return pg(r,"base64url")};Hs.base64urlToBigInteger=t=>{let e=Hs.base64urlToBuffer(t);return new k8.jsbn.BigInteger(pg(e,"base16"),16)};Hs.base64urlToBuffer=(t,e)=>{let r=N8(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=dg([new Uint8Array(e-r.length),r])}return r}});var vg=E(zs=>{"use strict";Fs();_o();var Bi=Se(),{bigIntegerToUintBase64url:Br,base64urlToBigInteger:Ar}=Io(),{fromString:yg}=(lt(),ht),{toString:gg}=(yt(),dt);zs.pkcs1ToJwk=function(t){let e=Bi.asn1.fromDer(gg(t,"ascii")),r=Bi.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Br(r.n),e:Br(r.e),d:Br(r.d),p:Br(r.p),q:Br(r.q),dp:Br(r.dP),dq:Br(r.dQ),qi:Br(r.qInv),alg:"RS256",kid:"2011-04-29"}};zs.jwkToPkcs1=function(t){let e=Bi.pki.privateKeyToAsn1({n:Ar(t.n),e:Ar(t.e),d:Ar(t.d),p:Ar(t.p),q:Ar(t.q),dP:Ar(t.dp),dQ:Ar(t.dq),qInv:Ar(t.qi)});return yg(Bi.asn1.toDer(e).getBytes(),"ascii")};zs.pkixToJwk=function(t){let e=Bi.asn1.fromDer(gg(t,"ascii")),r=Bi.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Br(r.n),e:Br(r.e),alg:"RS256",kid:"2011-04-29"}};zs.jwkToPkix=function(t){let e=Bi.pki.publicKeyToAsn1({n:Ar(t.n),e:Ar(t.e)});return yg(Bi.asn1.toDer(e).getBytes(),"ascii")}});var Eg=E((d5,mg)=>{"use strict";_o();var xg=Se(),{base64urlToBigInteger:O8}=Io();function bg(t,e){return e.map(r=>O8(t[r]))}function L8(t){return xg.pki.setRsaPrivateKey(...bg(t,["n","e","d","p","q","dp","dq","qi"]))}function M8(t){return xg.pki.setRsaPublicKey(...bg(t,["n","e"]))}mg.exports={jwk2pub:M8,jwk2priv:L8}});var _g=E(Xr=>{"use strict";var Zr=Vs(),K8=pc(),{toString:F8}=(yt(),dt),{fromString:U8}=(lt(),ht);Xr.utils=vg();Xr.generateKey=async function(t){let e=await Zr.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await wg(e);return{privateKey:r[0],publicKey:r[1]}};Xr.unmarshalPrivateKey=async function(t){let r=[await Zr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await q8(t)],i=await wg({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};Xr.getRandomValues=K8;Xr.hashAndSign=async function(t,e){let r=await Zr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await Zr.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};Xr.hashAndVerify=async function(t,e,r){let i=await Zr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Zr.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function wg(t){return Promise.all([Zr.get().subtle.exportKey("jwk",t.privateKey),Zr.get().subtle.exportKey("jwk",t.publicKey)])}function q8(t){return Zr.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:V8,jwk2priv:G8}=Eg();function Sg(t,e,r,i){let n=e?V8(t):G8(t),s=F8(Uint8Array.from(r),"ascii"),a=i(s,n);return U8(a,"ascii")}Xr.encrypt=function(t,e){return Sg(t,!0,e,(r,i)=>i.encrypt(r))};Xr.decrypt=function(t,e){return Sg(t,!1,e,(r,i)=>i.decrypt(r))}});var Bo=E((g5,Ig)=>{"use strict";var{base64:H8}=(sn(),mi),z8=fc();Ig.exports={export:async function(t,e){let i=await z8.create().encrypt(t,e);return H8.encode(i)}}});var Rg=E((v5,Tg)=>{"use strict";var{sha256:Bg}=(tr(),Ut),Ag=Oe(),{equals:Cg}=(or(),ar),{toString:j8}=(yt(),dt);hg();var Ao=Se(),Ht=_g(),Co=ao(),W8=Bo(),To=class{constructor(e){this._key=e}async verify(e,r){return Ht.hashAndVerify(this._key,r,e)}marshal(){return Ht.utils.jwkToPkix(this._key)}get bytes(){return Co.PublicKey.encode({Type:Co.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Ht.encrypt(this._key,e)}equals(e){return Cg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Bg.digest(this.bytes);return e}},js=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Ht.getRandomValues(16)}async sign(e){return Ht.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw Ag(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new To(this._publicKey)}decrypt(e){return Ht.decrypt(this._key,e)}marshal(){return Ht.utils.jwkToPkcs1(this._key)}get bytes(){return Co.PrivateKey.encode({Type:Co.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Cg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Bg.digest(this.bytes);return e}async id(){let e=await this.public.hash();return j8(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new Ao.util.ByteBuffer(this.marshal()),n=Ao.asn1.fromDer(i),s=Ao.pki.privateKeyFromAsn1(n),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Ao.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return W8.export(this.bytes,e);throw Ag(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function Y8(t){let e=Ht.utils.pkcs1ToJwk(t),r=await Ht.unmarshalPrivateKey(e);return new js(r.privateKey,r.publicKey)}function $8(t){let e=Ht.utils.pkixToJwk(t);return new To(e)}async function Q8(t){let e=await Ht.unmarshalPrivateKey(t);return new js(e.privateKey,e.publicKey)}async function Z8(t){let e=await Ht.generateKey(t);return new js(e.privateKey,e.publicKey)}Tg.exports={RsaPublicKey:To,RsaPrivateKey:js,unmarshalRsaPublicKey:$8,unmarshalRsaPrivateKey:Y8,generateKeyPair:Z8,fromJwk:Q8}});var mc=E(me=>{"use strict";var X8=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});me.utils=me.curve25519=me.getSharedSecret=me.verify=me.sign=me.getPublicKey=me.Signature=me.Point=me.ExtendedPoint=me.CURVE=void 0;var J8=X8(Yr()),We=BigInt(0),ne=BigInt(1),vt=BigInt(2),Dg=BigInt(255),Ve={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:vt**Dg-BigInt(19),n:vt**BigInt(252)+BigInt("27742317777372353535851937790883648493"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};me.CURVE=Ve;var Ws=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),x5=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),e4=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),t4=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),r4=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),i4=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Ie=class{constructor(e,r,i,n){this.x=e,this.y=r,this.z=i,this.t=n}static fromAffine(e){if(!(e instanceof Ke))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Ke.ZERO)?Ie.ZERO:new Ie(e.x,e.y,ne,D(e.x*e.y))}static toAffineBatch(e){let r=a4(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){e=Jr(e),dn(64,e);let r=gc(e.slice(0,32)),i=this.calcElligatorRistrettoMap(r),n=gc(e.slice(32,64)),s=this.calcElligatorRistrettoMap(n);return i.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=Ve,i=D(Ws*e*e),n=D((i+ne)*r4),s=BigInt(-1),a=D((s-r*i)*D(i+r)),{isValid:o,value:f}=xc(n,a),u=D(f*e);Ai(u)||(u=D(-u)),o||(f=u),o||(s=i);let c=D(s*(i-ne)*i4-a),h=f*f,l=D((f+f)*a),d=D(c*e4),p=D(ne-h),y=D(ne+h);return new Ie(D(l*y),D(p*d),D(d*y),D(l*p))}static fromRistrettoBytes(e){e=Jr(e),dn(32,e);let{a:r,d:i}=Ve,n="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=gc(e);if(!o4(Ys(s,32),e)||Ai(s))throw new Error(n);let a=D(s*s),o=D(ne+r*a),f=D(ne-r*a),u=D(o*o),c=D(f*f),h=D(r*i*u-c),{isValid:l,value:d}=Og(D(h*c)),p=D(d*f),y=D(d*p*h),g=D((s+s)*p);Ai(g)&&(g=D(-g));let v=D(o*y),x=D(g*v);if(!l||Ai(x)||v===We)throw new Error(n);return new Ie(g,v,ne,x)}toRistrettoBytes(){let{x:e,y:r,z:i,t:n}=this,s=D(D(i+r)*D(i-r)),a=D(e*r),{value:o}=Og(D(s*a**vt)),f=D(o*s),u=D(o*a),c=D(f*u*n),h;if(Ai(n*c)){let d=D(r*Ws),p=D(e*Ws);e=d,r=p,h=D(f*t4)}else h=u;Ai(e*c)&&(r=D(-r));let l=D((i-r)*h);return Ai(l)&&(l=D(-l)),Ys(l,32)}equals(e){let r=this,i=e;return D(r.t*i.z)===D(i.t*r.z)}negate(){return new Ie(D(-this.x),this.y,this.z,D(-this.t))}double(){let e=this.x,r=this.y,i=this.z,{a:n}=Ve,s=D(e**vt),a=D(r**vt),o=D(vt*i**vt),f=D(n*s),u=D((e+r)**vt-s-a),c=D(f+a),h=D(c-o),l=D(f-a),d=D(u*h),p=D(c*l),y=D(u*l),g=D(h*c);return new Ie(d,p,g,y)}add(e){let r=this.x,i=this.y,n=this.z,s=this.t,a=e.x,o=e.y,f=e.z,u=e.t,c=D((i-r)*(o+a)),h=D((i+r)*(o-a)),l=D(h-c);if(l===We)return this.double();let d=D(n*vt*u),p=D(s*vt*f),y=D(p+d),g=D(h+c),v=D(p-d),x=D(y*l),w=D(g*v),P=D(y*v),B=D(l*g);return new Ie(x,w,B,P)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=rs(e),i=Ie.ZERO;if(this.equals(i)||r===ne)return this;let n=i,s=this;for(;r>We;)r&ne&&(n=n.add(s)),s=s.double(),r>>=ne;return n}precomputeWindow(e){let r=256/e+1,i=[],n=this,s=n;for(let a=0;a<r;a++){s=n,i.push(s);for(let o=1;o<2**(e-1);o++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(Ie.BASE)&&(r=Ke.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&dc.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=Ie.normalizeZ(n),dc.set(r,n)));let s=Ie.ZERO,a=Ie.ZERO,o=256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=ne),p===0){let y=n[d];l%2&&(y=y.negate()),a=a.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return[s,a]}multiply(e,r){let i=rs(e);return Ie.normalizeZ(this.wNAF(i,r))[0]}toAffine(e=vc(this.z)){let r=D(this.x*e),i=D(this.y*e);return new Ke(r,i)}};me.ExtendedPoint=Ie;Ie.BASE=new Ie(Ve.Gx,Ve.Gy,ne,D(Ve.Gx*Ve.Gy));Ie.ZERO=new Ie(We,ne,ne,We);var dc=new WeakMap,Ke=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,dc.delete(this)}static fromHex(e){let{d:r,P:i}=Ve,n=Jr(e);dn(32,n);let s=n.slice();s[31]=n[31]&~128;let a=ts(s);if(a>=i)throw new Error("Point.fromHex expects hex <= Fp");let o=D(a*a),f=D(o-ne),u=D(r*o+ne),{isValid:c,value:h}=xc(f,u);if(!c)throw new Error("Point.fromHex: invalid y coordinate");let l=(h&ne)===ne;return(n[31]&128)!=0!==l&&(h=D(-h)),new Ke(h,a)}static async fromPrivateKey(e){return(await $s(e)).point}toRawBytes(){let e=Ys(this.y,32);return e[31]|=this.x&ne?128:0,e}toHex(){return yc(this.toRawBytes())}toX25519(){let{y:e}=this;return D((ne+e)*vc(ne-e))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Ke(D(-this.x),this.y)}add(e){return Ie.fromAffine(this).add(Ie.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Ie.fromAffine(this).multiply(e,this).toAffine()}};me.Point=Ke;Ke.BASE=new Ke(Ve.Gx,Ve.Gy);Ke.ZERO=new Ke(We,ne);var pn=class{constructor(e,r){if(this.r=e,!(e instanceof Ke))throw new Error("Expected Point instance");this.s=rs(r)}static fromHex(e){let r=Jr(e);dn(64,r);let i=Ke.fromHex(r.slice(0,32)),n=ts(r.slice(32,64));return new pn(i,n)}toRawBytes(){let e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Ys(this.s,32),32),e}toHex(){return yc(this.toRawBytes())}};me.Signature=pn;function n4(...t){if(!t.every(i=>i instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var s4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yc(t){let e="";for(let r=0;r<t.length;r++)e+=s4[t[r]];return e}function Pg(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2,n=t.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s))throw new Error("Invalid byte sequence");e[r]=s}return e}function kg(t,e){let r=t.toString(16).padStart(e*2,"0");return Pg(r)}function Ys(t,e){return kg(t,e).reverse()}function Ai(t){return(D(t)&ne)===ne}function ts(t){if(!(t instanceof Uint8Array))throw new Error(`bytesToNumberLE: expected Uint8Array, got ${t}`);let e=We,r=BigInt(8);for(let i=0;i<t.length;i++)e+=BigInt(t[i])<<r*BigInt(i);return e}function gc(t){return D(ts(t)&vt**Dg-ne)}function D(t,e=Ve.P){let r=t%e;return r>=We?r:e+r}function vc(t,e=Ve.P){if(t===We||e<=We)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),i=e,n=We,s=ne,a=ne,o=We;for(;r!==We;){let u=i/r,c=i%r,h=n-a*u,l=s-o*u;i=r,r=c,n=a,s=o,a=h,o=l}if(i!==ne)throw new Error("invert: does not exist");return D(n,e)}function a4(t,e=Ve.P){let r=t.length,i=new Array(r),n=ne;for(let s=0;s<r;s++)t[s]!==We&&(i[s]=n,n=D(n*t[s],e));n=vc(n,e);for(let s=r-1;s>=0;s--){if(t[s]===We)continue;let a=D(n*t[s],e);t[s]=D(n*i[s],e),n=a}return t}function ur(t,e){let{P:r}=Ve,i=t;for(;e-- >We;)i*=i,i%=r;return i}function Ng(t){let{P:e}=Ve,r=BigInt(5),i=BigInt(10),n=BigInt(20),s=BigInt(40),a=BigInt(80),f=t*t%e*t%e,u=ur(f,vt)*f%e,c=ur(u,ne)*t%e,h=ur(c,r)*c%e,l=ur(h,i)*h%e,d=ur(l,n)*l%e,p=ur(d,s)*d%e,y=ur(p,a)*p%e,g=ur(y,a)*p%e,v=ur(g,i)*h%e;return{pow_p_5_8:ur(v,vt)*t%e,b2:f}}function xc(t,e){let r=D(e*e*e),i=D(r*r*e),n=Ng(t*i).pow_p_5_8,s=D(t*r*n),a=D(e*s*s),o=s,f=D(s*Ws),u=a===t,c=a===D(-t),h=a===D(-t*Ws);return u&&(s=o),(c||h)&&(s=f),Ai(s)&&(s=D(-s)),{isValid:u||c,value:s}}function Og(t){return xc(ne,t)}async function bc(...t){let e=n4(...t),r=await me.utils.sha512(e),i=ts(r);return D(i,Ve.n)}function o4(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Jr(t){return t instanceof Uint8Array?Uint8Array.from(t):Pg(t)}function dn(t,e){if(e.length!==t)throw new Error(`Expected ${t} bytes`)}function rs(t,e=Ve.n){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&We<t&&t<e)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function u4(t){let e=typeof t=="bigint"||typeof t=="number"?kg(rs(t,vt**BigInt(256)),32):Jr(t);return dn(32,e),e}function Lg(t){return t=Jr(t),dn(32,t),t[0]&=248,t[31]&=127,t[31]|=64,ts(t)}async function $s(t){let e=await me.utils.sha512(u4(t)),r=e.slice(0,32),i=e.slice(32,64),n=D(Lg(r),Ve.n),s=Ke.BASE.multiply(n),a=s.toRawBytes();return{head:r,prefix:i,scalar:n,point:s,pubBytes:a}}async function c4(t){return(await $s(t)).pubBytes}me.getPublicKey=c4;async function f4(t,e){let r=Jr(t),{prefix:i,scalar:n,pubBytes:s}=await $s(e),a=await bc(i,r),o=Ke.BASE.multiply(a),f=await bc(o.toRawBytes(),s,r),u=D(a+f*n,Ve.n);return new pn(o,u).toRawBytes()}me.sign=f4;async function h4(t,e,r){e=Jr(e),r instanceof Ke||(r=Ke.fromHex(r)),t instanceof pn||(t=pn.fromHex(t));let i=Ie.BASE.multiply(t.s),n=await bc(t.r.toRawBytes(),r.toRawBytes(),e),s=Ie.fromAffine(r).multiplyUnsafe(n);return Ie.fromAffine(t.r).add(s).subtract(i).multiplyUnsafe(Ve.h).equals(Ie.ZERO)}me.verify=h4;async function l4(t,e){let{scalar:r}=await $s(t),i=Ke.fromHex(e).toX25519();return Mg(r,i)}me.getSharedSecret=l4;Ke.BASE._setWindowSize(8);function Ro(t,e,r){let i=D(t*(e-r));return e=D(e-i),r=D(r+i),[e,r]}function p4(t,e){let{P:r,n:i}=Ve,n=rs(t,r),s=rs(e,r),a=BigInt(121665),o=n,f=ne,u=We,c=n,h=ne,l=We,d;for(let v=BigInt(255-1);v>=We;v--){let x=s>>v&ne;l^=x,d=Ro(l,f,c),f=d[0],c=d[1],d=Ro(l,u,h),u=d[0],h=d[1],l=x;let w=D(f+u),P=D(w*w),B=D(f-u),S=D(B*B),F=D(P-S),z=D(c+h),ee=D(c-h),Te=D(ee*w),ye=D(z*B);c=D(D(Te+ye)**vt),h=D(o*D(Te-ye)**vt),f=D(P*S),u=D(F*(P+D(a*F)))}d=Ro(l,f,c),f=d[0],c=d[1],d=Ro(l,u,h),u=d[0],h=d[1];let{pow_p_5_8:p,b2:y}=Ng(u),g=D(ur(p,BigInt(3))*y);return D(f*g)}function d4(t){return Ys(D(t,Ve.P),32)}function Mg(t,e){let r=p4(t,e);if(r===We)throw new Error("Invalid private or public key received");return d4(r)}function y4(t){let e=Jr(t);return dn(32,e),e[31]&=127,ts(e)}me.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){let r=y4(e),i=Lg(t);return Mg(r,i)},scalarMultBase(t){return me.curve25519.scalarMult(t,me.curve25519.BASE_POINT_U)}};var Ci={node:J8.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};me.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:yc,getExtendedPublicKey:$s,randomBytes:(t=32)=>{if(Ci.web)return Ci.web.getRandomValues(new Uint8Array(t));if(Ci.node){let{randomBytes:e}=Ci.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>me.utils.randomBytes(32),sha512:async t=>{if(Ci.web){let e=await Ci.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Ci.node)return Uint8Array.from(Ci.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Ke.BASE){let r=e.equals(Ke.BASE)?e:new Ke(e.x,e.y);return r._setWindowSize(t),r.multiply(ne),r}}});var Fg=E(Ti=>{"use strict";var Qs=mc(),g4=32,v4=64,Do=32;Ti.publicKeyLength=g4;Ti.privateKeyLength=v4;Ti.generateKey=async function(){let t=Qs.utils.randomPrivateKey(),e=await Qs.getPublicKey(t);return{privateKey:Kg(t,e),publicKey:e}};Ti.generateKeyFromSeed=async function(t){if(t.length!==Do)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await Qs.getPublicKey(e);return{privateKey:Kg(e,r),publicKey:r}};Ti.hashAndSign=function(t,e){let r=t.slice(0,Do);return Qs.sign(e,r)};Ti.hashAndVerify=function(t,e,r){return Qs.verify(e,r,t)};function Kg(t,e){let r=new Uint8Array(Ti.privateKeyLength);for(let i=0;i<Do;i++)r[i]=t[i],r[Do+i]=e[i];return r}});var Hg=E((E5,Gg)=>{"use strict";var Ug=Oe(),{equals:qg}=(or(),ar),{sha256:Vg}=(tr(),Ut),{base58btc:x4}=(nn(),rn),{identity:b4}=(Ns(),Qn),xt=Fg(),Po=ao(),m4=Bo(),ko=class{constructor(e){this._key=ns(e,xt.publicKeyLength)}async verify(e,r){return xt.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return Po.PublicKey.encode({Type:Po.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return qg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Vg.digest(this.bytes);return e}},is=class{constructor(e,r){this._key=ns(e,xt.privateKeyLength),this._publicKey=ns(r,xt.publicKeyLength)}async sign(e){return xt.hashAndSign(this._key,e)}get public(){return new ko(this._publicKey)}marshal(){return this._key}get bytes(){return Po.PrivateKey.encode({Type:Po.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return qg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Vg.digest(this.bytes);return e}async id(){let e=await b4.digest(this.public.bytes);return x4.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return m4.export(this.bytes,e);throw Ug(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function E4(t){if(t.length>xt.privateKeyLength){t=ns(t,xt.privateKeyLength+xt.publicKeyLength);let i=t.slice(0,xt.privateKeyLength),n=t.slice(xt.privateKeyLength,t.length);return new is(i,n)}t=ns(t,xt.privateKeyLength);let e=t.slice(0,xt.privateKeyLength),r=t.slice(xt.publicKeyLength);return new is(e,r)}function w4(t){return t=ns(t,xt.publicKeyLength),new ko(t)}async function S4(){let{privateKey:t,publicKey:e}=await xt.generateKey();return new is(t,e)}async function _4(t){let{privateKey:e,publicKey:r}=await xt.generateKeyFromSeed(t);return new is(e,r)}function ns(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Ug(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}Gg.exports={Ed25519PublicKey:ko,Ed25519PrivateKey:is,unmarshalEd25519PrivateKey:E4,unmarshalEd25519PublicKey:w4,generateKeyPair:S4,generateKeyPairFromSeed:_4}});var Rc=E(oe=>{"use strict";var I4=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.utils=oe.schnorr=oe.verify=oe.signSync=oe.sign=oe.getSharedSecret=oe.recoverPublicKey=oe.getPublicKey=oe.Signature=oe.Point=oe.CURVE=void 0;var B4=I4(Yr()),de=BigInt(0),He=BigInt(1),Ye=BigInt(2),Zs=BigInt(3),A4=BigInt(8),Ec=Ye**BigInt(256),Be={a:de,b:BigInt(7),P:Ec-Ye**BigInt(32)-BigInt(977),n:Ec-BigInt("432420386565659656852420866394968145599"),h:He,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};oe.CURVE=Be;function zg(t){let{a:e,b:r}=Be,i=H(t*t),n=H(i*t);return H(n+e*t+r)}var No=Be.a===de,le=class{constructor(e,r,i){this.x=e,this.y=r,this.z=i}static fromAffine(e){if(!(e instanceof ve))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new le(e.x,e.y,He)}static toAffineBatch(e){let r=D4(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return le.toAffineBatch(e).map(le.fromAffine)}equals(e){let r=this,i=e,n=H(r.z*r.z),s=H(r.z*n),a=H(i.z*i.z),o=H(i.z*a);return H(r.x*a)===H(n*i.x)&&H(r.y*o)===H(s*i.y)}negate(){return new le(this.x,H(-this.y),this.z)}double(){let e=this.x,r=this.y,i=this.z,n=H(e**Ye),s=H(r**Ye),a=H(s**Ye),o=H(Ye*(H(H((e+s)**Ye))-n-a)),f=H(Zs*n),u=H(f**Ye),c=H(u-Ye*o),h=H(f*(o-c)-A4*a),l=H(Ye*r*i);return new le(c,h,l)}add(e){if(!(e instanceof le))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,i=this.y,n=this.z,s=e.x,a=e.y,o=e.z;if(s===de||a===de)return this;if(r===de||i===de)return e;let f=H(n**Ye),u=H(o**Ye),c=H(r*u),h=H(s*f),l=H(i*o*u),d=H(H(a*n)*f),p=H(h-c),y=H(d-l);if(p===de)return y===de?this.double():le.ZERO;let g=H(p**Ye),v=H(p*g),x=H(c*g),w=H(y**Ye-v-Ye*x),P=H(y*(x-w)-l*v),B=H(n*o*p);return new le(w,P,B)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=Yg(e);if(!No){let c=le.ZERO,h=this;for(;r>de;)r&He&&(c=c.add(h)),h=h.double(),r>>=He;return c}let{k1neg:i,k1:n,k2neg:s,k2:a}=Qg(r),o=le.ZERO,f=le.ZERO,u=this;for(;n>de||a>de;)n&He&&(o=o.add(u)),a&He&&(f=f.add(u)),u=u.double(),n>>=He,a>>=He;return i&&(o=o.negate()),s&&(f=f.negate()),f=new le(H(f.x*Be.beta),f.y,f.z),o.add(f)}precomputeWindow(e){let r=No?128/e+1:256/e+1,i=[],n=this,s=n;for(let a=0;a<r;a++){s=n,i.push(s);for(let o=1;o<2**(e-1);o++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(le.BASE)&&(r=ve.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&wc.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=le.normalizeZ(n),wc.set(r,n)));let s=le.ZERO,a=le.ZERO,o=No?128/i+1:256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=He),p===0){let y=n[d];l%2&&(y=y.negate()),a=a.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return{p:s,f:a}}multiply(e,r){let i=Yg(e),n,s;if(No){let{k1neg:a,k1:o,k2neg:f,k2:u}=Qg(i),{p:c,f:h}=this.wNAF(o,r),{p:l,f:d}=this.wNAF(u,r);a&&(c=c.negate()),f&&(l=l.negate()),l=new le(H(l.x*Be.beta),l.y,l.z),n=c.add(l),s=h.add(d)}else{let{p:a,f:o}=this.wNAF(i,r);n=a,s=o}return le.normalizeZ([n,s])[0]}toAffine(e=Js(this.z)){let r=e**Ye,i=H(this.x*r),n=H(this.y*r*e);return new ve(i,n)}};le.BASE=new le(Be.Gx,Be.Gy,He);le.ZERO=new le(de,He,de);var wc=new WeakMap,ve=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,wc.delete(this)}static fromCompressedHex(e){let r=e.length===32,i=Lt(r?e:e.slice(1)),n=zg(i),s=R4(n),a=(s&He)===He;r?a&&(s=H(-s)):(e[0]&1)==1!==a&&(s=H(-s));let o=new ve(i,s);return o.assertValidity(),o}static fromUncompressedHex(e){let r=Lt(e.slice(1,33)),i=Lt(e.slice(33)),n=new ve(r,i);return n.assertValidity(),n}static fromHex(e){let r=gn(e),i=r[0];if(r.length===32||r.length===33&&(i===2||i===3))return this.fromCompressedHex(r);if(r.length===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return ve.BASE.multiply(ea(e))}static fromSignature(e,r,i){let n=e instanceof Uint8Array?Lt(e):ss(e),s=Xg(r),{r:a,s:o}=s;if(i!==0&&i!==1)throw new Error("Cannot recover signature: invalid recovery bit");let f=2+(i&1),u=ve.fromHex(`0${f}${ei(a)}`),c=le.fromAffine(u).multiplyUnsafe(o),h=le.BASE.multiply(n),l=Js(a,Be.n),p=c.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(e=!1){return Ri(this.toHex(e))}toHex(e=!1){let r=ei(this.x);return e?`${this.y&He?"03":"02"}${r}`:`04${r}${ei(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:i}=this;if(!Bc(r)||!Bc(i))throw new Error(e);let n=H(i*i),s=zg(r);if(H(n-s)!==de)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ve(this.x,H(-this.y))}double(){return le.fromAffine(this).double().toAffine()}add(e){return le.fromAffine(this).add(le.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return le.fromAffine(this).multiply(e,this).toAffine()}};oe.Point=ve;ve.BASE=new ve(Be.Gx,Be.Gy);ve.ZERO=new ve(de,de);function jg(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Wg(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${yn(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Lt(r),left:t.subarray(e+2)}}function C4(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${yn(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=Wg(t.subarray(2)),{data:i,left:n}=Wg(r);if(n.length)throw new Error(`Invalid signature: left bytes after parsing: ${yn(n)}`);return{r:e,s:i}}var Cr=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,i="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${i}: Expected string or Uint8Array`);let n=r?yn(e):e;if(n.length!==128)throw new Error(`${i}: Expected 64-byte hex`);return new Cr(ss(n.slice(0,64)),ss(n.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:i,s:n}=C4(r?e:Ri(e));return new Cr(i,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!vn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!vn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=Be.n>>He;return this.s>e}normalizeS(){return this.hasHighS()?new Cr(this.r,Be.n-this.s):this}toDERRawBytes(e=!1){return Ri(this.toDERHex(e))}toDERHex(e=!1){let r=jg(Xs(this.s));if(e)return r;let i=jg(Xs(this.r)),n=Xs(i.length/2),s=Xs(r.length/2);return`30${Xs(i.length/2+r.length/2+4)}02${n}${i}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ri(this.toCompactHex())}toCompactHex(){return ei(this.r)+ei(this.s)}};oe.Signature=Cr;function Sc(...t){if(!t.every(i=>i instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var T4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yn(t){let e="";for(let r=0;r<t.length;r++)e+=T4[t[r]];return e}function ei(t){if(t>Ec)throw new Error("pad64: invalid number");return t.toString(16).padStart(64,"0")}function _c(t){return Ri(ei(t))}function Xs(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ss(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Ri(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2,n=t.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s))throw new Error("Invalid byte sequence");e[r]=s}return e}function gn(t){return t instanceof Uint8Array?t:Ri(t)}function Lt(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return ss(yn(t))}function Yg(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&vn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function H(t,e=Be.P){let r=t%e;return r>=0?r:e+r}function zt(t,e){let{P:r}=Be,i=t;for(;e-- >de;)i*=i,i%=r;return i}function R4(t){let{P:e}=Be,r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),f=t*t*t%e,u=f*f*t%e,c=zt(u,Zs)*u%e,h=zt(c,Zs)*u%e,l=zt(h,Ye)*f%e,d=zt(l,i)*l%e,p=zt(d,n)*d%e,y=zt(p,a)*p%e,g=zt(y,o)*y%e,v=zt(g,a)*p%e,x=zt(v,Zs)*u%e,w=zt(x,s)*d%e,P=zt(w,r)*f%e;return zt(P,Ye)}function Js(t,e=Be.P){if(t===de||e<=de)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=H(t,e),i=e,n=de,s=He,a=He,o=de;for(;r!==de;){let u=i/r,c=i%r,h=n-a*u,l=s-o*u;i=r,r=c,n=a,s=o,a=h,o=l}if(i!==He)throw new Error("invert: does not exist");return H(n,e)}function D4(t,e=Be.P){let r=t.length,i=new Array(r),n=He;for(let s=0;s<r;s++)t[s]!==de&&(i[s]=n,n=H(n*t[s],e));n=Js(n,e);for(let s=r-1;s>=0;s--){if(t[s]===de)continue;let a=H(n*t[s],e);t[s]=H(n*i[s],e),n=a}return t}var $g=(t,e)=>(t+e/Ye)/e,Oo=Ye**BigInt(128);function Qg(t){let{n:e}=Be,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-He*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=$g(s*t,e),o=$g(-i*t,e),f=H(t-a*r-o*n,e),u=H(-a*i-o*s,e),c=f>Oo,h=u>Oo;if(c&&(f=e-f),h&&(u=e-u),f>Oo||u>Oo)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:c,k1:f,k2neg:h,k2:u}}function P4(t){typeof t!="string"&&(t=yn(t));let e=ss(t||"0"),i=t.length/2*8-256;return i>0&&(e=e>>BigInt(i)),e>=Be.n&&(e-=Be.n),e}var Ic=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return oe.utils.hmacSha256(this.k,...e)}hmacSync(...e){if(typeof oe.utils.hmacSha256Sync!="function")throw new Error("utils.hmacSha256Sync is undefined, you need to set it");let r=oe.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}};function vn(t){return de<t&&t<Be.n}function Bc(t){return 0n<t&&t<Be.P}function Zg(t,e,r){let i=Lt(t);if(!vn(i))return;let{n}=Be,s=ve.BASE.multiply(i),a=H(s.x,n);if(a===de)return;let o=H(Js(i,n)*H(e+r*a,n),n);if(o===de)return;let f=new Cr(a,o),u=(s.x===f.r?0:2)|Number(s.y&He);return{sig:f,recovery:u}}function ea(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=ss(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Lt(t)}else throw new TypeError("Expected valid private key");if(!vn(e))throw new Error("Expected private key: 0 < key < n");return e}function Ac(t){return t instanceof ve?(t.assertValidity(),t):ve.fromHex(t)}function Xg(t){if(t instanceof Cr)return t.assertValidity(),t;try{return Cr.fromDER(t)}catch(e){return Cr.fromCompact(t)}}function k4(t,e=!1){return ve.fromPrivateKey(t).toRawBytes(e)}oe.getPublicKey=k4;function N4(t,e,r){return ve.fromSignature(t,e,r).toRawBytes()}oe.recoverPublicKey=N4;function Jg(t){let e=t instanceof Uint8Array,r=typeof t=="string",i=(e||r)&&t.length;return e?i===33||i===65:r?i===66||i===130:t instanceof ve}function O4(t,e,r=!1){if(Jg(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Jg(e))throw new TypeError("getSharedSecret: second arg must be public key");let i=Ac(e);return i.assertValidity(),i.multiply(ea(t)).toRawBytes(r)}oe.getSharedSecret=O4;function e1(t){let e=t.length>32?t.slice(0,32):t;return Lt(e)}function L4(t){let e=e1(t),r=H(e,Be.n);return t1(r<de?e:r)}function t1(t){if(typeof t!="bigint")throw new Error("Expected bigint");let e=ei(t);return Ri(e)}function r1(t,e,r){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let i=gn(t),n=ea(e),s=[t1(n),L4(i)];if(r!=null){r===!0&&(r=oe.utils.randomBytes(32));let f=_c(Lt(gn(r)));if(f.length!==32)throw new Error("secp256k1: Expected 32 bytes of extra data");s.push(f)}let a=Sc(...s),o=e1(i);return{seed:a,m:o,d:n}}function i1(t,e){let{sig:r,recovery:i}=t,{canonical:n,der:s,recovered:a}=Object.assign({canonical:!0,der:!0},e);n&&r.hasHighS()&&(r=r.normalizeS(),i^=1);let o=s?r.toDERRawBytes():r.toCompactRawBytes();return a?[o,i]:o}async function M4(t,e,r={}){let{seed:i,m:n,d:s}=r1(t,e,r.extraEntropy),a,o=new Ic;for(await o.reseed(i);!(a=Zg(await o.generate(),n,s));)await o.reseed();return i1(a,r)}oe.sign=M4;function K4(t,e,r={}){let{seed:i,m:n,d:s}=r1(t,e,r.extraEntropy),a,o=new Ic;for(o.reseedSync(i);!(a=Zg(o.generateSync(),n,s));)o.reseedSync();return i1(a,r)}oe.signSync=K4;var F4={strict:!0};function U4(t,e,r,i=F4){let n;try{n=Xg(t)}catch(v){return!1}let{r:s,s:a}=n;if(i.strict&&n.hasHighS())return!1;let o=P4(e);if(o===de)return!1;let f;try{f=le.fromAffine(Ac(r))}catch(v){return!1}let{n:u}=Be,c=Js(a,u),h=H(o*c,u),l=H(s*c,u),d=le.BASE.multiply(h),p=f.multiplyUnsafe(l),y=d.add(p).toAffine();return H(y.x,u)===s}oe.verify=U4;async function Cc(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),i=await oe.utils.sha256(r),n=await oe.utils.sha256(Sc(i,i,...e));return Lt(n)}async function n1(t,e,r){let i=_c(t),n=await Cc("BIP0340/challenge",i,e.toRawX(),r);return H(n,Be.n)}function Tc(t){return H(t.y,Ye)===de}var xn=class{constructor(e,r){if(this.r=e,this.s=r,!Bc(e)||!vn(r))throw new Error("Invalid signature")}static fromHex(e){let r=gn(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let i=Lt(r.slice(0,32)),n=Lt(r.slice(32,64));return new xn(i,n)}toHex(){return ei(this.r)+ei(this.s)}toRawBytes(){return Ri(this.toHex())}};function q4(t){return ve.fromPrivateKey(t).toRawX()}async function V4(t,e,r=oe.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);let{n:i}=Be,n=gn(t),s=ea(e),a=gn(r);if(a.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=ve.fromPrivateKey(s),f=Tc(o)?s:i-s,u=await Cc("BIP0340/aux",a),c=f^u,h=await Cc("BIP0340/nonce",_c(c),o.toRawX(),n),l=H(h,i);if(l===de)throw new Error("sign: Creation of signature failed. k is zero");let d=ve.fromPrivateKey(l),p=Tc(d)?l:i-l,y=await n1(d.x,o,n),g=new xn(d.x,H(p+y*f,i));if(!await s1(g.toRawBytes(),n,o.toRawX()))throw new Error("sign: Invalid signature produced");return g.toRawBytes()}async function s1(t,e,r){let i=t instanceof xn?t:xn.fromHex(t),n=gn(e),s=Ac(r),a=await n1(i.r,s,n),o=ve.fromPrivateKey(i.s),f=s.multiply(a),u=o.subtract(f);return!(u.equals(ve.BASE)||!Tc(u)||u.x!==i.r)}oe.schnorr={Signature:xn,getPublicKey:q4,sign:V4,verify:s1};ve.BASE._setWindowSize(8);var Mt={node:B4.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};oe.utils={isValidPrivateKey(t){try{return ea(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(Mt.web)return Mt.web.getRandomValues(new Uint8Array(t));if(Mt.node){let{randomBytes:e}=Mt.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=oe.utils.randomBytes(32),r=Lt(e);if(vn(r)&&r!==He)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},bytesToHex:yn,sha256:async t=>{if(Mt.web){let e=await Mt.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(Mt.node){let{createHash:e}=Mt.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Mt.web){let r=await Mt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=Sc(...e),n=await Mt.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}else if(Mt.node){let{createHmac:r}=Mt.node,i=r("sha256",t);return e.forEach(n=>i.update(n)),Uint8Array.from(i.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=ve.BASE){let r=e===ve.BASE?e:new ve(e.x,e.y);return r._setWindowSize(t),r.multiply(Zs),r}}});var u1=E((S5,o1)=>{"use strict";var ta=Oe(),Di=Rc(),{sha256:a1}=(tr(),Ut);o1.exports=()=>{let t=32;function e(){return Di.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await a1.digest(c);try{return await Di.sign(h,u)}catch(l){throw ta(l,"ERR_INVALID_INPUT")}}async function i(u,c,h){try{let{digest:l}=await a1.digest(h);return Di.verify(c,l,u)}catch(l){throw ta(l,"ERR_INVALID_INPUT")}}function n(u){return Di.Point.fromHex(u).toRawBytes(!0)}function s(u){return Di.Point.fromHex(u).toRawBytes(!1)}function a(u){try{Di.getPublicKey(u,!0)}catch(c){throw ta(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{Di.Point.fromHex(u)}catch(c){throw ta(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return Di.getPublicKey(u,!0)}catch(c){throw ta(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:s,validatePrivateKey:a,validatePublicKey:o,computePublicKey:f}}});var l1=E((_5,h1)=>{"use strict";var{sha256:c1}=(tr(),Ut),G4=Oe(),{equals:f1}=(or(),ar),{toString:H4}=(yt(),dt),z4=Bo();h1.exports=(t,e,r)=>{r=r||u1()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return f1(this.bytes,u.bytes)}async hash(){let{bytes:u}=await c1.digest(this.bytes);return u}}class n{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return f1(this.bytes,u.bytes)}async hash(){let{bytes:u}=await c1.digest(this.bytes);return u}async id(){let u=await this.public.hash();return H4(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return z4.export(this.bytes,u);throw G4(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(f){return new n(f)}function a(f){return new i(f)}async function o(){let f=await r.generateKey();return new n(f)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:a,generateKeyPair:o}}});var d1=E((I5,p1)=>{"use strict";p1.exports={SHA1:20,SHA256:32,SHA512:64}});var v1=E(g1=>{"use strict";var y1=Vs(),j4=d1(),W4={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},Y4=async(t,e)=>{let r=await y1.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};g1.create=async function(t,e){let r=W4[t],i=await y1.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return Y4(i,n)},length:j4[t]}}});var w1=E((A5,E1)=>{"use strict";var x1=Oe(),{concat:b1}=(sr(),nr),{fromString:$4}=(lt(),ht),Q4=v1(),m1={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};E1.exports=async(t,e,r)=>{let i=m1[t];if(!i){let x=Object.keys(m1).join(" / ");throw x1(new Error(`unknown cipher type '${t}'. Must be ${x}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw x1(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,a=20,o=$4("key expansion"),f=2*(s+n+a),u=await Q4.create(e,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let x=await u.digest(b1([c,o])),w=x.length;l+w>f&&(w=f-l),h.push(x),l+=w,c=await u.digest(c)}let d=f/2,p=b1(h),y=p.slice(0,d),g=p.slice(d,f),v=x=>({iv:x.slice(0,s),cipherKey:x.slice(s,s+n),macKey:x.slice(s+n)});return{k1:v(y),k2:v(g)}}});var _1=E((C5,S1)=>{"use strict";var Z4=Oe();S1.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw Z4(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var R1=E(T1=>{"use strict";var X4=Oe(),ra=Vs(),{base64urlToBuffer:I1}=Io(),J4=_1(),{toString:Dc}=(yt(),dt),{concat:eI}=(sr(),nr),{equals:tI}=(or(),ar),B1={"P-256":256,"P-384":384,"P-521":521};T1.generateEphmeralKeyPair=async function(t){J4(Object.keys(B1),t);let e=await ra.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let a;s?a=await ra.get().subtle.importKey("jwk",iI(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let o=[await ra.get().subtle.importKey("jwk",C1(t,n),{name:"ECDH",namedCurve:t},!1,[]),a],f=await ra.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],B1[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},i=await ra.get().subtle.exportKey("jwk",e.publicKey);return{key:rI(i),genSharedKey:r}};var A1={"P-256":32,"P-384":48,"P-521":66};function rI(t){let e=A1[t.crv];return eI([Uint8Array.from([4]),I1(t.x,e),I1(t.y,e)],1+e*2)}function C1(t,e){let r=A1[t];if(tI(!e.slice(0,1),Uint8Array.from([4])))throw X4(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:Dc(e.slice(1,r+1),"base64url"),y:Dc(e.slice(1+r),"base64url"),ext:!0}}var iI=(t,e)=>({...C1(t,e.public),d:Dc(e.private,"base64url")})});var P1=E((R5,D1)=>{"use strict";var nI=R1();D1.exports=async t=>nI.generateEphmeralKeyPair(t)});var O1=E((D5,N1)=>{"use strict";var Tr=ao();Fs();tg();var Pc=Se(),ia=Oe(),{fromString:sI}=(lt(),ht),aI=ag(),jt={rsa:Rg(),ed25519:Hg(),secp256k1:l1()(Tr,pc())},Lo={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function as(t){let e=jt[t.toLowerCase()];if(!e){let r=Object.keys(jt).join(" / ");throw ia(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var oI=async(t,e)=>as(t).generateKeyPair(e),uI=async(t,e,r)=>{let i=as(t);if(t.toLowerCase()!=="ed25519")throw ia(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},cI=t=>{let e=Tr.PublicKey.decode(t),r=e.Data;switch(e.Type){case Tr.KeyType.RSA:return jt.rsa.unmarshalRsaPublicKey(r);case Tr.KeyType.Ed25519:return jt.ed25519.unmarshalEd25519PublicKey(r);case Tr.KeyType.Secp256k1:if(jt.secp256k1)return jt.secp256k1.unmarshalSecp256k1PublicKey(r);throw ia(new Error(Lo.message),Lo.code);default:as(e.Type)}},fI=(t,e)=>(e=(e||"rsa").toLowerCase(),as(e),t.bytes),k1=async t=>{let e=Tr.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Tr.KeyType.RSA:return jt.rsa.unmarshalRsaPrivateKey(r);case Tr.KeyType.Ed25519:return jt.ed25519.unmarshalEd25519PrivateKey(r);case Tr.KeyType.Secp256k1:if(jt.secp256k1)return jt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw ia(new Error(Lo.message),Lo.code);default:as(e.Type)}},hI=(t,e)=>(e=(e||"rsa").toLowerCase(),as(e),t.bytes),lI=async(t,e)=>{try{let n=await aI.import(t,e);return k1(n)}catch(n){}let r=Pc.pki.decryptRsaPrivateKey(t,e);if(r===null)throw ia(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=Pc.asn1.toDer(Pc.pki.privateKeyToAsn1(r));return i=sI(i.getBytes(),"ascii"),jt.rsa.unmarshalRsaPrivateKey(i)};N1.exports={supportedKeys:jt,keysPBM:Tr,keyStretcher:w1(),generateEphemeralKeyPair:P1(),generateKeyPair:oI,generateKeyPairFromSeed:uI,unmarshalPublicKey:cI,marshalPublicKey:fI,unmarshalPrivateKey:k1,marshalPrivateKey:hI,import:lI}});var L1=E((P5,kc)=>{"use strict";function pI(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function dI(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...a){if(i&&!(this instanceof s))return new s(...a);let o=t.call(this,...a)||this;return o&&!o[n]&&Object.defineProperty(o,n,{value:!0}),o}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=a=>!!(a&&a[n]),s}kc.exports=pI;kc.exports.proto=dI});var F1=E((k5,K1)=>{"use strict";var os=Qi(),M1=os.Reader,yI=os.Writer,Je=os.util,na=os.roots["libp2p-peer-id"]||(os.roots["libp2p-peer-id"]={});na.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=Je.newBuffer([]),t.prototype.pubKey=Je.newBuffer([]),t.prototype.privKey=Je.newBuffer([]),t.encode=function(r,i){return i||(i=yI.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof M1||(r=M1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new na.PeerIdProto;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("id"))throw Je.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof na.PeerIdProto)return r;var i=new na.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?Je.base64.decode(r.id,i.id=Je.newBuffer(Je.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?Je.base64.decode(r.pubKey,i.pubKey=Je.newBuffer(Je.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?Je.base64.decode(r.privKey,i.privKey=Je.newBuffer(Je.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=Je.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=Je.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=Je.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?Je.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?Je.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?Je.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,os.util.toJSONOptions)},t}();K1.exports=na});var us=E((bt,W1)=>{"use strict";var{CID:Nc}=(Ku(),kd),gI=(Ds(),Rs),vI=(Pu(),Ja),xI=(nn(),rn),bI=(sn(),mi),{base58btc:Oc}=(nn(),rn),{base32:mI}=(Ds(),Rs),{base16:U1}=(Du(),Xa),sa=($n(),to),Rr=O1(),EI=L1(),{PeerIdProto:q1}=F1(),{equals:bn}=(or(),ar),{fromString:aa}=(lt(),ht),{toString:wI}=(yt(),dt),{identity:Mo}=(Ns(),Qn),V1={...gI,...vI,...xI,...bI},SI=Object.keys(V1).reduce((t,e)=>t.or(V1[e]),mI.decoder),_I=112,G1=114,H1=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!bn(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=Oc.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=sa.decode(this.id);e.code===Mo.code&&(this._pubKey=Rr.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Rr.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Rr.marshalPrivateKey(this.privKey)}marshal(e){return q1.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:j1(this.marshalPrivKey()),pubKey:j1(this.marshalPubKey())}}toHexString(){return U1.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=Nc.createV1(G1,sa.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return bn(this.id,e);if(e.id)return bn(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&bn(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(sa.decode(this.id).code===Mo.code)return!0}catch(e){}return!1}},Dr=EI(H1,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});bt=W1.exports=Dr;var oa=t=>t.bytes.length<=42?sa.create(Mo.code,t.bytes).bytes:t.hash(),Lc=async(t,e)=>{let r=await oa(e);return new Dr(r,t,e)};bt.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Rr.generateKeyPair(t.keyType,t.bits);return Lc(e,e.public)};bt.createFromHexString=t=>new Dr(U1.decode("f"+t));bt.createFromBytes=t=>{try{let e=Nc.decode(t);if(!z1(e))throw new Error("Supplied PeerID CID is invalid");return bt.createFromCID(e)}catch{if(sa.decode(t).code!==Mo.code)throw new Error("Supplied PeerID CID is invalid");return new Dr(t)}};bt.createFromB58String=t=>bt.createFromBytes(Oc.decode("z"+t));var z1=t=>t.code===G1||t.code===_I;bt.createFromCID=t=>{if(t=Nc.asCID(t),!t||!z1(t))throw new Error("Supplied PeerID CID is invalid");return new Dr(t.multihash.bytes)};bt.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=aa(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Rr.unmarshalPublicKey(e);return Lc(void 0,r)};bt.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=aa(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Rr.unmarshalPrivateKey(t);return Lc(e,e.public)};bt.createFromJSON=async t=>{let e=Oc.decode("z"+t.id),r=t.privKey&&aa(t.privKey,"base64pad"),i=t.pubKey&&aa(t.pubKey,"base64pad"),n=i&&await Rr.unmarshalPublicKey(i);if(!r)return new Dr(e,void 0,n);let s=await Rr.unmarshalPrivateKey(r),a=await oa(s.public),o;if(n&&(o=await oa(n)),n&&!bn(a,o))throw new Error("Public and private key do not match");if(e&&!bn(a,e))throw new Error("Id and private key do not match");return new Dr(e,s,n)};bt.createFromProtobuf=async t=>{typeof t=="string"&&(t=aa(t,"base16"));let{id:e,privKey:r,pubKey:i}=q1.decode(t);r=r?await Rr.unmarshalPrivateKey(r):!1,i=i?await Rr.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await oa(r.public)),i&&(n=await oa(i)),r){if(i&&!bn(s,n))throw new Error("Public and private key do not match");return new Dr(s,r,r.public)}if(i)return new Dr(n,void 0,i);if(e)return new Dr(e);throw new Error("Protobuf did not contain any usable key material")};bt.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),bt.createFromBytes(SI.decode(t)));bt.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function j1(t){if(t)return wI(t,"base64pad")}});var Mc=E((N5,Q1)=>{"use strict";var II=nd(),{toString:BI}=(yt(),dt),{fromString:Y1}=(lt(),ht),$1=us(),{sha256:AI}=(tr(),Ut),CI=()=>II(8),TI=(t,e)=>{let r;t instanceof Uint8Array?r=$1.createFromBytes(t).id:r=$1.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},RI=t=>AI.encode(t),DI=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},PI=t=>Array.isArray(t)?t:[t],kI=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=BI(t.from,"base58btc")),e&&(r.receivedFrom=e),r},NI=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=Y1(t.from,"base58btc")),typeof t.data=="string"&&(e.data=Y1(t.data)),e};Q1.exports={randomSeqno:CI,msgId:TI,noSignMsgId:RI,anyMatch:DI,ensureArray:PI,normalizeInRpcMessage:kI,normalizeOutRpcMessage:NI}});var t2=E((O5,e2)=>{"use strict";var Kc=us(),{RPC:Z1}=$0(),{concat:X1}=(sr(),nr),{fromString:OI}=(lt(),ht),Fc=OI("libp2p-pubsub:"),{normalizeOutRpcMessage:LI}=Mc();async function MI(t,e){let r=X1([Fc,Z1.Message.encode(LI(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function KI(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=X1([Fc,Z1.Message.encode({...t,from:Kc.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await J1(t)).verify(e,t.signature)}async function J1(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=Kc.createFromB58String(t.from);if(t.key){let r=await Kc.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}e2.exports={messagePublicKey:J1,signMessage:MI,SignPrefix:Fc,verifySignature:KI}});var s2=E((L5,n2)=>{"use strict";var r2=Ta(),{EventEmitter:FI}=A0(),Pt=Oe(),{pipe:UI}=T0(),{default:qI}=uh(),VI=vh(),{codes:cr}=La(),{RPC:i2}=$0(),GI=Jp(),{SignaturePolicy:ti}=td(),Pi=Mc(),{signMessage:HI,verifySignature:zI}=t2(),Ko=class extends FI{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=ti.StrictSign,canRelayMessage:s=!1,emitSelf:a=!1,messageProcessingConcurrency:o=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(r2(e),{err:r2(`${e}:error`)}),this.multicodecs=Pi.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!ti[n])throw Pt(new Error("Invalid global signature policy"),cr.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=a,this.topicValidators=new Map,this.queue=new qI({concurrency:o}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new VI({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),a=this._addPeer(n,e),o=a.attachInboundStream(r);this._processMessages(s,o,a)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new GI({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await UI(r,async n=>{for await(let s of n){let a=s instanceof Uint8Array?s:s.slice(),o=this._decodeRpc(a);(async()=>{try{await this._processRpc(e,i,o)}catch(f){this.log.err(f)}})()}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;return n.length&&(n.forEach(a=>{this._processRpcSubOpt(e,a)}),this.emit("pubsub:subscription-change",r.id,n)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(a=>async()=>{if(!(this.canRelayMessage||a.topicIDs&&a.topicIDs.some(o=>this.subscriptions.has(o)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let o=Pi.normalizeInRpcMessage(a,e);await this._processRpcMessage(o)}catch(o){this.log.err(o)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(Pi.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case ti.StrictSign:return Pi.msgId(e.from,e.seqno);case ti.StrictNoSign:return Pi.noSignMsgId(e.data);default:throw Pt(new Error("Cannot get message id: unhandled signature policy: "+r),cr.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return i2.decode(e)}_encodeRpc(e){return i2.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case ti.StrictNoSign:if(e.from)throw Pt(new Error("StrictNoSigning: from should not be present"),cr.ERR_UNEXPECTED_FROM);if(e.signature)throw Pt(new Error("StrictNoSigning: signature should not be present"),cr.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw Pt(new Error("StrictNoSigning: key should not be present"),cr.ERR_UNEXPECTED_KEY);if(e.seqno)throw Pt(new Error("StrictNoSigning: seqno should not be present"),cr.ERR_UNEXPECTED_SEQNO);break;case ti.StrictSign:if(!e.signature)throw Pt(new Error("StrictSigning: Signing required and no signature was present"),cr.ERR_MISSING_SIGNATURE);if(!e.seqno)throw Pt(new Error("StrictSigning: Signing required and no seqno was present"),cr.ERR_MISSING_SEQNO);if(!await zI(e))throw Pt(new Error("StrictSigning: Invalid message signature"),cr.ERR_INVALID_SIGNATURE);break;default:throw Pt(new Error("Cannot validate message: unhandled signature policy: "+r),cr.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case ti.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=Pi.randomSeqno(),HI(this.peerId,e);case ti.StrictNoSign:return Promise.resolve(e);default:throw Pt(new Error("Cannot build message: unhandled signature policy: "+r),cr.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw Pt(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw Pt(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),a=Pi.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(a),await this._publish(a)}_publish(e){throw Pt(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};Ko.utils=Pi;Ko.SignaturePolicy=ti;n2.exports=Ko});var a2=E(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.createGossipRpc=void 0;function jI(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}Fo.createGossipRpc=jI});var o2=E(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.shuffle=void 0;function WI(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}Uo.shuffle=WI});var mn=E(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.ERR_TOPIC_VALIDATOR_IGNORE=K.ERR_TOPIC_VALIDATOR_REJECT=K.TimeCacheDuration=K.GossipsubSeenTTL=K.GossipsubIWantFollowupTime=K.GossipsubMaxIHaveMessages=K.GossipsubMaxIHaveLength=K.GossipsubGraftFloodThreshold=K.GossipsubOpportunisticGraftPeers=K.GossipsubOpportunisticGraftTicks=K.GossipsubDirectConnectInitialDelay=K.GossipsubDirectConnectTicks=K.GossipsubConnectionTimeout=K.GossipsubMaxPendingConnections=K.GossipsubConnectors=K.GossipsubPruneBackoffTicks=K.GossipsubPruneBackoff=K.GossipsubPrunePeers=K.GossipsubFanoutTTL=K.GossipsubHeartbeatInterval=K.GossipsubHeartbeatInitialDelay=K.GossipsubGossipRetransmission=K.GossipsubGossipFactor=K.GossipsubDlazy=K.GossipsubHistoryGossip=K.GossipsubHistoryLength=K.GossipsubDout=K.GossipsubDscore=K.GossipsubDhi=K.GossipsubDlo=K.GossipsubD=K.GossipsubIDv11=K.GossipsubIDv10=K.FloodsubID=K.minute=K.second=void 0;K.second=1e3;K.minute=60*K.second;K.FloodsubID="/floodsub/1.0.0";K.GossipsubIDv10="/meshsub/1.0.0";K.GossipsubIDv11="/meshsub/1.1.0";K.GossipsubD=6;K.GossipsubDlo=4;K.GossipsubDhi=12;K.GossipsubDscore=4;K.GossipsubDout=2;K.GossipsubHistoryLength=5;K.GossipsubHistoryGossip=3;K.GossipsubDlazy=6;K.GossipsubGossipFactor=.25;K.GossipsubGossipRetransmission=3;K.GossipsubHeartbeatInitialDelay=100;K.GossipsubHeartbeatInterval=K.second;K.GossipsubFanoutTTL=K.minute;K.GossipsubPrunePeers=16;K.GossipsubPruneBackoff=K.minute;K.GossipsubPruneBackoffTicks=15;K.GossipsubConnectors=8;K.GossipsubMaxPendingConnections=128;K.GossipsubConnectionTimeout=30*K.second;K.GossipsubDirectConnectTicks=300;K.GossipsubDirectConnectInitialDelay=K.second;K.GossipsubOpportunisticGraftTicks=60;K.GossipsubOpportunisticGraftPeers=2;K.GossipsubGraftFloodThreshold=10*K.second;K.GossipsubMaxIHaveLength=5e3;K.GossipsubMaxIHaveMessages=10;K.GossipsubIWantFollowupTime=3*K.second;K.GossipsubSeenTTL=30*K.second;K.TimeCacheDuration=120*1e3;K.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";K.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE"});var c2=E(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.hasGossipProtocol=void 0;var u2=mn();function YI(t){return t===u2.GossipsubIDv10||t===u2.GossipsubIDv11}qo.hasGossipProtocol=YI});var f2=E(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.messageIdToString=void 0;var $I=(yt(),dt);function QI(t){return $I.toString(t,"base64")}Vo.messageIdToString=QI});var En=E(Pr=>{"use strict";var ZI=Pr&&Pr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Go=Pr&&Pr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ZI(e,t,r)};Object.defineProperty(Pr,"__esModule",{value:!0});Go(a2(),Pr);Go(o2(),Pr);Go(c2(),Pr);Go(f2(),Pr)});var l2=E(cs=>{"use strict";var XI=cs&&cs.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(cs,"__esModule",{value:!0});cs.MessageCache=void 0;var Ho=En(),h2=class{constructor(e,r,i){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let n=0;n<r;n++)this.history[n]=[];this.gossip=e,this.msgIdFn=i}put(e){return XI(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=Ho.messageIdToString(r);this.msgs.set(i,e),this.history[0].push({msgID:r,topics:e.topicIDs})})}getMsgId(e){return this.msgIdFn(e)}get(e){return this.msgs.get(Ho.messageIdToString(e))}getForPeer(e,r){let i=Ho.messageIdToString(e),n=this.msgs.get(i);if(!n)return[void 0,0];let s=this.peertx.get(i);s||(s=new Map,this.peertx.set(i,s));let a=(s.get(r)||0)+1;return s.set(r,a),[n,a]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgID);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=Ho.messageIdToString(r.msgID);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};cs.MessageCache=h2});var d2=E((p2,ua)=>{(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Pf=="function"&&typeof ua=="object"&&ua&&ua.exports&&(ua.exports=e(Qi()))})(p2,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(o){if(this.subscriptions=[],this.msgs=[],o)for(var f=Object.keys(o),u=0;u<f.length;++u)o[f[u]]!=null&&(this[f[u]]=o[f[u]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var a;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(a=["control"]),set:i.oneOfSetter(a)}),s.encode=function(f,u){if(u||(u=r.create()),f.subscriptions!=null&&f.subscriptions.length)for(var c=0;c<f.subscriptions.length;++c)n.RPC.SubOpts.encode(f.subscriptions[c],u.uint32(10).fork()).ldelim();if(f.msgs!=null&&f.msgs.length)for(var c=0;c<f.msgs.length;++c)n.RPC.Message.encode(f.msgs[c],u.uint32(18).fork()).ldelim();return f.control!=null&&Object.hasOwnProperty.call(f,"control")&&n.RPC.ControlMessage.encode(f.control,u.uint32(26).fork()).ldelim(),u},s.decode=function(f,u){f instanceof e||(f=e.create(f));for(var c=u===void 0?f.len:f.pos+u,h=new n.RPC;f.pos<c;){var l=f.uint32();switch(l>>>3){case 1:h.subscriptions&&h.subscriptions.length||(h.subscriptions=[]),h.subscriptions.push(n.RPC.SubOpts.decode(f,f.uint32()));break;case 2:h.msgs&&h.msgs.length||(h.msgs=[]),h.msgs.push(n.RPC.Message.decode(f,f.uint32()));break;case 3:h.control=n.RPC.ControlMessage.decode(f,f.uint32());break;default:f.skipType(l&7);break}}return h},s.fromObject=function(f){if(f instanceof n.RPC)return f;var u=new n.RPC;if(f.subscriptions){if(!Array.isArray(f.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var c=0;c<f.subscriptions.length;++c){if(typeof f.subscriptions[c]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[c]=n.RPC.SubOpts.fromObject(f.subscriptions[c])}}if(f.msgs){if(!Array.isArray(f.msgs))throw TypeError(".RPC.msgs: array expected");u.msgs=[];for(var c=0;c<f.msgs.length;++c){if(typeof f.msgs[c]!="object")throw TypeError(".RPC.msgs: object expected");u.msgs[c]=n.RPC.Message.fromObject(f.msgs[c])}}if(f.control!=null){if(typeof f.control!="object")throw TypeError(".RPC.control: object expected");u.control=n.RPC.ControlMessage.fromObject(f.control)}return u},s.toObject=function(f,u){u||(u={});var c={};if((u.arrays||u.defaults)&&(c.subscriptions=[],c.msgs=[]),f.subscriptions&&f.subscriptions.length){c.subscriptions=[];for(var h=0;h<f.subscriptions.length;++h)c.subscriptions[h]=n.RPC.SubOpts.toObject(f.subscriptions[h],u)}if(f.msgs&&f.msgs.length){c.msgs=[];for(var h=0;h<f.msgs.length;++h)c.msgs[h]=n.RPC.Message.toObject(f.msgs[h],u)}return f.control!=null&&f.hasOwnProperty("control")&&(c.control=n.RPC.ControlMessage.toObject(f.control,u),u.oneofs&&(c._control="control")),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.subscribe=null,o.prototype.topicID=null;var f;return Object.defineProperty(o.prototype,"_subscribe",{get:i.oneOfGetter(f=["subscribe"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.subscribe!=null&&Object.hasOwnProperty.call(c,"subscribe")&&h.uint32(8).bool(c.subscribe),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(18).string(c.topicID),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.SubOpts;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.subscribe=c.bool();break;case 2:d.topicID=c.string();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.SubOpts)return c;var h=new n.RPC.SubOpts;return c.subscribe!=null&&(h.subscribe=Boolean(c.subscribe)),c.topicID!=null&&(h.topicID=String(c.topicID)),h},o.toObject=function(c,h){h||(h={});var l={};return c.subscribe!=null&&c.hasOwnProperty("subscribe")&&(l.subscribe=c.subscribe,h.oneofs&&(l._subscribe="subscribe")),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.Message=function(){function o(u){if(this.topicIDs=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.from=null,o.prototype.data=null,o.prototype.seqno=null,o.prototype.topicIDs=i.emptyArray,o.prototype.signature=null,o.prototype.key=null;var f;return Object.defineProperty(o.prototype,"_from",{get:i.oneOfGetter(f=["from"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_data",{get:i.oneOfGetter(f=["data"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_seqno",{get:i.oneOfGetter(f=["seqno"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_signature",{get:i.oneOfGetter(f=["signature"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_key",{get:i.oneOfGetter(f=["key"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.from!=null&&Object.hasOwnProperty.call(c,"from")&&h.uint32(10).bytes(c.from),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&h.uint32(18).bytes(c.data),c.seqno!=null&&Object.hasOwnProperty.call(c,"seqno")&&h.uint32(26).bytes(c.seqno),c.topicIDs!=null&&c.topicIDs.length)for(var l=0;l<c.topicIDs.length;++l)h.uint32(34).string(c.topicIDs[l]);return c.signature!=null&&Object.hasOwnProperty.call(c,"signature")&&h.uint32(42).bytes(c.signature),c.key!=null&&Object.hasOwnProperty.call(c,"key")&&h.uint32(50).bytes(c.key),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.Message;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.from=c.bytes();break;case 2:d.data=c.bytes();break;case 3:d.seqno=c.bytes();break;case 4:d.topicIDs&&d.topicIDs.length||(d.topicIDs=[]),d.topicIDs.push(c.string());break;case 5:d.signature=c.bytes();break;case 6:d.key=c.bytes();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.Message)return c;var h=new n.RPC.Message;if(c.from!=null&&(typeof c.from=="string"?i.base64.decode(c.from,h.from=i.newBuffer(i.base64.length(c.from)),0):c.from.length&&(h.from=c.from)),c.data!=null&&(typeof c.data=="string"?i.base64.decode(c.data,h.data=i.newBuffer(i.base64.length(c.data)),0):c.data.length&&(h.data=c.data)),c.seqno!=null&&(typeof c.seqno=="string"?i.base64.decode(c.seqno,h.seqno=i.newBuffer(i.base64.length(c.seqno)),0):c.seqno.length&&(h.seqno=c.seqno)),c.topicIDs){if(!Array.isArray(c.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");h.topicIDs=[];for(var l=0;l<c.topicIDs.length;++l)h.topicIDs[l]=String(c.topicIDs[l])}return c.signature!=null&&(typeof c.signature=="string"?i.base64.decode(c.signature,h.signature=i.newBuffer(i.base64.length(c.signature)),0):c.signature.length&&(h.signature=c.signature)),c.key!=null&&(typeof c.key=="string"?i.base64.decode(c.key,h.key=i.newBuffer(i.base64.length(c.key)),0):c.key.length&&(h.key=c.key)),h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.topicIDs=[]),c.from!=null&&c.hasOwnProperty("from")&&(l.from=h.bytes===String?i.base64.encode(c.from,0,c.from.length):h.bytes===Array?Array.prototype.slice.call(c.from):c.from,h.oneofs&&(l._from="from")),c.data!=null&&c.hasOwnProperty("data")&&(l.data=h.bytes===String?i.base64.encode(c.data,0,c.data.length):h.bytes===Array?Array.prototype.slice.call(c.data):c.data,h.oneofs&&(l._data="data")),c.seqno!=null&&c.hasOwnProperty("seqno")&&(l.seqno=h.bytes===String?i.base64.encode(c.seqno,0,c.seqno.length):h.bytes===Array?Array.prototype.slice.call(c.seqno):c.seqno,h.oneofs&&(l._seqno="seqno")),c.topicIDs&&c.topicIDs.length){l.topicIDs=[];for(var d=0;d<c.topicIDs.length;++d)l.topicIDs[d]=c.topicIDs[d]}return c.signature!=null&&c.hasOwnProperty("signature")&&(l.signature=h.bytes===String?i.base64.encode(c.signature,0,c.signature.length):h.bytes===Array?Array.prototype.slice.call(c.signature):c.signature,h.oneofs&&(l._signature="signature")),c.key!=null&&c.hasOwnProperty("key")&&(l.key=h.bytes===String?i.base64.encode(c.key,0,c.key.length):h.bytes===Array?Array.prototype.slice.call(c.key):c.key,h.oneofs&&(l._key="key")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlMessage=function(){function o(f){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],f)for(var u=Object.keys(f),c=0;c<u.length;++c)f[u[c]]!=null&&(this[u[c]]=f[u[c]])}return o.prototype.ihave=i.emptyArray,o.prototype.iwant=i.emptyArray,o.prototype.graft=i.emptyArray,o.prototype.prune=i.emptyArray,o.encode=function(u,c){if(c||(c=r.create()),u.ihave!=null&&u.ihave.length)for(var h=0;h<u.ihave.length;++h)n.RPC.ControlIHave.encode(u.ihave[h],c.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var h=0;h<u.iwant.length;++h)n.RPC.ControlIWant.encode(u.iwant[h],c.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var h=0;h<u.graft.length;++h)n.RPC.ControlGraft.encode(u.graft[h],c.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var h=0;h<u.prune.length;++h)n.RPC.ControlPrune.encode(u.prune[h],c.uint32(34).fork()).ldelim();return c},o.decode=function(u,c){u instanceof e||(u=e.create(u));for(var h=c===void 0?u.len:u.pos+c,l=new n.RPC.ControlMessage;u.pos<h;){var d=u.uint32();switch(d>>>3){case 1:l.ihave&&l.ihave.length||(l.ihave=[]),l.ihave.push(n.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:l.iwant&&l.iwant.length||(l.iwant=[]),l.iwant.push(n.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:l.graft&&l.graft.length||(l.graft=[]),l.graft.push(n.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:l.prune&&l.prune.length||(l.prune=[]),l.prune.push(n.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(d&7);break}}return l},o.fromObject=function(u){if(u instanceof n.RPC.ControlMessage)return u;var c=new n.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");c.ihave=[];for(var h=0;h<u.ihave.length;++h){if(typeof u.ihave[h]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");c.ihave[h]=n.RPC.ControlIHave.fromObject(u.ihave[h])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");c.iwant=[];for(var h=0;h<u.iwant.length;++h){if(typeof u.iwant[h]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");c.iwant[h]=n.RPC.ControlIWant.fromObject(u.iwant[h])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");c.graft=[];for(var h=0;h<u.graft.length;++h){if(typeof u.graft[h]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");c.graft[h]=n.RPC.ControlGraft.fromObject(u.graft[h])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");c.prune=[];for(var h=0;h<u.prune.length;++h){if(typeof u.prune[h]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");c.prune[h]=n.RPC.ControlPrune.fromObject(u.prune[h])}}return c},o.toObject=function(u,c){c||(c={});var h={};if((c.arrays||c.defaults)&&(h.ihave=[],h.iwant=[],h.graft=[],h.prune=[]),u.ihave&&u.ihave.length){h.ihave=[];for(var l=0;l<u.ihave.length;++l)h.ihave[l]=n.RPC.ControlIHave.toObject(u.ihave[l],c)}if(u.iwant&&u.iwant.length){h.iwant=[];for(var l=0;l<u.iwant.length;++l)h.iwant[l]=n.RPC.ControlIWant.toObject(u.iwant[l],c)}if(u.graft&&u.graft.length){h.graft=[];for(var l=0;l<u.graft.length;++l)h.graft[l]=n.RPC.ControlGraft.toObject(u.graft[l],c)}if(u.prune&&u.prune.length){h.prune=[];for(var l=0;l<u.prune.length;++l)h.prune[l]=n.RPC.ControlPrune.toObject(u.prune[l],c)}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIHave=function(){function o(u){if(this.messageIDs=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null,o.prototype.messageIDs=i.emptyArray;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),c.messageIDs!=null&&c.messageIDs.length)for(var l=0;l<c.messageIDs.length;++l)h.uint32(18).bytes(c.messageIDs[l]);return h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlIHave;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;case 2:d.messageIDs&&d.messageIDs.length||(d.messageIDs=[]),d.messageIDs.push(c.bytes());break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlIHave)return c;var h=new n.RPC.ControlIHave;if(c.topicID!=null&&(h.topicID=String(c.topicID)),c.messageIDs){if(!Array.isArray(c.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");h.messageIDs=[];for(var l=0;l<c.messageIDs.length;++l)typeof c.messageIDs[l]=="string"?i.base64.decode(c.messageIDs[l],h.messageIDs[l]=i.newBuffer(i.base64.length(c.messageIDs[l])),0):c.messageIDs[l].length&&(h.messageIDs[l]=c.messageIDs[l])}return h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.messageIDs=[]),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),c.messageIDs&&c.messageIDs.length){l.messageIDs=[];for(var d=0;d<c.messageIDs.length;++d)l.messageIDs[d]=h.bytes===String?i.base64.encode(c.messageIDs[d],0,c.messageIDs[d].length):h.bytes===Array?Array.prototype.slice.call(c.messageIDs[d]):c.messageIDs[d]}return l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIWant=function(){function o(f){if(this.messageIDs=[],f)for(var u=Object.keys(f),c=0;c<u.length;++c)f[u[c]]!=null&&(this[u[c]]=f[u[c]])}return o.prototype.messageIDs=i.emptyArray,o.encode=function(u,c){if(c||(c=r.create()),u.messageIDs!=null&&u.messageIDs.length)for(var h=0;h<u.messageIDs.length;++h)c.uint32(10).bytes(u.messageIDs[h]);return c},o.decode=function(u,c){u instanceof e||(u=e.create(u));for(var h=c===void 0?u.len:u.pos+c,l=new n.RPC.ControlIWant;u.pos<h;){var d=u.uint32();switch(d>>>3){case 1:l.messageIDs&&l.messageIDs.length||(l.messageIDs=[]),l.messageIDs.push(u.bytes());break;default:u.skipType(d&7);break}}return l},o.fromObject=function(u){if(u instanceof n.RPC.ControlIWant)return u;var c=new n.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");c.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)typeof u.messageIDs[h]=="string"?i.base64.decode(u.messageIDs[h],c.messageIDs[h]=i.newBuffer(i.base64.length(u.messageIDs[h])),0):u.messageIDs[h].length&&(c.messageIDs[h]=u.messageIDs[h])}return c},o.toObject=function(u,c){c||(c={});var h={};if((c.arrays||c.defaults)&&(h.messageIDs=[]),u.messageIDs&&u.messageIDs.length){h.messageIDs=[];for(var l=0;l<u.messageIDs.length;++l)h.messageIDs[l]=c.bytes===String?i.base64.encode(u.messageIDs[l],0,u.messageIDs[l].length):c.bytes===Array?Array.prototype.slice.call(u.messageIDs[l]):u.messageIDs[l]}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlGraft=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlGraft;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlGraft)return c;var h=new n.RPC.ControlGraft;return c.topicID!=null&&(h.topicID=String(c.topicID)),h},o.toObject=function(c,h){h||(h={});var l={};return c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlPrune=function(){function o(u){if(this.peers=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null,o.prototype.peers=i.emptyArray,o.prototype.backoff=null;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_backoff",{get:i.oneOfGetter(f=["backoff"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),c.peers!=null&&c.peers.length)for(var l=0;l<c.peers.length;++l)n.RPC.PeerInfo.encode(c.peers[l],h.uint32(18).fork()).ldelim();return c.backoff!=null&&Object.hasOwnProperty.call(c,"backoff")&&h.uint32(24).uint64(c.backoff),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlPrune;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;case 2:d.peers&&d.peers.length||(d.peers=[]),d.peers.push(n.RPC.PeerInfo.decode(c,c.uint32()));break;case 3:d.backoff=c.uint64();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlPrune)return c;var h=new n.RPC.ControlPrune;if(c.topicID!=null&&(h.topicID=String(c.topicID)),c.peers){if(!Array.isArray(c.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");h.peers=[];for(var l=0;l<c.peers.length;++l){if(typeof c.peers[l]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");h.peers[l]=n.RPC.PeerInfo.fromObject(c.peers[l])}}return c.backoff!=null&&(i.Long?(h.backoff=i.Long.fromValue(c.backoff)).unsigned=!0:typeof c.backoff=="string"?h.backoff=parseInt(c.backoff,10):typeof c.backoff=="number"?h.backoff=c.backoff:typeof c.backoff=="object"&&(h.backoff=new i.LongBits(c.backoff.low>>>0,c.backoff.high>>>0).toNumber(!0))),h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.peers=[]),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),c.peers&&c.peers.length){l.peers=[];for(var d=0;d<c.peers.length;++d)l.peers[d]=n.RPC.PeerInfo.toObject(c.peers[d],h)}return c.backoff!=null&&c.hasOwnProperty("backoff")&&(typeof c.backoff=="number"?l.backoff=h.longs===String?String(c.backoff):c.backoff:l.backoff=h.longs===String?i.Long.prototype.toString.call(c.backoff):h.longs===Number?new i.LongBits(c.backoff.low>>>0,c.backoff.high>>>0).toNumber(!0):c.backoff,h.oneofs&&(l._backoff="backoff")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.PeerInfo=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.peerID=null,o.prototype.signedPeerRecord=null;var f;return Object.defineProperty(o.prototype,"_peerID",{get:i.oneOfGetter(f=["peerID"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_signedPeerRecord",{get:i.oneOfGetter(f=["signedPeerRecord"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.peerID!=null&&Object.hasOwnProperty.call(c,"peerID")&&h.uint32(10).bytes(c.peerID),c.signedPeerRecord!=null&&Object.hasOwnProperty.call(c,"signedPeerRecord")&&h.uint32(18).bytes(c.signedPeerRecord),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.PeerInfo;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.peerID=c.bytes();break;case 2:d.signedPeerRecord=c.bytes();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.PeerInfo)return c;var h=new n.RPC.PeerInfo;return c.peerID!=null&&(typeof c.peerID=="string"?i.base64.decode(c.peerID,h.peerID=i.newBuffer(i.base64.length(c.peerID)),0):c.peerID.length&&(h.peerID=c.peerID)),c.signedPeerRecord!=null&&(typeof c.signedPeerRecord=="string"?i.base64.decode(c.signedPeerRecord,h.signedPeerRecord=i.newBuffer(i.base64.length(c.signedPeerRecord)),0):c.signedPeerRecord.length&&(h.signedPeerRecord=c.signedPeerRecord)),h},o.toObject=function(c,h){h||(h={});var l={};return c.peerID!=null&&c.hasOwnProperty("peerID")&&(l.peerID=h.bytes===String?i.base64.encode(c.peerID,0,c.peerID.length):h.bytes===Array?Array.prototype.slice.call(c.peerID):c.peerID,h.oneofs&&(l._peerID="peerID")),c.signedPeerRecord!=null&&c.hasOwnProperty("signedPeerRecord")&&(l.signedPeerRecord=h.bytes===String?i.base64.encode(c.signedPeerRecord,0,c.signedPeerRecord.length):h.bytes===Array?Array.prototype.slice.call(c.signedPeerRecord):c.signedPeerRecord,h.oneofs&&(l._signedPeerRecord="signedPeerRecord")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var Uc=E(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.getGossipPeers=void 0;var y2=En();function JI(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(a=>{let o=t.peers.get(a);!o||y2.hasGossipProtocol(o.protocol)&&i(a)&&s.push(a)}),s=y2.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}zo.getGossipPeers=JI});var v2=E(kr=>{"use strict";var eB=kr&&kr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),tB=kr&&kr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rB=kr&&kr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eB(e,t,r);return tB(e,t),e};Object.defineProperty(kr,"__esModule",{value:!0});kr.Heartbeat=void 0;var qc=rB(mn()),jo=Uc(),iB=En(),g2=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,this.gossipsub._options.heartbeatInterval)},qc.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s,fanoutTTL:a}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let o=new Map,f=d=>{let p=o.get(d);return p===void 0&&(p=this.gossipsub.score.score(d),o.set(d,p)),p},u=new Map,c=new Map,h=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((d,p)=>{let y=v=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",v,p),this.gossipsub.score.prune(v,p),this.gossipsub._addBackoff(v,p),d.delete(v);let x=c.get(v);x?x.push(p):c.set(v,[p])},g=v=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",v,p),this.gossipsub.score.graft(v,p),d.add(v);let x=u.get(v);x?x.push(p):u.set(v,[p])};if(d.forEach(v=>{let x=f(v);x<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",v,x,p),y(v),h.set(v,!0))}),d.size<r){let v=this.gossipsub.backoff.get(p),x=e-d.size;jo.getGossipPeers(this.gossipsub,p,x,P=>!d.has(P)&&!this.gossipsub.direct.has(P)&&(!v||!v.has(P))&&f(P)>=0).forEach(g)}if(d.size>i){let v=Array.from(d);v.sort((w,P)=>f(P)-f(w)),v=v.slice(0,n).concat(iB.shuffle(v.slice(n)));let x=0;if(v.slice(0,e).forEach(w=>{this.gossipsub.outbound.get(w)&&x++}),x<s){let w=B=>{let S=v[B];for(let F=B;F>0;F--)v[F]=v[F-1];v[0]=S};if(x>0){let B=x;for(let S=1;S<e&&B>0;S++)this.gossipsub.outbound.get(v[S])&&(w(S),B--)}let P=e-x;for(let B=e;B<v.length&&P>0;B++)this.gossipsub.outbound.get(v[B])&&(w(B),P--)}v.slice(e).forEach(y)}if(d.size>=r){let v=0;if(d.forEach(x=>{this.gossipsub.outbound.get(x)&&v++}),v<s){let x=s-v,w=this.gossipsub.backoff.get(p);jo.getGossipPeers(this.gossipsub,p,x,P=>!d.has(P)&&!this.gossipsub.direct.has(P)&&(!w||!w.has(P))&&f(P)>=0).forEach(g)}}if(this.gossipsub.heartbeatTicks%qc.GossipsubOpportunisticGraftTicks==0&&d.size>1){let v=Array.from(d).sort((P,B)=>f(P)-f(B)),x=Math.floor(d.size/2),w=f(v[x]);if(w<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let P=this.gossipsub.backoff.get(p);jo.getGossipPeers(this.gossipsub,p,qc.GossipsubOpportunisticGraftPeers,S=>d.has(S)&&!this.gossipsub.direct.has(S)&&(!P||!P.has(S))&&f(S)>w).forEach(S=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",S,p),g(S)})}}this.gossipsub._emitGossip(p,d)});let l=this.gossipsub._now();this.gossipsub.lastpub.forEach((d,p)=>{d+a<l&&(this.gossipsub.fanout.delete(p),this.gossipsub.lastpub.delete(p))}),this.gossipsub.fanout.forEach((d,p)=>{let y=this.gossipsub.topics.get(p);if(d.forEach(g=>{(!y.has(g)||f(g)<this.gossipsub._options.scoreThresholds.publishThreshold)&&d.delete(g)}),d.size<e){let g=e-d.size;jo.getGossipPeers(this.gossipsub,p,g,x=>!d.has(x)&&!this.gossipsub.direct.has(x)&&f(x)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(x=>{d.add(x)})}this.gossipsub._emitGossip(p,d)}),this.gossipsub._sendGraftPrune(u,c,h),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};kr.Heartbeat=g2});var Vc=E(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.ERR_INVALID_PEER_SCORE_THRESHOLDS=fs.ERR_INVALID_PEER_SCORE_PARAMS=void 0;fs.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";fs.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var Gc=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.validateTopicScoreParams=mt.validatePeerScoreParams=mt.createTopicScoreParams=mt.createPeerScoreParams=mt.defaultTopicScoreParams=mt.defaultPeerScoreParams=void 0;var Ae=Vc(),Ce=Oe();mt.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};mt.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function nB(t={}){return Object.assign(Object.assign(Object.assign({},mt.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=x2(i),e),{}):{}})}mt.createPeerScoreParams=nB;function x2(t={}){return Object.assign(Object.assign({},mt.defaultTopicScoreParams),t)}mt.createTopicScoreParams=x2;function sB(t){for(let[e,r]of Object.entries(t.topics))try{b2(r)}catch(i){throw Ce(new Error(`invalid score parameters for topic ${e}: ${i.message}`),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw Ce(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw Ce(new Error("missing application specific score function"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw Ce(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw Ce(new Error("invalid IPColocationFactorThreshold; must be at least 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw Ce(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw Ce(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw Ce(new Error("invalid DecayInterval; must be at least 1s"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw Ce(new Error("invalid DecayToZero; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}mt.validatePeerScoreParams=sB;function b2(t){if(t.topicWeight<0)throw Ce(new Error("invalid topic weight; must be >= 0"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw Ce(new Error("invalid TimeInMeshQuantum; must be non zero"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw Ce(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw Ce(new Error("invalid TimeInMeshQuantum; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw Ce(new Error("invalid TimeInMeshCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw Ce(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw Ce(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw Ce(new Error("invalid FirstMessageDeliveriesCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw Ce(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw Ce(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw Ce(new Error("invalid MeshMessageDeliveriesCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw Ce(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw Ce(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw Ce(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw Ce(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw Ce(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw Ce(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw Ce(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}mt.validateTopicScoreParams=b2});var m2=E(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.validatePeerScoreThresholds=ri.createPeerScoreThresholds=ri.defaultPeerScoreThresholds=void 0;var ca=Vc(),fa=Oe();ri.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function aB(t={}){return Object.assign(Object.assign({},ri.defaultPeerScoreThresholds),t)}ri.createPeerScoreThresholds=aB;function oB(t){if(t.gossipThreshold>0)throw fa(new Error("invalid gossip threshold; it must be <= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw fa(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw fa(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw fa(new Error("invalid accept PX threshold; it must be >= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw fa(new Error("invalid opportunistic grafting threshold; it must be >= 0"),ca.ERR_INVALID_PEER_SCORE_THRESHOLDS)}ri.validatePeerScoreThresholds=oB});var E2=E(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.ensureTopicStats=ki.createTopicStats=ki.createPeerStats=void 0;function uB(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=Hc(i),e),{}):{}})}ki.createPeerStats=uB;function Hc(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}ki.createTopicStats=Hc;function cB(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=Hc(),i}ki.ensureTopicStats=cB});var w2=E(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.computeScore=void 0;function fB(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([o,f])=>{let u=r.topics[o];if(!u)return;let c=0;if(f.inMesh){let p=f.meshTime/u.timeInMeshQuantum;p>u.timeInMeshCap&&(p=u.timeInMeshCap),c+=p*u.timeInMeshWeight}if(c+=f.firstMessageDeliveries*u.firstMessageDeliveriesWeight,f.meshMessageDeliveriesActive&&f.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){let p=u.meshMessageDeliveriesThreshold-f.meshMessageDeliveries;c+=p*p*u.meshMessageDeliveriesWeight}c+=f.meshFailurePenalty*u.meshFailurePenaltyWeight,c+=f.invalidMessageDeliveries*f.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,n+=c*u.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(o=>{if(r.IPColocationFactorWhitelist.has(o))return;let f=i.get(o),u=f?f.size:0;if(u>r.IPColocationFactorThreshold){let c=u-r.IPColocationFactorThreshold;n+=c*c*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}Wo.computeScore=fB});var _2=E((Z5,S2)=>{"use strict";function ze(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}ze.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};ze.prototype.get=function(e){return this.peekAt(e)};ze.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ze.prototype.peekFront=function(){return this.peek()};ze.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ze.prototype,"length",{get:function(){return this.size()}});ze.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ze.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};ze.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(e<i/2){for(a=e;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-e;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};ze.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var f;for(n=new Array(r),f=0;f<r;f++)n[f]=this._list[this._head+i+f&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===a){for(this._tail=this._tail-r+o&this._capacityMask,f=r;f>0;f--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+o&this._capacityMask,f=r-1;f>0;f--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+e+r+o&this._capacityMask,f=e;f>0;f--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,f=a-(r+e);f>0;f--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};ze.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,f=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);f>c;)this.unshift(arguments[--f]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var h=a.length;for(s=0;s<h;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-h+u&this._capacityMask);c<f;)this.push(arguments[c++]);for(s=0;s<h;s++)this.push(a[s])}return o}else return this.remove(i,r)}};ze.prototype.clear=function(){this._head=0,this._tail=0};ze.prototype.isEmpty=function(){return this._head===this._tail};ze.prototype.toArray=function(){return this._copyArray(!1)};ze.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};ze.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};ze.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};ze.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};S2.exports=ze});var A2=E(ii=>{"use strict";var hB=ii&&ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ii,"__esModule",{value:!0});ii.MessageDeliveries=ii.DeliveryRecordStatus=void 0;var lB=mn(),pB=hB(_2()),dB=En(),I2;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(I2=ii.DeliveryRecordStatus||(ii.DeliveryRecordStatus={}));var B2=class{constructor(){this.records=new Map,this.queue=new pB.default}ensureRecord(e){let r=dB.messageIdToString(e),i=this.records.get(r);if(i)return i;i={status:I2.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(r,i);let n={msgId:r,expire:Date.now()+lB.TimeCacheDuration};return this.queue.push(n),i}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};ii.MessageDeliveries=B2});var T2=E(Ni=>{"use strict";var Yo=Ni&&Ni.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})},yB=Ni&&Ni.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.PeerScore=void 0;var gB=Gc(),hs=E2(),vB=w2(),fr=A2(),xB=mn(),bB=yB(us()),mB=Ta(),EB=La(),{ERR_INVALID_SIGNATURE:wB,ERR_MISSING_SIGNATURE:SB}=EB.codes,ls=mB("libp2p:gossipsub:score"),C2=class{constructor(e,r,i){gB.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.deliveryRecords=new fr.MessageDeliveries,this.msgId=i}start(){if(this._backgroundInterval){ls("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),ls("started")}stop(){if(!this._backgroundInterval){ls("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),ls("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,a])=>{let o=this.params.topics[s];!o||(a.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,a.firstMessageDeliveries<r&&(a.firstMessageDeliveries=0),a.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,a.meshMessageDeliveries<r&&(a.meshMessageDeliveries=0),a.meshFailurePenalty*=o.meshFailurePenaltyDecay,a.meshFailurePenalty<r&&(a.meshFailurePenalty=0),a.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,a.invalidMessageDeliveries<r&&(a.invalidMessageDeliveries=0),a.inMesh&&(a.meshTime=e-a.graftTime,a.meshTime>o.meshMessageDeliveriesActivation&&(a.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0)})}score(e){let r=this.peerStats.get(e);return r?vB.computeScore(e,r,this.params,this.peerIPs):0}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r)}addPeer(e){let r=hs.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=hs.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=hs.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1}validateMessage(e){return Yo(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(yield this.msgId(e))})}deliverMessage(e){return Yo(this,void 0,void 0,function*(){let r=e.receivedFrom;this._markFirstMessageDelivery(r,e);let i=this.deliveryRecords.ensureRecord(yield this.msgId(e)),n=Date.now();if(i.status!==fr.DeliveryRecordStatus.unknown){ls("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,n-i.firstSeen,fr.DeliveryRecordStatus[i.status]);return}i.status=fr.DeliveryRecordStatus.valid,i.validated=n,i.peers.forEach(s=>{s!==r&&this._markDuplicateMessageDelivery(s,e)})})}rejectMessage(e,r){return Yo(this,void 0,void 0,function*(){let i=e.receivedFrom;switch(r){case SB:case wB:this._markInvalidMessageDelivery(i,e);return}let n=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(n.status!==fr.DeliveryRecordStatus.unknown){ls("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",i,Date.now()-n.firstSeen,fr.DeliveryRecordStatus[n.status]);return}switch(r){case xB.ERR_TOPIC_VALIDATOR_IGNORE:n.status=fr.DeliveryRecordStatus.ignored;return}n.status=fr.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(i,e),n.peers.forEach(s=>{this._markInvalidMessageDelivery(s,e)})})}duplicateMessage(e){return Yo(this,void 0,void 0,function*(){let r=e.receivedFrom,i=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(!i.peers.has(r))switch(i.status){case fr.DeliveryRecordStatus.unknown:i.peers.add(r);break;case fr.DeliveryRecordStatus.valid:i.peers.add(r),this._markDuplicateMessageDelivery(r,e,i.validated);break;case fr.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=hs.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)})}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=hs.ensureTopicStats(n,i,this.params);if(!s)return;let a=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>a&&(s.firstMessageDeliveries=a),!!s.inMesh&&(a=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>a&&(s.meshMessageDeliveries=a))})}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(a=>{let o=hs.ensureTopicStats(a,n,this.params);if(!o||!o.inMesh)return;let f=this.params.topics[a];if(i&&s>i+f.meshMessageDeliveriesWindow)return;let u=f.meshMessageDeliveriesCap;o.meshMessageDeliveries+=1,o.meshMessageDeliveries>u&&(o.meshMessageDeliveries=u)})}_getIPs(e){return this._connectionManager.getAll(bB.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let a of i)if(n===a)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let a of r)if(n===a)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i})}};Ni.PeerScore=C2});var R2=E(ni=>{"use strict";var _B=ni&&ni.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zc=ni&&ni.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_B(e,t,r)};Object.defineProperty(ni,"__esModule",{value:!0});zc(Gc(),ni);zc(m2(),ni);zc(T2(),ni)});var k2=E(ps=>{"use strict";var D2=ps&&ps.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(ps,"__esModule",{value:!0});ps.IWantTracer=void 0;var IB=mn(),jc=En(),BB=La(),{ERR_INVALID_SIGNATURE:AB,ERR_MISSING_SIGNATURE:CB}=BB.codes,P2=class{constructor(e){this.getMsgId=e,this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=jc.messageIdToString(n),a=this.promises.get(s);a||(a=new Map,this.promises.set(s,a)),a.has(e)||a.set(e,Date.now()+IB.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,a)=>{s<e&&(r.set(a,(r.get(a)||0)+1),i.delete(a))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return D2(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=jc.messageIdToString(r);this.promises.delete(i)})}rejectMessage(e,r){return D2(this,void 0,void 0,function*(){switch(r){case AB:case CB:return}let i=yield this.getMsgId(e),n=jc.messageIdToString(i);this.promises.delete(n)})}clear(){this.promises.clear()}};ps.IWantTracer=P2});var K2=E((rD,M2)=>{var N2="Expected a function",O2=0/0,TB="[object Symbol]",RB=/^\s+|\s+$/g,DB=/^[-+]0x[0-9a-f]+$/i,PB=/^0b[01]+$/i,kB=/^0o[0-7]+$/i,NB=parseInt,OB=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,LB=typeof self=="object"&&self&&self.Object===Object&&self,MB=OB||LB||Function("return this")(),KB=Object.prototype,FB=KB.toString,UB=Math.max,qB=Math.min,Wc=function(){return MB.Date.now()};function VB(t,e,r){var i,n,s,a,o,f,u=0,c=!1,h=!1,l=!0;if(typeof t!="function")throw new TypeError(N2);e=L2(e)||0,$o(r)&&(c=!!r.leading,h="maxWait"in r,s=h?UB(L2(r.maxWait)||0,e):s,l="trailing"in r?!!r.trailing:l);function d(S){var F=i,z=n;return i=n=void 0,u=S,a=t.apply(z,F),a}function p(S){return u=S,o=setTimeout(v,e),c?d(S):a}function y(S){var F=S-f,z=S-u,ee=e-F;return h?qB(ee,s-z):ee}function g(S){var F=S-f,z=S-u;return f===void 0||F>=e||F<0||h&&z>=s}function v(){var S=Wc();if(g(S))return x(S);o=setTimeout(v,y(S))}function x(S){return o=void 0,l&&i?d(S):(i=n=void 0,a)}function w(){o!==void 0&&clearTimeout(o),u=0,i=f=n=o=void 0}function P(){return o===void 0?a:x(Wc())}function B(){var S=Wc(),F=g(S);if(i=arguments,n=this,f=S,F){if(o===void 0)return p(f);if(h)return o=setTimeout(v,e),d(f)}return o===void 0&&(o=setTimeout(v,e)),a}return B.cancel=w,B.flush=P,B}function GB(t,e,r){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(N2);return $o(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),VB(t,e,{leading:i,maxWait:e,trailing:n})}function $o(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function HB(t){return!!t&&typeof t=="object"}function zB(t){return typeof t=="symbol"||HB(t)&&FB.call(t)==TB}function L2(t){if(typeof t=="number")return t;if(zB(t))return O2;if($o(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$o(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(RB,"");var r=PB.test(t);return r||kB.test(t)?NB(t.slice(2),r?2:8):DB.test(t)?O2:+t}M2.exports=GB});var q2=E((F2,U2)=>{"use strict";var jB=K2();F2=U2.exports=Yc;function Yc(t){if(!(this instanceof Yc))return new Yc(t);t=t||{};let e=t.validity||30,r=new Map,i=jB(()=>{r.forEach((n,s)=>{let a=n.validity||e;WB(n.timestamp)>a&&r.delete(s)})},200);this.put=(n,s,a)=>{this.has(n)||r.set(n,{value:s,timestamp:new Date,validity:a}),i()},this.get=n=>{if(r.has(n))return r.get(n).value;throw new Error("key does not exist")},this.has=n=>r.has(n)}function WB(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});var Zo=E((iD,G2)=>{"use strict";var wn=Qi(),Qo=wn.Reader,V2=wn.Writer,Et=wn.util,Wt=wn.roots["libp2p-crypto-keys"]||(wn.roots["libp2p-crypto-keys"]={});Wt.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Wt.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Et.newBuffer([]),t.encode=function(r,i){return i||(i=V2.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof Qo||(r=Qo.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Wt.PublicKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw Et.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Et.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Wt.PublicKey)return r;var i=new Wt.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Et.base64.decode(r.Data,i.Data=Et.newBuffer(Et.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Et.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Wt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Et.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,wn.util.toJSONOptions)},t}();Wt.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Et.newBuffer([]),t.encode=function(r,i){return i||(i=V2.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof Qo||(r=Qo.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Wt.PrivateKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw Et.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Et.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Wt.PrivateKey)return r;var i=new Wt.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Et.base64.decode(r.Data,i.Data=Et.newBuffer(Et.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Et.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Wt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Et.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,wn.util.toJSONOptions)},t}();G2.exports=Wt});var _e=E((nD,H2)=>{H2.exports={options:{usePureJavaScript:!1}}});var W2=E((sD,j2)=>{var $c={};j2.exports=$c;var z2={};$c.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=YB(t,e);else{var n=0,s=e.length,a=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var f=0,u=t[n];f<o.length;++f)u+=o[f]<<8,o[f]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=a;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var c=new RegExp(".{1,"+r+"}","g");i=i.match(c).join(`\r
`)}return i};$c.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=z2[e];if(!r){r=z2[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),a=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var f=0,u=o;f<a.length;++f)u+=a[f]*n,a[f]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;t[c]===s&&c<t.length-1;++c)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function YB(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%i,o=o/i|0;for(;o>0;)s.push(o%i),o=o/i|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=n;for(r=s.length-1;r>=0;--r)f+=e[s[r]];return f}});var Qe=E((aD,Z2)=>{var Y2=_e(),$2=W2(),m=Z2.exports=Y2.util=Y2.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(o){return setImmediate(o)};return}if(m.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var a=o,t="forge.setImmediate",e=[];m.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=m.setImmediate;m.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),s(f)):(e.push(f),e.length===1&&n.setAttribute("a",i=!i))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self=="undefined"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function ha(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=Qc;function Qc(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Qc||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=Qc;var $B=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>$B&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){ha(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){ha(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function QB(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),i=m.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=QB;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){ha(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return ha(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){ha(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var i="",n="",s="",a=0,o=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(i+=s,s="",o=0),s+=String.fromCharCode(n),++o;return i+=s,i};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Li=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Q2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.length;)n=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=Oi.charAt(n>>2),r+=Oi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Oi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Oi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,a=0;a<t.length;)r=Li[t.charCodeAt(a++)-43],i=Li[t.charCodeAt(a++)-43],n=Li[t.charCodeAt(a++)-43],s=Li[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:$2.encode,decode:$2.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};m.binary.base64.encode=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.byteLength;)n=t[o++],s=t[o++],a=t[o++],r+=Oi.charAt(n>>2),r+=Oi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Oi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Oi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};m.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,a,o,f=0,u=r;f<t.length;)n=Li[t.charCodeAt(f++)-43],s=Li[t.charCodeAt(f++)-43],a=Li[t.charCodeAt(f++)-43],o=Li[t.charCodeAt(f++)-43],i[u++]=n<<2|s>>4,a!==64&&(i[u++]=(s&15)<<4|a>>2,o!==64&&(i[u++]=(a&3)<<6|o));return e?u-r:i.subarray(0,u)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,Q2,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,Q2,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o),s+=2;return e?s-r:i};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};m.inflate=function(t,e,r){var i=t.inflate(m.encode64(e)).rval;return i===null?null:m.decode64(i)};var Zc=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},Xc=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},ZB=function(t,e,r,i){var n=Xc(t,e);n===null&&(n={}),n[r]=i,Zc(t,e,n)},XB=function(t,e,r){var i=Xc(t,e);return i!==null&&(i=r in i?i[r]:null),i},JB=function(t,e,r){var i=Xc(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),Zc(t,e,i)}},eA=function(t,e){Zc(t,e,null)},Xo=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,a=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(f){a=f}if(s)break}if(!s)throw a;return i};m.setItem=function(t,e,r,i,n){Xo(ZB,arguments,n)};m.getItem=function(t,e,r,i){return Xo(XB,arguments,i)};m.removeItem=function(t,e,r,i){Xo(JB,arguments,i)};m.clearItems=function(t,e,r){Xo(eA,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,i,n=0,s=[],a=0;r=e.exec(t);){i=t.substring(a,e.lastIndex-2),i.length>0&&s.push(i),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};m.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=i===void 0?".":i,f=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(n-u).toFixed(s).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=m.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=m.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=m.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var f=r[i];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker=="undefined")return m.cores=1,e(null,m.cores);if(typeof Blob=="undefined")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(a,o,f){if(o===0){var u=Math.floor(a.reduce(function(c,h){return c+h},0)/a.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,m.cores)}n(f,function(c,h){a.push(s(f,h)),i(a,o-1,f)})}function n(a,o){for(var f=[],u=[],c=0;c<a;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===a){for(var d=0;d<a;++d)f[d].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<a;++c)f[c].postMessage(c)}function s(a,o){for(var f=[],u=0;u<a;++u)for(var c=o[u],h=f[u]=[],l=0;l<a;++l)if(u!==l){var d=o[l];(c.st>d.st&&c.st<d.et||d.st>c.st&&d.st<c.et)&&h.push(l)}return f.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var Jo=E((oD,X2)=>{var la=_e();la.pki=la.pki||{};var Jc=X2.exports=la.pki.oids=la.oids=la.oids||{};function M(t,e){Jc[t]=e,Jc[e]=t}function xe(t,e){Jc[t]=e}M("1.2.840.113549.1.1.1","rsaEncryption");M("1.2.840.113549.1.1.4","md5WithRSAEncryption");M("1.2.840.113549.1.1.5","sha1WithRSAEncryption");M("1.2.840.113549.1.1.7","RSAES-OAEP");M("1.2.840.113549.1.1.8","mgf1");M("1.2.840.113549.1.1.9","pSpecified");M("1.2.840.113549.1.1.10","RSASSA-PSS");M("1.2.840.113549.1.1.11","sha256WithRSAEncryption");M("1.2.840.113549.1.1.12","sha384WithRSAEncryption");M("1.2.840.113549.1.1.13","sha512WithRSAEncryption");M("1.3.101.112","EdDSA25519");M("1.2.840.10040.4.3","dsa-with-sha1");M("1.3.14.3.2.7","desCBC");M("1.3.14.3.2.26","sha1");M("1.3.14.3.2.29","sha1WithRSASignature");M("2.16.840.1.101.3.4.2.1","sha256");M("2.16.840.1.101.3.4.2.2","sha384");M("2.16.840.1.101.3.4.2.3","sha512");M("1.2.840.113549.2.5","md5");M("1.2.840.113549.1.7.1","data");M("1.2.840.113549.1.7.2","signedData");M("1.2.840.113549.1.7.3","envelopedData");M("1.2.840.113549.1.7.4","signedAndEnvelopedData");M("1.2.840.113549.1.7.5","digestedData");M("1.2.840.113549.1.7.6","encryptedData");M("1.2.840.113549.1.9.1","emailAddress");M("1.2.840.113549.1.9.2","unstructuredName");M("1.2.840.113549.1.9.3","contentType");M("1.2.840.113549.1.9.4","messageDigest");M("1.2.840.113549.1.9.5","signingTime");M("1.2.840.113549.1.9.6","counterSignature");M("1.2.840.113549.1.9.7","challengePassword");M("1.2.840.113549.1.9.8","unstructuredAddress");M("1.2.840.113549.1.9.14","extensionRequest");M("1.2.840.113549.1.9.20","friendlyName");M("1.2.840.113549.1.9.21","localKeyId");M("1.2.840.113549.1.9.22.1","x509Certificate");M("1.2.840.113549.1.12.10.1.1","keyBag");M("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");M("1.2.840.113549.1.12.10.1.3","certBag");M("1.2.840.113549.1.12.10.1.4","crlBag");M("1.2.840.113549.1.12.10.1.5","secretBag");M("1.2.840.113549.1.12.10.1.6","safeContentsBag");M("1.2.840.113549.1.5.13","pkcs5PBES2");M("1.2.840.113549.1.5.12","pkcs5PBKDF2");M("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");M("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");M("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");M("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");M("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");M("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");M("1.2.840.113549.2.7","hmacWithSHA1");M("1.2.840.113549.2.8","hmacWithSHA224");M("1.2.840.113549.2.9","hmacWithSHA256");M("1.2.840.113549.2.10","hmacWithSHA384");M("1.2.840.113549.2.11","hmacWithSHA512");M("1.2.840.113549.3.7","des-EDE3-CBC");M("2.16.840.1.101.3.4.1.2","aes128-CBC");M("2.16.840.1.101.3.4.1.22","aes192-CBC");M("2.16.840.1.101.3.4.1.42","aes256-CBC");M("2.5.4.3","commonName");M("2.5.4.4","surname");M("2.5.4.5","serialNumber");M("2.5.4.6","countryName");M("2.5.4.7","localityName");M("2.5.4.8","stateOrProvinceName");M("2.5.4.9","streetAddress");M("2.5.4.10","organizationName");M("2.5.4.11","organizationalUnitName");M("2.5.4.12","title");M("2.5.4.13","description");M("2.5.4.15","businessCategory");M("2.5.4.17","postalCode");M("2.5.4.42","givenName");M("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");M("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");M("2.16.840.1.113730.1.1","nsCertType");M("2.16.840.1.113730.1.13","nsComment");xe("2.5.29.1","authorityKeyIdentifier");xe("2.5.29.2","keyAttributes");xe("2.5.29.3","certificatePolicies");xe("2.5.29.4","keyUsageRestriction");xe("2.5.29.5","policyMapping");xe("2.5.29.6","subtreesConstraint");xe("2.5.29.7","subjectAltName");xe("2.5.29.8","issuerAltName");xe("2.5.29.9","subjectDirectoryAttributes");xe("2.5.29.10","basicConstraints");xe("2.5.29.11","nameConstraints");xe("2.5.29.12","policyConstraints");xe("2.5.29.13","basicConstraints");M("2.5.29.14","subjectKeyIdentifier");M("2.5.29.15","keyUsage");xe("2.5.29.16","privateKeyUsagePeriod");M("2.5.29.17","subjectAltName");M("2.5.29.18","issuerAltName");M("2.5.29.19","basicConstraints");xe("2.5.29.20","cRLNumber");xe("2.5.29.21","cRLReason");xe("2.5.29.22","expirationDate");xe("2.5.29.23","instructionCode");xe("2.5.29.24","invalidityDate");xe("2.5.29.25","cRLDistributionPoints");xe("2.5.29.26","issuingDistributionPoint");xe("2.5.29.27","deltaCRLIndicator");xe("2.5.29.28","issuingDistributionPoint");xe("2.5.29.29","certificateIssuer");xe("2.5.29.30","nameConstraints");M("2.5.29.31","cRLDistributionPoints");M("2.5.29.32","certificatePolicies");xe("2.5.29.33","policyMappings");xe("2.5.29.34","policyConstraints");M("2.5.29.35","authorityKeyIdentifier");xe("2.5.29.36","policyConstraints");M("2.5.29.37","extKeyUsage");xe("2.5.29.46","freshestCRL");xe("2.5.29.54","inhibitAnyPolicy");M("1.3.6.1.4.1.11129.2.4.2","timestampList");M("1.3.6.1.5.5.7.1.1","authorityInfoAccess");M("1.3.6.1.5.5.7.3.1","serverAuth");M("1.3.6.1.5.5.7.3.2","clientAuth");M("1.3.6.1.5.5.7.3.3","codeSigning");M("1.3.6.1.5.5.7.3.4","emailProtection");M("1.3.6.1.5.5.7.3.8","timeStamping")});var da=E((uD,ev)=>{var Fe=_e();Qe();Jo();var q=ev.exports=Fe.asn1=Fe.asn1||{};q.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};q.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};q.create=function(t,e,r,i,n){if(Fe.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)i[a]!==void 0&&s.push(i[a]);i=s}var o={tagClass:t,type:e,constructed:r,composed:r||Fe.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=q.copy(o)),o};q.copy=function(t,e){var r;if(Fe.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(q.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:q.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};q.equals=function(t,e,r){if(Fe.util.isArray(t)){if(!Fe.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!q.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&q.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};q.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function pa(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var tA=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;pa(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};q.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Fe.util.createBuffer(t)),e0(t,t.length(),0,e)};function e0(t,e,r,i){var n;pa(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;n=t.length();var f=tA(t,e);if(e-=n-t.length(),f!==void 0&&f>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,h,l=(s&32)==32;if(l)if(c=[],f===void 0)for(;;){if(pa(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),c.push(e0(t,e,r+1,i)),e-=n-t.length()}else for(;f>0;)n=t.length(),c.push(e0(t,f,r+1,i)),e-=n-t.length(),f-=n-t.length();if(c===void 0&&a===q.Class.UNIVERSAL&&o===q.Type.BITSTRING&&(h=t.bytes(f)),c===void 0&&i.decodeBitStrings&&a===q.Class.UNIVERSAL&&o===q.Type.BITSTRING&&f>1){var d=t.read,p=e,y=0;if(o===q.Type.BITSTRING&&(pa(t,e,1),y=t.getByte(),e--),y===0)try{n=t.length();var g={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=e0(t,e,r+1,g),x=n-t.length();e-=x,o==q.Type.BITSTRING&&x++;var w=v.tagClass;x===f&&(w===q.Class.UNIVERSAL||w===q.Class.CONTEXT_SPECIFIC)&&(c=[v])}catch(B){}c===void 0&&(t.read=d,e=p)}if(c===void 0){if(f===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===q.Type.BMPSTRING)for(c="";f>0;f-=2)pa(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var P=h===void 0?null:{bitStringContents:h};return q.create(a,o,l,c,P)}q.toDer=function(t){var e=Fe.util.createBuffer(),r=t.tagClass|t.type,i=Fe.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=q.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(q.toDer(t.value[s]))}else if(t.type===q.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===q.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var a=i.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(i),e};q.oidToDer=function(t){var e=t.split("."),r=Fe.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,a,o=2;o<e.length;++o){i=!0,n=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,i||(a|=128),n.push(a),i=!1;while(s>0);for(var f=n.length-1;f>=0;--f)r.putByte(n[f])}return r};q.derToOid=function(t){var e;typeof t=="string"&&(t=Fe.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};q.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};q.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=d*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,f),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,a,o,f)),e};q.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};q.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};q.integerToDer=function(t){var e=Fe.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};q.derToInteger=function(t){typeof t=="string"&&(t=Fe.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};q.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Fe.util.isArray(e.value))for(var s=0,a=0;n&&a<e.value.length;++a)n=e.value[a].optional||!1,t.value[s]&&(n=q.validate(t.value[s],e.value[a],r,i),n?++s:e.value[a].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var J2=/[^\\u0000-\\u00ff]/;q.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case q.Class.UNIVERSAL:i+="Universal:";break;case q.Class.APPLICATION:i+="Application:";break;case q.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case q.Class.PRIVATE:i+="Private:";break}if(t.tagClass===q.Class.UNIVERSAL)switch(i+=t.type,t.type){case q.Type.NONE:i+=" (None)";break;case q.Type.BOOLEAN:i+=" (Boolean)";break;case q.Type.INTEGER:i+=" (Integer)";break;case q.Type.BITSTRING:i+=" (Bit string)";break;case q.Type.OCTETSTRING:i+=" (Octet string)";break;case q.Type.NULL:i+=" (Null)";break;case q.Type.OID:i+=" (Object Identifier)";break;case q.Type.ODESC:i+=" (Object Descriptor)";break;case q.Type.EXTERNAL:i+=" (External or Instance of)";break;case q.Type.REAL:i+=" (Real)";break;case q.Type.ENUMERATED:i+=" (Enumerated)";break;case q.Type.EMBEDDED:i+=" (Embedded PDV)";break;case q.Type.UTF8:i+=" (UTF8)";break;case q.Type.ROID:i+=" (Relative Object Identifier)";break;case q.Type.SEQUENCE:i+=" (Sequence)";break;case q.Type.SET:i+=" (Set)";break;case q.Type.PRINTABLESTRING:i+=" (Printable String)";break;case q.Type.IA5String:i+=" (IA5String (ASCII))";break;case q.Type.UTCTIME:i+=" (UTC time)";break;case q.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case q.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=q.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));i+=n+"Sub values: "+a+o}else{if(i+=n+"Value: ",t.type===q.Type.OID){var f=q.derToOid(t.value);i+=f,Fe.pki&&Fe.pki.oids&&f in Fe.pki.oids&&(i+=" ("+Fe.pki.oids[f]+") ")}if(t.type===q.Type.INTEGER)try{i+=q.derToInteger(t.value)}catch(c){i+="0x"+Fe.util.bytesToHex(t.value)}else if(t.type===q.Type.BITSTRING){if(t.value.length>1?i+="0x"+Fe.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===q.Type.OCTETSTRING?(J2.test(t.value)||(i+="("+t.value+") "),i+="0x"+Fe.util.bytesToHex(t.value)):t.type===q.Type.UTF8?i+=Fe.util.decodeUtf8(t.value):t.type===q.Type.PRINTABLESTRING||t.type===q.Type.IA5String?i+=t.value:J2.test(t.value)?i+="0x"+Fe.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var tf=E((cD,tv)=>{var at=_e();Qe();tv.exports=at.cipher=at.cipher||{};at.cipher.algorithms=at.cipher.algorithms||{};at.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=at.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new at.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};at.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=at.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new at.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};at.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),at.cipher.algorithms[t]=e};at.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in at.cipher.algorithms?at.cipher.algorithms[t]:null};var ef=at.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};ef.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=at.util.createBuffer(),this.output=t.output||at.util.createBuffer(),this.mode.start(e)};ef.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ef.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var nf=E((fD,rv)=>{var ot=_e();Qe();ot.cipher=ot.cipher||{};var ie=rv.exports=ot.cipher.modes=ot.cipher.modes||{};ie.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.ecb.prototype.start=function(t){};ie.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};ie.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};ie.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ie.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};ie.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=t0(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ie.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};ie.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};ie.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ie.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};ie.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};ie.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=t0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};ie.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};ie.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};ie.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=t0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};ie.ofb.prototype.decrypt=ie.ofb.prototype.encrypt;ie.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};ie.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=t0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}r0(this._inBlock)};ie.ctr.prototype.decrypt=ie.ctr.prototype.encrypt;ie.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ie.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=ot.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=ot.util.createBuffer(t.additionalData):r=ot.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=ot.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(rf(i*8)))}this._inBlock=this._j0.slice(0),r0(this._inBlock),this._partialBytes=0,r=ot.util.createBuffer(r),this._aDataLength=rf(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ie.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r0(this._inBlock)};ie.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r0(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};ie.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=ot.util.createBuffer();var i=this._aDataLength.concat(rf(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ie.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};ie.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};ie.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};ie.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};ie.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),a=0;a<n;++a){var o=[0,0,0,0],f=a/i|0,u=(i-1-a%i)*e;o[f]=1<<e-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};ie.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var a=1;a<s;++a){var o=n[s],f=n[a];n[s+a]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function t0(t,e){if(typeof t=="string"&&(t=ot.util.createBuffer(t)),ot.util.isArray(t)&&t.length>4){var r=t;t=ot.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!ot.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function r0(t){t[t.length-1]=t[t.length-1]+1&4294967295}function rf(t){return[t/4294967296|0,t&4294967295]}});var uf=E((hD,av)=>{var Pe=_e();tf();nf();Qe();av.exports=Pe.aes=Pe.aes||{};Pe.aes.startEncrypting=function(t,e,r,i){var n=i0({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};Pe.aes.createEncryptionCipher=function(t,e){return i0({key:t,output:null,decrypt:!1,mode:e})};Pe.aes.startDecrypting=function(t,e,r,i){var n=i0({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};Pe.aes.createDecryptionCipher=function(t,e){return i0({key:t,output:null,decrypt:!0,mode:e})};Pe.aes.Algorithm=function(t,e){sf||nv();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return of(r._w,i,n,!1)},decrypt:function(i,n){return of(r._w,i,n,!0)}}}),r._init=!1};Pe.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Pe.util.createBuffer(e);else if(Pe.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Pe.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!Pe.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!Pe.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=sv(e,t.decrypt&&!a),this._init=!0}};Pe.aes._expandKey=function(t,e){return sf||nv(),sv(t,e)};Pe.aes._updateBlock=of;ds("AES-ECB",Pe.cipher.modes.ecb);ds("AES-CBC",Pe.cipher.modes.cbc);ds("AES-CFB",Pe.cipher.modes.cfb);ds("AES-OFB",Pe.cipher.modes.ofb);ds("AES-CTR",Pe.cipher.modes.ctr);ds("AES-GCM",Pe.cipher.modes.gcm);function ds(t,e){var r=function(){return new Pe.aes.Algorithm(t,e)};Pe.cipher.registerAlgorithm(t,r)}var sf=!1,ys=4,Bt,af,iv,Sn,hr;function nv(){sf=!0,iv=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Bt=new Array(256),af=new Array(256),Sn=new Array(4),hr=new Array(4);for(var e=0;e<4;++e)Sn[e]=new Array(256),hr[e]=new Array(256);for(var r=0,i=0,n,s,a,o,f,u,c,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,Bt[r]=o,af[o]=r,f=t[o],n=t[r],s=t[n],a=t[s],u=f<<24^o<<16^o<<8^(o^f),c=(n^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^n^a);for(var h=0;h<4;++h)Sn[h][r]=u,hr[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=i=1:(r=n^t[t[t[n^a]]],i^=t[t[i]])}}function sv(t,e){for(var r=t.slice(0),i,n=1,s=r.length,a=s+6+1,o=ys*a,f=s;f<o;++f)i=r[f-1],f%s==0?(i=Bt[i>>>16&255]<<24^Bt[i>>>8&255]<<16^Bt[i&255]<<8^Bt[i>>>24]^iv[n]<<24,n++):s>6&&f%s==4&&(i=Bt[i>>>24]<<24^Bt[i>>>16&255]<<16^Bt[i>>>8&255]<<8^Bt[i&255]),r[f]=r[f-s]^i;if(e){var u,c=hr[0],h=hr[1],l=hr[2],d=hr[3],p=r.slice(0);o=r.length;for(var f=0,y=o-ys;f<o;f+=ys,y-=ys)if(f===0||f===o-ys)p[f]=r[y],p[f+1]=r[y+3],p[f+2]=r[y+2],p[f+3]=r[y+1];else for(var g=0;g<ys;++g)u=r[y+g],p[f+(3&-g)]=c[Bt[u>>>24]]^h[Bt[u>>>16&255]]^l[Bt[u>>>8&255]]^d[Bt[u&255]];r=p}return r}function of(t,e,r,i){var n=t.length/4-1,s,a,o,f,u;i?(s=hr[0],a=hr[1],o=hr[2],f=hr[3],u=af):(s=Sn[0],a=Sn[1],o=Sn[2],f=Sn[3],u=Bt);var c,h,l,d,p,y,g;c=e[0]^t[0],h=e[i?3:1]^t[1],l=e[2]^t[2],d=e[i?1:3]^t[3];for(var v=3,x=1;x<n;++x)p=s[c>>>24]^a[h>>>16&255]^o[l>>>8&255]^f[d&255]^t[++v],y=s[h>>>24]^a[l>>>16&255]^o[d>>>8&255]^f[c&255]^t[++v],g=s[l>>>24]^a[d>>>16&255]^o[c>>>8&255]^f[h&255]^t[++v],d=s[d>>>24]^a[c>>>16&255]^o[h>>>8&255]^f[l&255]^t[++v],c=p,h=y,l=g;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[i?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[c&255]^t[++v],r[2]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^t[++v],r[i?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^t[++v]}function i0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=Pe.cipher.createDecipher(r,t.key):i=Pe.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Pe.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var cv=E((lD,uv)=>{var Ue=_e();tf();nf();Qe();uv.exports=Ue.des=Ue.des||{};Ue.des.startEncrypting=function(t,e,r,i){var n=n0({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ue.des.createEncryptionCipher=function(t,e){return n0({key:t,output:null,decrypt:!1,mode:e})};Ue.des.startDecrypting=function(t,e,r,i){var n=n0({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ue.des.createDecryptionCipher=function(t,e){return n0({key:t,output:null,decrypt:!0,mode:e})};Ue.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return ov(r._keys,i,n,!1)},decrypt:function(i,n){return ov(r._keys,i,n,!0)}}}),r._init=!1};Ue.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ue.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=fA(e),this._init=!0}};Nr("DES-ECB",Ue.cipher.modes.ecb);Nr("DES-CBC",Ue.cipher.modes.cbc);Nr("DES-CFB",Ue.cipher.modes.cfb);Nr("DES-OFB",Ue.cipher.modes.ofb);Nr("DES-CTR",Ue.cipher.modes.ctr);Nr("3DES-ECB",Ue.cipher.modes.ecb);Nr("3DES-CBC",Ue.cipher.modes.cbc);Nr("3DES-CFB",Ue.cipher.modes.cfb);Nr("3DES-OFB",Ue.cipher.modes.ofb);Nr("3DES-CTR",Ue.cipher.modes.ctr);function Nr(t,e){var r=function(){return new Ue.des.Algorithm(t,e)};Ue.cipher.registerAlgorithm(t,r)}var rA=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],iA=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],nA=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],sA=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],aA=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],oA=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],uA=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],cA=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function fA(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,w,P=0;P<y;P++){var B=t.getInt32(),S=t.getInt32();w=(B>>>4^S)&252645135,S^=w,B^=w<<4,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>2^S)&858993459,S^=w,B^=w<<2,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=(S>>>8^B)&16711935,B^=w,S^=w<<8,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=B<<8|S>>>20&240,B=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=w;for(var F=0;F<v.length;++F){v[F]?(B=B<<2|B>>>26,S=S<<2|S>>>26):(B=B<<1|B>>>27,S=S<<1|S>>>27),B&=-15,S&=-15;var z=e[B>>>28]|r[B>>>24&15]|i[B>>>20&15]|n[B>>>16&15]|s[B>>>12&15]|a[B>>>8&15]|o[B>>>4&15],ee=f[S>>>28]|u[S>>>24&15]|c[S>>>20&15]|h[S>>>16&15]|l[S>>>12&15]|d[S>>>8&15]|p[S>>>4&15];w=(ee>>>16^z)&65535,g[x++]=z^w,g[x++]=ee^w<<16}}return g}function ov(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],f=e[1];a=(o>>>4^f)&252645135,f^=a,o^=a<<4,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<n;u+=3){for(var c=s[u+1],h=s[u+2],l=s[u];l!=c;l+=h){var d=f^t[l],p=(f>>>4|f<<28)^t[l+1];a=o,o=f,f=a^(iA[d>>>24&63]|sA[d>>>16&63]|oA[d>>>8&63]|cA[d&63]|rA[p>>>24&63]|nA[p>>>16&63]|aA[p>>>8&63]|uA[p&63])}a=o,o=f,f=a}o=o>>>1|o<<31,f=f>>>1|f<<31,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(o>>>4^f)&252645135,f^=a,o^=a<<4,r[0]=o,r[1]=f}function n0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Ue.cipher.createDecipher(r,t.key):i=Ue.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Ue.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var _n=E((pD,fv)=>{var s0=_e();fv.exports=s0.md=s0.md||{};s0.md.algorithms=s0.md.algorithms||{}});var lv=E((dD,hv)=>{var si=_e();_n();Qe();var hA=hv.exports=si.hmac=si.hmac||{};hA.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in si.md.algorithms)e=si.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=si.util.createBuffer(a);else if(si.util.isArray(a)){var o=a;a=si.util.createBuffer();for(var f=0;f<o.length;++f)a.putByte(o[f])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=si.util.createBuffer(),i=si.util.createBuffer(),u=a.length();for(var f=0;f<u;++f){var o=a.at(f);r.putByte(54^o),i.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var dv=E((yD,pv)=>{var At=_e();lv();_n();Qe();var lA=At.pkcs5=At.pkcs5||{},ai;At.util.isNodejs&&!At.options.usePureJavaScript&&(ai=Yr());pv.exports=At.pbkdf2=lA.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),At.util.isNodejs&&!At.options.usePureJavaScript&&ai.pbkdf2&&(n===null||typeof n!="object")&&(ai.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?ai.pbkdf2Sync.length===4?ai.pbkdf2(t,e,r,i,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):ai.pbkdf2(t,e,r,i,n,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):ai.pbkdf2Sync.length===4?ai.pbkdf2Sync(t,e,r,i).toString("binary"):ai.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in At.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=At.md[n].create()}var a=n.digestLength;if(i>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var f=Math.ceil(i/a),u=i-(f-1)*a,c=At.hmac.create();c.start(n,t);var h="",l,d,p;if(!s){for(var y=1;y<=f;++y){c.start(null,null),c.update(e),c.update(At.util.int32ToBytes(y)),l=p=c.digest().getBytes();for(var g=2;g<=r;++g)c.start(null,null),c.update(p),d=c.digest().getBytes(),l=At.util.xorBytes(l,d,a),p=d;h+=y<f?l:l.substr(0,u)}return h}var y=1,g;function v(){if(y>f)return s(null,h);c.start(null,null),c.update(e),c.update(At.util.int32ToBytes(y)),l=p=c.digest().getBytes(),g=2,x()}function x(){if(g<=r)return c.start(null,null),c.update(p),d=c.digest().getBytes(),l=At.util.xorBytes(l,d,a),p=d,++g,At.util.setImmediate(x);h+=y<f?l:l.substr(0,u),++y,v()}v()}});var vv=E((gD,gv)=>{var a0=_e();Qe();var yv=gv.exports=a0.pem=a0.pem||{};yv.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=o0(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=o0(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=o0(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=o0(t.headers[n]);return t.procType&&(r+=`\r
`),r+=a0.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};yv.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:a0.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var f=s[2].split(n),u=0;s&&u<f.length;){for(var c=f[u].replace(/\s+$/,""),h=u+1;h<f.length;++h){var l=f[h];if(!/\s/.test(l[0]))break;c+=l,u=h}if(s=c.match(i),s){for(var d={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)d.values.push(pA(p[y]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function o0(t){for(var e=t.name+": ",r=[],i=function(f,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,a=-1,n=0;n<e.length;++n,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=n-a-1,a=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(a=n);return e}function pA(t){return t.replace(/^\s+/,"")}});var Sv=E((vD,wv)=>{var Or=_e();_n();Qe();var xv=wv.exports=Or.sha256=Or.sha256||{};Or.md.sha256=Or.md.algorithms.sha256=xv;xv.create=function(){bv||dA();var t=null,e=Or.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Or.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Or.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Ev(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Or.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(cf.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Ev(h,r,n);var l=Or.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},i};var cf=null,bv=!1,mv=null;function dA(){cf=String.fromCharCode(128),cf+=Or.util.fillString(String.fromCharCode(0),64),mv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bv=!0}function Ev(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x=r.length();x>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=g^p&(y^g),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),i=v+a+o+mv[u]+e[u],n=s+f,v=g,g=y,y=p,p=d+i>>>0,d=l,l=h,h=c,c=i+n>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,x-=64}}});var Iv=E((xD,_v)=>{var Lr=_e();Qe();var u0=null;Lr.util.isNodejs&&!Lr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(u0=Yr());var yA=_v.exports=Lr.prng=Lr.prng||{};yA.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=Lr.util.createBuffer();e.key=null,g();function g(v){if(v)return c(v);if(y.length()>=u)return c(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Lr.util.nextTick(function(){s(g)});var x=h(e.key,e.seed);e.generated+=x.length,y.putBytes(x),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),Lr.util.setImmediate(g)}},e.generateSync=function(u){var c=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=Lr.util.createBuffer();p.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=c(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(c(e.key,h(e.seed))),e.seed=d(c(e.key,e.seed))}return p.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(h,l){if(h)return u(h);e.collect(l),o(),u()})}function a(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,h=0;h<32;++h)e.reseeds%c==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var l=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function f(u){var c=null,h=Lr.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(B){return l.getRandomValues(B)});var d=Lr.util.createBuffer();if(c)for(;d.length()<u;){var p=Math.max(1,Math.min(u-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{c(y);for(var g=0;g<y.length;++g)d.putInt32(y[g])}catch(B){if(!(typeof QuotaExceededError!="undefined"&&B instanceof QuotaExceededError))throw B}}if(d.length()<u)for(var v,x,w,P=Math.floor(Math.random()*65536);d.length()<u;){x=16807*(P&65535),v=16807*(P>>16),x+=(v&32767)<<16,x+=v>>15,x=(x&2147483647)+(x>>31),P=x&4294967295;for(var g=0;g<3;++g)w=P>>>(g<<3),w^=Math.floor(Math.random()*256),d.putByte(w&255)}return d.getBytes(u)}return u0?(e.seedFile=function(u,c){u0.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},e.seedFileSync=function(u){return u0.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,h=0;h<c;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){u.postMessage({forge:{prng:{err:d,bytes:p}}})})};u.addEventListener("message",c)}},e}});var ya=E((bD,ff)=>{var ut=_e();uf();Sv();Iv();Qe();(function(){if(ut.random&&ut.random.getBytes){ff.exports=ut.random;return}(function(t){var e={},r=new Array(4),i=ut.util.createBuffer();e.formatKey=function(h){var l=ut.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),ut.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=ut.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return ut.aes._updateBlock(h,l,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=ut.md.sha256;function n(){var h=ut.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=n(),a=null,o=ut.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(a=function(h){return f.getRandomValues(h)}),ut.options.usePureJavaScript||!ut.util.isNodejs&&!a){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}s.collect(u),u=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!ut.random)ut.random=s;else for(var c in s)ut.random[c]=s[c];ut.random.createInstance=n,ff.exports=ut.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Tv=E((mD,Cv)=>{var kt=_e();Qe();var hf=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Bv=[1,2,3,5],gA=function(t,e){return t<<e&65535|(t&65535)>>16-e},vA=function(t,e){return(t&65535)>>e|t<<16-e&65535};Cv.exports=kt.rc2=kt.rc2||{};kt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=kt.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),a=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(hf[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-s,hf[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,hf[r.at(o+1)^r.at(o+s)]);return r};var Av=function(t,e,r){var i=!1,n=null,s=null,a=null,o,f,u,c,h=[];for(t=kt.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=gA(p[u],Bv[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=vA(p[u],Bv[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var y=[];for(u=0;u<4;u++){var g=n.getInt16Le();a!==null&&(r?g^=a.getInt16Le():a.putInt16Le(g)),y.push(g&65535)}c=r?0:63;for(var v=0;v<p.length;v++)for(var x=0;x<p[v][0];x++)p[v][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),s.putInt16Le(y[u])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=kt.util.createBuffer(p)),i=!1,n=kt.util.createBuffer(),s=y||new kt.util.createBuffer,a=p,d.output=s},update:function(p){for(i||n.putBuffer(p);n.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,n,!r);else{var g=n.length()===8?8:8-n.length();n.fillWithByte(g,g)}if(y&&(i=!0,d.update()),!r&&(y=n.length()===0,y))if(p)y=p(8,s,!r);else{var v=s.length(),x=s.at(v-1);x>v?y=!1:s.truncate(x)}return y}},d};kt.rc2.startEncrypting=function(t,e,r){var i=kt.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};kt.rc2.createEncryptionCipher=function(t,e){return Av(t,e,!0)};kt.rc2.startDecrypting=function(t,e,r){var i=kt.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};kt.rc2.createDecryptionCipher=function(t,e){return Av(t,e,!1)}});var h0=E((ED,Mv)=>{var lf=_e();Mv.exports=lf.jsbn=lf.jsbn||{};var oi,xA=244837814094590,Rv=(xA&16777215)==15715070;function N(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}lf.jsbn.BigInteger=N;function he(){return new N(null)}function bA(t,e,r,i,n,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=a&67108863}return n}function mA(t,e,r,i,n,s){for(var a=e&32767,o=e>>15;--s>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*a;f=a*f+((c&32767)<<15)+r.data[i]+(n&1073741823),n=(f>>>30)+(c>>>15)+o*u+(n>>>30),r.data[i++]=f&1073741823}return n}function Dv(t,e,r,i,n,s){for(var a=e&16383,o=e>>14;--s>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*a;f=a*f+((c&16383)<<14)+r.data[i]+n,n=(f>>28)+(c>>14)+o*u,r.data[i++]=f&268435455}return n}typeof navigator=="undefined"?(N.prototype.am=Dv,oi=28):Rv&&navigator.appName=="Microsoft Internet Explorer"?(N.prototype.am=mA,oi=30):Rv&&navigator.appName!="Netscape"?(N.prototype.am=bA,oi=26):(N.prototype.am=Dv,oi=28);N.prototype.DB=oi;N.prototype.DM=(1<<oi)-1;N.prototype.DV=1<<oi;var pf=52;N.prototype.FV=Math.pow(2,pf);N.prototype.F1=pf-oi;N.prototype.F2=2*oi-pf;var EA="0123456789abcdefghijklmnopqrstuvwxyz",c0=new Array,gs,Yt;gs="0".charCodeAt(0);for(Yt=0;Yt<=9;++Yt)c0[gs++]=Yt;gs="a".charCodeAt(0);for(Yt=10;Yt<36;++Yt)c0[gs++]=Yt;gs="A".charCodeAt(0);for(Yt=10;Yt<36;++Yt)c0[gs++]=Yt;function Pv(t){return EA.charAt(t)}function kv(t,e){var r=c0[t.charCodeAt(e)];return r??-1}function wA(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function SA(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Mi(t){var e=he();return e.fromInt(t),e}function _A(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=r==8?t[i]&255:kv(t,i);if(a<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&N.ZERO.subTo(this,this)}function IA(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function BA(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(i=this.data[a]>>o)>0&&(n=!0,s=Pv(i));a>=0;)o<e?(i=(this.data[a]&(1<<o)-1)<<e-o,i|=this.data[--a]>>(o+=this.DB-e)):(i=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(s+=Pv(i));return n?s:"0"}function AA(){var t=he();return N.ZERO.subTo(this,t),t}function CA(){return this.s<0?this.negate():this}function TA(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function f0(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function RA(){return this.t<=0?0:this.DB*(this.t-1)+f0(this.data[this.t-1]^this.s&this.DM)}function DA(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function PA(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function kA(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>i|a,a=(this.data[o]&n)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function NA(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function OA(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function LA(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&N.ZERO.subTo(e,e)}function MA(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function KA(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=he());var s=he(),a=this.s,o=t.s,f=this.DB-f0(i.data[i.t-1]);f>0?(i.lShiftTo(f,s),n.lShiftTo(f,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,c=s.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,g=y-u,v=e??he();for(s.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),N.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var x=r.data[--y]==c?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=s.am(0,x,r,g,0,u))<x)for(s.dlShiftTo(g,v),r.subTo(v,r);r.data[y]<--x;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),a!=o&&N.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),a<0&&N.ZERO.subTo(r,r)}}}function FA(t){var e=he();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(N.ZERO)>0&&t.subTo(e,e),e}function In(t){this.m=t}function UA(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function qA(t){return t}function VA(t){t.divRemTo(this.m,null,t)}function GA(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function HA(t,e){t.squareTo(e),this.reduce(e)}In.prototype.convert=UA;In.prototype.revert=qA;In.prototype.reduce=VA;In.prototype.mulTo=GA;In.prototype.sqrTo=HA;function zA(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Bn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function jA(t){var e=he();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(N.ZERO)>0&&this.m.subTo(e,e),e}function WA(t){var e=he();return t.copyTo(e),this.reduce(e),e}function YA(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function $A(t,e){t.squareTo(e),this.reduce(e)}function QA(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Bn.prototype.convert=jA;Bn.prototype.revert=WA;Bn.prototype.reduce=YA;Bn.prototype.mulTo=QA;Bn.prototype.sqrTo=$A;function ZA(){return(this.t>0?this.data[0]&1:this.s)==0}function XA(t,e){if(t>4294967295||t<1)return N.ONE;var r=he(),i=he(),n=e.convert(this),s=f0(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var a=r;r=i,i=a}return e.revert(r)}function JA(t,e){var r;return t<256||e.isEven()?r=new In(e):r=new Bn(e),this.exp(t,r)}N.prototype.copyTo=wA;N.prototype.fromInt=SA;N.prototype.fromString=_A;N.prototype.clamp=IA;N.prototype.dlShiftTo=DA;N.prototype.drShiftTo=PA;N.prototype.lShiftTo=kA;N.prototype.rShiftTo=NA;N.prototype.subTo=OA;N.prototype.multiplyTo=LA;N.prototype.squareTo=MA;N.prototype.divRemTo=KA;N.prototype.invDigit=zA;N.prototype.isEven=ZA;N.prototype.exp=XA;N.prototype.toString=BA;N.prototype.negate=AA;N.prototype.abs=CA;N.prototype.compareTo=TA;N.prototype.bitLength=RA;N.prototype.mod=FA;N.prototype.modPowInt=JA;N.ZERO=Mi(0);N.ONE=Mi(1);function eC(){var t=he();return this.copyTo(t),t}function tC(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function rC(){return this.t==0?this.s:this.data[0]<<24>>24}function iC(){return this.t==0?this.s:this.data[0]<<16>>16}function nC(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function sC(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function aC(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Mi(r),n=he(),s=he(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a}function oC(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,o=0;o<t.length;++o){var f=kv(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}a=e*a+f,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&N.ZERO.subTo(this,this)}function uC(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(N.ONE.shiftLeft(t-1),df,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(N.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function cC(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function fC(t){return this.compareTo(t)==0}function hC(t){return this.compareTo(t)<0?this:t}function lC(t){return this.compareTo(t)>0?this:t}function pC(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function dC(t,e){return t&e}function yC(t){var e=he();return this.bitwiseTo(t,dC,e),e}function df(t,e){return t|e}function gC(t){var e=he();return this.bitwiseTo(t,df,e),e}function Nv(t,e){return t^e}function vC(t){var e=he();return this.bitwiseTo(t,Nv,e),e}function Ov(t,e){return t&~e}function xC(t){var e=he();return this.bitwiseTo(t,Ov,e),e}function bC(){for(var t=he(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function mC(t){var e=he();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function EC(t){var e=he();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function wC(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function SC(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+wC(this.data[t]);return this.s<0?this.t*this.DB:-1}function _C(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function IC(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=_C(this.data[r]^e);return t}function BC(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function AC(t,e){var r=N.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function CC(t){return this.changeBit(t,df)}function TC(t){return this.changeBit(t,Ov)}function RC(t){return this.changeBit(t,Nv)}function DC(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function PC(t){var e=he();return this.addTo(t,e),e}function kC(t){var e=he();return this.subTo(t,e),e}function NC(t){var e=he();return this.multiplyTo(t,e),e}function OC(t){var e=he();return this.divRemTo(t,e,null),e}function LC(t){var e=he();return this.divRemTo(t,null,e),e}function MC(t){var e=he(),r=he();return this.divRemTo(t,e,r),new Array(e,r)}function KC(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function FC(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function ga(){}function Lv(t){return t}function UC(t,e,r){t.multiplyTo(e,r)}function qC(t,e){t.squareTo(e)}ga.prototype.convert=Lv;ga.prototype.revert=Lv;ga.prototype.mulTo=UC;ga.prototype.sqrTo=qC;function VC(t){return this.exp(t,new ga)}function GC(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function HC(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function vs(t){this.r2=he(),this.q3=he(),N.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function zC(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=he();return t.copyTo(e),this.reduce(e),e}function jC(t){return t}function WC(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function YC(t,e){t.squareTo(e),this.reduce(e)}function $C(t,e,r){t.multiplyTo(e,r),this.reduce(r)}vs.prototype.convert=zC;vs.prototype.revert=jC;vs.prototype.reduce=WC;vs.prototype.mulTo=$C;vs.prototype.sqrTo=YC;function QC(t,e){var r=t.bitLength(),i,n=Mi(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new In(e):e.isEven()?s=new vs(e):s=new Bn(e);var a=new Array,o=3,f=i-1,u=(1<<i)-1;if(a[1]=s.convert(this),i>1){var c=he();for(s.sqrTo(a[1],c);o<=u;)a[o]=he(),s.mulTo(c,a[o-2],a[o]),o+=2}var h=t.t-1,l,d=!0,p=he(),y;for(r=f0(t.data[h])-1;h>=0;){for(r>=f?l=t.data[h]>>r-f&u:(l=(t.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=t.data[h-1]>>this.DB+r-f)),o=i;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),d)a[l].copyTo(n),d=!1;else{for(;o>1;)s.sqrTo(n,p),s.sqrTo(p,n),o-=2;o>0?s.sqrTo(n,p):(y=n,n=p,p=y),s.mulTo(p,a[l],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,p),y=n,n=p,p=y,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function ZC(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function XC(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function JC(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return N.ZERO;for(var r=t.clone(),i=this.clone(),n=Mi(1),s=Mi(0),a=Mi(0),o=Mi(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(a,n),s.subTo(o,s)):(i.subTo(r,i),e&&a.subTo(n,a),o.subTo(s,o))}if(i.compareTo(N.ONE)!=0)return N.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var lr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],e3=(1<<26)/lr[lr.length-1];function t3(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=lr[lr.length-1]){for(e=0;e<lr.length;++e)if(r.data[0]==lr[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<lr.length;){for(var i=lr[e],n=e+1;n<lr.length&&i<e3;)i*=lr[n++];for(i=r.modInt(i);e<n;)if(i%lr[e++]==0)return!1}return r.millerRabin(t)}function r3(t){var e=this.subtract(N.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=i3(),s,a=0;a<t;++a){do s=new N(this.bitLength(),n);while(s.compareTo(N.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(i,this);if(o.compareTo(N.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(N.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function i3(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}N.prototype.chunkSize=nC;N.prototype.toRadix=aC;N.prototype.fromRadix=oC;N.prototype.fromNumber=uC;N.prototype.bitwiseTo=pC;N.prototype.changeBit=AC;N.prototype.addTo=DC;N.prototype.dMultiply=KC;N.prototype.dAddOffset=FC;N.prototype.multiplyLowerTo=GC;N.prototype.multiplyUpperTo=HC;N.prototype.modInt=XC;N.prototype.millerRabin=r3;N.prototype.clone=eC;N.prototype.intValue=tC;N.prototype.byteValue=rC;N.prototype.shortValue=iC;N.prototype.signum=sC;N.prototype.toByteArray=cC;N.prototype.equals=fC;N.prototype.min=hC;N.prototype.max=lC;N.prototype.and=yC;N.prototype.or=gC;N.prototype.xor=vC;N.prototype.andNot=xC;N.prototype.not=bC;N.prototype.shiftLeft=mC;N.prototype.shiftRight=EC;N.prototype.getLowestSetBit=SC;N.prototype.bitCount=IC;N.prototype.testBit=BC;N.prototype.setBit=CC;N.prototype.clearBit=TC;N.prototype.flipBit=RC;N.prototype.add=PC;N.prototype.subtract=kC;N.prototype.multiply=NC;N.prototype.divide=OC;N.prototype.remainder=LC;N.prototype.divideAndRemainder=MC;N.prototype.modPow=QC;N.prototype.modInverse=JC;N.prototype.pow=VC;N.prototype.gcd=ZC;N.prototype.isProbablePrime=t3});var Vv=E((wD,qv)=>{var Mr=_e();_n();Qe();var Kv=qv.exports=Mr.sha1=Mr.sha1||{};Mr.md.sha1=Mr.md.algorithms.sha1=Kv;Kv.create=function(){Fv||n3();var t=null,e=Mr.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Mr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Mr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Uv(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Mr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(yf.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Uv(h,r,n);var l=Mr.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},i};var yf=null,Fv=!1;function n3(){yf=String.fromCharCode(128),yf+=Mr.util.fillString(String.fromCharCode(0),64),Fv=!0}function Uv(t,e,r){for(var i,n,s,a,o,f,u,c,h=r.length();h>=64;){for(n=t.h0,s=t.h1,a=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<20;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<32;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<40;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<60;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s&a|o&(s^a),i=(n<<5|n>>>27)+u+f+2400959708+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<80;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+3395469782+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,h-=64}}});var zv=E((SD,Hv)=>{var Kr=_e();Qe();ya();Vv();var Gv=Hv.exports=Kr.pkcs1=Kr.pkcs1||{};Gv.encode_rsa_oaep=function(t,e,r){var i,n,s,a;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=Kr.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),f=o-2*s.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}i||(i=""),s.update(i,"raw");for(var c=s.digest(),h="",l=f-e.length,d=0;d<l;d++)h+="\0";var p=c.getBytes()+h+""+e;if(!n)n=Kr.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var y=l0(n,o-s.digestLength-1,a),g=Kr.util.xorBytes(p,y,p.length),v=l0(g,s.digestLength,a),x=Kr.util.xorBytes(n,v,n.length);return"\0"+x+g};Gv.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=a,g}if(n===void 0?n=Kr.md.sha1.create():n.start(),s||(s=n),a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),f=e.charAt(0),u=e.substring(1,n.digestLength+1),c=e.substring(1+n.digestLength),h=l0(c,n.digestLength,s),l=Kr.util.xorBytes(u,h,u.length),d=l0(l,a-n.digestLength-1,s),p=Kr.util.xorBytes(c,d,c.length),y=p.substring(0,n.digestLength),g=f!=="\0",v=0;v<n.digestLength;++v)g|=o.charAt(v)!==y.charAt(v);for(var x=1,w=n.digestLength,P=n.digestLength;P<p.length;P++){var B=p.charCodeAt(P),S=B&1^1,F=x?65534:0;g|=B&F,x=x&S,w+=x}if(g||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function l0(t,e,r){r||(r=Kr.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}});var jv=E((_D,gf)=>{var Ki=_e();Qe();h0();ya();(function(){if(Ki.prime){gf.exports=Ki.prime;return}var t=gf.exports=Ki.prime=Ki.prime||{},e=Ki.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Ki.random,g={nextBytes:function(v){for(var x=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=x.charCodeAt(w)}};if(p.name==="PRIMEINC")return s(h,g,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?f(h,l,d,p):a(h,l,d,p)}function a(h,l,d,p){var y=u(h,l),g=0,v=c(y.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var x=10;"maxBlockTime"in d&&(x=d.maxBlockTime),o(y,h,l,g,v,x,p)}function o(h,l,d,p,y,g,v){var x=+new Date;do{if(h.bitLength()>l&&(h=u(l,d)),h.isProbablePrime(y))return v(null,h);h.dAddOffset(r[p++%8],0)}while(g<0||+new Date-x<g);Ki.util.setImmediate(function(){o(h,l,d,p,y,g,v)})}function f(h,l,d,p){if(typeof Worker=="undefined")return a(h,l,d,p);var y=u(h,l),g=d.workers,v=d.workLoad||100,x=v*30/8,w=d.workerScript||"forge/prime.worker.js";if(g===-1)return Ki.util.estimateCores(function(B,S){B&&(S=2),g=S-1,P()});P();function P(){g=Math.max(1,g);for(var B=[],S=0;S<g;++S)B[S]=new Worker(w);for(var F=g,S=0;S<g;++S)B[S].addEventListener("message",ee);var z=!1;function ee(Te){if(!z){--F;var ye=Te.data;if(ye.found){for(var pe=0;pe<B.length;++pe)B[pe].terminate();return z=!0,p(null,new e(ye.prime,16))}y.bitLength()>h&&(y=u(h,l));var Nt=y.toString(16);Te.target.postMessage({hex:Nt,workLoad:v}),y.dAddOffset(x,0)}}}}function u(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),n,d),d.dAddOffset(31-d.mod(i).byteValue(),0),d}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var d0=E((ID,Jv)=>{var $=_e();da();h0();Jo();zv();jv();ya();Qe();typeof ue=="undefined"&&(ue=$.jsbn.BigInteger);var ue,vf=$.util.isNodejs?Yr():null,I=$.asn1,$t=$.util;$.pki=$.pki||{};Jv.exports=$.pki.rsa=$.rsa=$.rsa||{};var Q=$.pki,s3=[6,4,2,4,2,4,6,2],a3={name:"PrivateKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},o3={name:"RSAPrivateKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},u3={name:"RSAPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},c3=$.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},f3=function(t){var e;if(t.algorithm in Q.oids)e=Q.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=I.oidToDer(e).getBytes(),n=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),s=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);s.value.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,i)),s.value.push(I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,""));var a=I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),I.toDer(n).getBytes()},Wv=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ue.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ue.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new ue($.util.bytesToHex($.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(ue.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var a=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(i.modInverse(e.n)).mod(e.n),a};Q.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=Yv(t,e,r)):(n=$.util.createBuffer(),n.putBytes(t));for(var a=new ue(n.toHex(),16),o=Wv(a,e,i),f=o.toString(16),u=$.util.createBuffer(),c=s-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes($.util.hexToBytes(f)),u.getBytes()};Q.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var a=new ue($.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Wv(a,e,r),f=o.toString(16),u=$.util.createBuffer(),c=n-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes($.util.hexToBytes(f)),i!==!1?p0(u.getBytes(),e,r):u.getBytes()};Q.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||$.random,n={nextBytes:function(o){for(var f=i.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new ue(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Q.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ue(null);r.fromInt(30);for(var i=0,n=function(h,l){return h|l},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new ue(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ue.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(l3(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(s3[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ue.ONE),t.q1=t.q.subtract(ue.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ue.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};Q.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!$.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if($v("generateKeyPair"))return vf.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return i(o);i(null,{privateKey:Q.privateKeyFromPem(u),publicKey:Q.publicKeyFromPem(f)})});if(Qv("generateKey")&&Qv("exportKey"))return $t.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Xv(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return $t.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var f=Q.privateKeyFromAsn1(I.fromDer($.util.createBuffer(o)));i(null,{privateKey:f,publicKey:Q.setRsaPublicKey(f.n,f.e)})}});if(Zv("generateKey")&&Zv("exportKey")){var n=$t.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Xv(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var f=o.target.result,u=$t.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=Q.privateKeyFromAsn1(I.fromDer($.util.createBuffer(h)));i(null,{privateKey:l,publicKey:Q.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){i(c)}},n.onerror=function(o){i(o)};return}}else if($v("generateKeyPairSync")){var s=vf.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Q.privateKeyFromPem(s.privateKey),publicKey:Q.publicKeyFromPem(s.publicKey)}}}var a=Q.rsa.createKeyPairGenerationState(t,e,r);if(!i)return Q.rsa.stepKeyPairGenerationState(a,0),a.keys;h3(a,r,i)};Q.setRsaPublicKey=Q.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,f,u){return Yv(o,f,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,f){return $.pkcs1.encode_rsa_oaep(f,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(i,r,!0);return Q.rsa.encrypt(a,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,f){f=p0(f,r,!0);var u=I.fromDer(f);return o===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,f){return f=p0(f,r,!0),o===f}});var a=Q.rsa.decrypt(n,r,!0,!1);return s.verify(i,a,r.n.bitLength())},r};Q.setRsaPrivateKey=Q.rsa.setPrivateKey=function(t,e,r,i,n,s,a,o){var f={n:t,e,d:r,p:i,q:n,dP:s,dQ:a,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=Q.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:p0};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(d,p){return $.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:f3},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return Q.rsa.encrypt(l,f,h)},f};Q.wrapRsaPrivateKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(0).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Q.oids.rsaEncryption).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")]),I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,I.toDer(t).getBytes())])};Q.privateKeyFromAsn1=function(t){var e={},r=[];if(I.validate(t,a3,e,r)&&(t=I.fromDer($.util.createBuffer(e.privateKey))),e={},r=[],!I.validate(t,o3,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,a,o,f,u,c,h;return n=$.util.createBuffer(e.privateKeyModulus).toHex(),s=$.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=$.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=$.util.createBuffer(e.privateKeyPrime1).toHex(),f=$.util.createBuffer(e.privateKeyPrime2).toHex(),u=$.util.createBuffer(e.privateKeyExponent1).toHex(),c=$.util.createBuffer(e.privateKeyExponent2).toHex(),h=$.util.createBuffer(e.privateKeyCoefficient).toHex(),Q.setRsaPrivateKey(new ue(n,16),new ue(s,16),new ue(a,16),new ue(o,16),new ue(f,16),new ue(u,16),new ue(c,16),new ue(h,16))};Q.privateKeyToAsn1=Q.privateKeyToRSAPrivateKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(0).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.n)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.e)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.d)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.p)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.q)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.dP)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.dQ)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.qInv))])};Q.publicKeyFromAsn1=function(t){var e={},r=[];if(I.validate(t,c3,e,r)){var i=I.derToOid(e.publicKeyOid);if(i!==Q.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!I.validate(t,u3,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=$.util.createBuffer(e.publicKeyModulus).toHex(),a=$.util.createBuffer(e.publicKeyExponent).toHex();return Q.setRsaPublicKey(new ue(s,16),new ue(a,16))};Q.publicKeyToAsn1=Q.publicKeyToSubjectPublicKeyInfo=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Q.oids.rsaEncryption).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,[Q.publicKeyToRSAPublicKey(t)])])};Q.publicKeyToRSAPublicKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.n)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Fr(t.e))])};function Yv(t,e,r){var i=$.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var a=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<a;++f)i.putByte(o)}else for(;a>0;){for(var u=0,c=$.random.getBytes(a),f=0;f<a;++f)o=c.charCodeAt(f),o===0?++u:i.putByte(o);a=u}return i.putByte(0),i.putBytes(t),i}function p0(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=$.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=n-3-i;for(var u=0;u<f;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++f}else if(o===2)for(f=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++f}var c=s.getByte();if(c!==0||f!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function h3(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,f){$.prime.generateProbablePrime(o,i,f)}function a(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)!==0){t.p=null,n();return}if(t.q.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(ue.ONE),t.q1=t.q.subtract(ue.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ue.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Fr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=$.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function l3(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function $v(t){return $.util.isNodejs&&typeof vf[t]=="function"}function Qv(t){return typeof $t.globalScope!="undefined"&&typeof $t.globalScope.crypto=="object"&&typeof $t.globalScope.crypto.subtle=="object"&&typeof $t.globalScope.crypto.subtle[t]=="function"}function Zv(t){return typeof $t.globalScope!="undefined"&&typeof $t.globalScope.msCrypto=="object"&&typeof $t.globalScope.msCrypto.subtle=="object"&&typeof $t.globalScope.msCrypto.subtle[t]=="function"}function Xv(t){for(var e=$.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var sx=E((BD,nx)=>{var G=_e();uf();da();cv();_n();Jo();dv();vv();ya();Tv();d0();Qe();typeof ex=="undefined"&&(ex=G.jsbn.BigInteger);var ex,R=G.asn1,J=G.pki=G.pki||{};nx.exports=J.pbe=G.pbe=G.pbe||{};var An=J.oids,p3={name:"EncryptedPrivateKeyInfo",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},d3={name:"PBES2Algorithms",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},y3={name:"pkcs-12PbeParams",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"iterations"}]};J.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=G.random.getBytesSync(r.saltSize),n=r.count,s=R.integerToDer(n),a,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":a=16,u=16,c=An["aes128-CBC"],h=G.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=An["aes192-CBC"],h=G.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=An["aes256-CBC"],h=G.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=An.desCBC,h=G.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=ix(d),y=G.pkcs5.pbkdf2(e,i,n,a,p),g=G.random.getBytesSync(u),v=h(y);v.start(g),v.update(R.toDer(t)),v.finish(),f=v.output.getBytes();var x=g3(i,s,a,d);o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An.pkcs5PBES2).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An.pkcs5PBKDF2).getBytes()),x]),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(c).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){a=24;var w=new G.util.ByteBuffer(i),y=J.pbe.generatePkcs12Key(e,w,1,n,a),g=J.pbe.generatePkcs12Key(e,w,2,n,a),v=G.des.createEncryptionCipher(y);v.start(g),v.update(R.toDer(t)),v.finish(),f=v.output.getBytes(),o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,i),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var P=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[o,R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,f)]);return P};J.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!R.validate(t,p3,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=R.derToOid(i.encryptionOid),o=J.pbe.getCipher(a,i.encryptionParams,e),f=G.util.createBuffer(i.encryptedData);return o.update(f),o.finish()&&(r=R.fromDer(o.output)),r};J.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:R.toDer(t).getBytes()};return G.pem.encode(r,{maxline:e})};J.encryptedPrivateKeyFromPem=function(t){var e=G.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return R.fromDer(e.body)};J.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=J.wrapRsaPrivateKey(J.privateKeyToAsn1(t));return i=J.encryptPrivateKeyInfo(i,e,r),J.encryptedPrivateKeyToPem(i)}var n,s,a,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",a=16,s=G.random.getBytesSync(16),o=G.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",a=24,s=G.random.getBytesSync(16),o=G.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",a=32,s=G.random.getBytesSync(16),o=G.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",a=24,s=G.random.getBytesSync(8),o=G.des.createEncryptionCipher;break;case"des":n="DES-CBC",a=8,s=G.random.getBytesSync(8),o=G.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=G.pbe.opensslDeriveBytes(e,s.substr(0,8),a),c=o(u);c.start(s),c.update(R.toDer(J.privateKeyToAsn1(t))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:G.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return G.pem.encode(h)};J.decryptRsaPrivateKey=function(t,e){var r=null,i=G.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,a;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,a=G.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=G.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=G.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=G.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=G.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(h){return G.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,a=function(h){return G.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,a=function(h){return G.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=G.util.hexToBytes(i.dekInfo.parameters),f=G.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(f);if(u.start(o),u.update(G.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=J.decryptPrivateKeyInfo(R.fromDer(r),e):r=R.fromDer(r),r!==null&&(r=J.privateKeyFromAsn1(r)),r};J.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in G.md))throw new Error('"sha1" hash algorithm unavailable.');s=G.md.sha1.create()}var f=s.digestLength,u=s.blockLength,c=new G.util.ByteBuffer,h=new G.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var l=h.length(),d=e.length(),p=new G.util.ByteBuffer;p.fillWithByte(r,u);var y=u*Math.ceil(d/u),g=new G.util.ByteBuffer;for(o=0;o<y;o++)g.putByte(e.at(o%d));var v=u*Math.ceil(l/u),x=new G.util.ByteBuffer;for(o=0;o<v;o++)x.putByte(h.at(o%l));var w=g;w.putBuffer(x);for(var P=Math.ceil(n/f),B=1;B<=P;B++){var S=new G.util.ByteBuffer;S.putBytes(p.bytes()),S.putBytes(w.bytes());for(var F=0;F<i;F++)s.start(),s.update(S.getBytes()),S=s.digest();var z=new G.util.ByteBuffer;for(o=0;o<u;o++)z.putByte(S.at(o%f));var ee=Math.ceil(d/u)+Math.ceil(l/u),Te=new G.util.ByteBuffer;for(a=0;a<ee;a++){var ye=new G.util.ByteBuffer(w.getBytes(u)),pe=511;for(o=z.length()-1;o>=0;o--)pe=pe>>8,pe+=z.at(o)+ye.at(o),ye.setAt(o,pe&255);Te.putBuffer(ye)}w=Te,c.putBuffer(S)}return c.truncate(c.length()-n),c};J.pbe.getCipher=function(t,e,r){switch(t){case J.oids.pkcs5PBES2:return J.pbe.getCipherForPBES2(t,e,r);case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case J.oids["pbewithSHAAnd40BitRC2-CBC"]:return J.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};J.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!R.validate(e,d3,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=R.derToOid(i.kdfOid),t!==J.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=R.derToOid(i.encOid),t!==J.oids["aes128-CBC"]&&t!==J.oids["aes192-CBC"]&&t!==J.oids["aes256-CBC"]&&t!==J.oids["des-EDE3-CBC"]&&t!==J.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=i.kdfSalt,o=G.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(J.oids[t]){case"aes128-CBC":f=16,u=G.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=G.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=G.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=G.des.createDecryptionCipher;break;case"desCBC":f=8,u=G.des.createDecryptionCipher;break}var c=rx(i.prfOid),h=G.pkcs5.pbkdf2(r,a,o,f,c),l=i.encIv,d=u(h);return d.start(l),d};J.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!R.validate(e,y3,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=G.util.createBuffer(i.salt),o=G.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=G.des.startDecrypting;break;case J.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(y,g){var v=G.rc2.createDecryptionCipher(y,40);return v.start(g,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=rx(i.prfOid),l=J.pbe.generatePkcs12Key(r,a,1,o,f,h);h.start();var d=J.pbe.generatePkcs12Key(r,a,2,o,u,h);return c(l,d)};J.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in G.md))throw new Error('"md5" hash algorithm unavailable.');i=G.md.md5.create()}e===null&&(e="");for(var n=[tx(i,t+e)],s=16,a=1;s<r;++a,s+=16)n.push(tx(i,n[a-1]+t+e));return n.join("").substr(0,r)};function tx(t,e){return t.start().update(e).digest().getBytes()}function rx(t){var e;if(!t)e="hmacWithSHA1";else if(e=J.oids[R.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return ix(e)}function ix(t){var e=G.md;switch(t){case"hmacWithSHA224":e=G.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function g3(t,e,r,i){var n=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,t),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,G.util.hexToBytes(r.toString(16))),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(J.oids[i]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.NULL,!1,"")])),n}});var va=E(ax=>{"use strict";ax.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var xf=E((CD,ux)=>{"use strict";var{concat:v3}=(sr(),nr),{fromString:ox}=(lt(),ht),x3=va();function b3({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let a=x3.get();r*=8;async function o(u,c){let h=a.getRandomValues(new Uint8Array(n)),l=a.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},y=await a.subtle.importKey("raw",ox(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),v=await a.subtle.encrypt(d,g,u);return v3([h,d.iv,new Uint8Array(v)])}async function f(u,c){let h=u.slice(0,n),l=u.slice(n,n+e),d=u.slice(n+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},g=await a.subtle.importKey("raw",ox(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await a.subtle.deriveKey(y,g,{name:t,length:r},!0,["decrypt"]),x=await a.subtle.decrypt(p,v,d);return new Uint8Array(x)}return{encrypt:o,decrypt:f}}ux.exports={create:b3}});var fx=E((TD,cx)=>{"use strict";var{base64:m3}=(sn(),mi),E3=xf();cx.exports={import:async function(t,e){let r=m3.decode(t);return await E3.create().decrypt(r,e)}}});var yx=E((RD,dx)=>{var Ne=_e();_n();Qe();var xa=dx.exports=Ne.sha512=Ne.sha512||{};Ne.md.sha512=Ne.md.algorithms.sha512=xa;var hx=Ne.sha384=Ne.sha512.sha384=Ne.sha512.sha384||{};hx.create=function(){return xa.create("SHA-384")};Ne.md.sha384=Ne.md.algorithms.sha384=hx;Ne.sha512.sha256=Ne.sha512.sha256||{create:function(){return xa.create("SHA-512/256")}};Ne.md["sha512/256"]=Ne.md.algorithms["sha512/256"]=Ne.sha512.sha256;Ne.sha512.sha224=Ne.sha512.sha224||{create:function(){return xa.create("SHA-512/224")}};Ne.md["sha512/224"]=Ne.md.algorithms["sha512/224"]=Ne.sha512.sha224;xa.create=function(t){if(lx||w3(),typeof t=="undefined"&&(t="SHA-512"),!(t in Cn))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Cn[t],r=null,i=Ne.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);i=Ne.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=Ne.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return i.putBytes(f),px(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var f=Ne.util.createBuffer();f.putBytes(i.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(bf.substr(0,o.blockLength-c));for(var h,l,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,f.putInt32(d>>>0),d=h>>>0;f.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);px(y,n,f);var g=Ne.util.createBuffer(),v;t==="SHA-512"?v=y.length:t==="SHA-384"?v=y.length-2:v=y.length-4;for(var p=0;p<v;++p)g.putInt32(y[p][0]),(p!==v-1||t!=="SHA-512/224")&&g.putInt32(y[p][1]);return g},o};var bf=null,lx=!1,mf=null,Cn=null;function w3(){bf=String.fromCharCode(128),bf+=Ne.util.fillString(String.fromCharCode(0),128),mf=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Cn={},Cn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Cn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Cn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Cn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],lx=!0}function px(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x,w,P,B,S,F,z,ee,Te,ye,pe,Nt,Gr,Z,be,O,Gi,Hi,zi,ji,Ss=r.length();Ss>=128;){for(Z=0;Z<16;++Z)e[Z][0]=r.getInt32()>>>0,e[Z][1]=r.getInt32()>>>0;for(;Z<80;++Z)Gi=e[Z-2],be=Gi[0],O=Gi[1],i=((be>>>19|O<<13)^(O>>>29|be<<3)^be>>>6)>>>0,n=((be<<13|O>>>19)^(O<<3|be>>>29)^(be<<26|O>>>6))>>>0,zi=e[Z-15],be=zi[0],O=zi[1],s=((be>>>1|O<<31)^(be>>>8|O<<24)^be>>>7)>>>0,a=((be<<31|O>>>1)^(be<<24|O>>>8)^(be<<25|O>>>7))>>>0,Hi=e[Z-7],ji=e[Z-16],O=n+Hi[1]+a+ji[1],e[Z][0]=i+Hi[0]+s+ji[0]+(O/4294967296>>>0)>>>0,e[Z][1]=O>>>0;for(y=t[0][0],g=t[0][1],v=t[1][0],x=t[1][1],w=t[2][0],P=t[2][1],B=t[3][0],S=t[3][1],F=t[4][0],z=t[4][1],ee=t[5][0],Te=t[5][1],ye=t[6][0],pe=t[6][1],Nt=t[7][0],Gr=t[7][1],Z=0;Z<80;++Z)u=((F>>>14|z<<18)^(F>>>18|z<<14)^(z>>>9|F<<23))>>>0,c=((F<<18|z>>>14)^(F<<14|z>>>18)^(z<<23|F>>>9))>>>0,h=(ye^F&(ee^ye))>>>0,l=(pe^z&(Te^pe))>>>0,o=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,f=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,d=(y&v|w&(y^v))>>>0,p=(g&x|P&(g^x))>>>0,O=Gr+c+l+mf[Z][1]+e[Z][1],i=Nt+u+h+mf[Z][0]+e[Z][0]+(O/4294967296>>>0)>>>0,n=O>>>0,O=f+p,s=o+d+(O/4294967296>>>0)>>>0,a=O>>>0,Nt=ye,Gr=pe,ye=ee,pe=Te,ee=F,Te=z,O=S+n,F=B+i+(O/4294967296>>>0)>>>0,z=O>>>0,B=w,S=P,w=v,P=x,v=y,x=g,O=n+a,y=i+s+(O/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+y+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+x,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+P,t[2][0]=t[2][0]+w+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+S,t[3][0]=t[3][0]+B+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+z,t[4][0]=t[4][0]+F+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+Te,t[5][0]=t[5][0]+ee+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+pe,t[6][0]=t[6][0]+ye+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+Gr,t[7][0]=t[7][0]+Nt+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,Ss-=128}}});var Ef=E((DD,gx)=>{"use strict";var S3=Qa(),_3=Oe();gx.exports=function(t){if(isNaN(t)||t<=0)throw _3(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return S3(t)}});var y0=E(ba=>{"use strict";Qe();h0();var I3=_e(),{fromString:B3}=(lt(),ht),{toString:vx}=(yt(),dt),{concat:xx}=(sr(),nr);ba.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=xx([new Uint8Array(e-r.length),r])}return vx(r,"base64url")};ba.base64urlToBigInteger=t=>{let e=ba.base64urlToBuffer(t);return new I3.jsbn.BigInteger(vx(e,"base16"),16)};ba.base64urlToBuffer=(t,e)=>{let r=B3(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=xx([new Uint8Array(e-r.length),r])}return r}});var Ex=E(ma=>{"use strict";da();d0();var Fi=_e(),{bigIntegerToUintBase64url:Ur,base64urlToBigInteger:qr}=y0(),{fromString:bx}=(lt(),ht),{toString:mx}=(yt(),dt);ma.pkcs1ToJwk=function(t){let e=Fi.asn1.fromDer(mx(t,"ascii")),r=Fi.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Ur(r.n),e:Ur(r.e),d:Ur(r.d),p:Ur(r.p),q:Ur(r.q),dp:Ur(r.dP),dq:Ur(r.dQ),qi:Ur(r.qInv),alg:"RS256",kid:"2011-04-29"}};ma.jwkToPkcs1=function(t){let e=Fi.pki.privateKeyToAsn1({n:qr(t.n),e:qr(t.e),d:qr(t.d),p:qr(t.p),q:qr(t.q),dP:qr(t.dp),dQ:qr(t.dq),qInv:qr(t.qi)});return bx(Fi.asn1.toDer(e).getBytes(),"ascii")};ma.pkixToJwk=function(t){let e=Fi.asn1.fromDer(mx(t,"ascii")),r=Fi.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Ur(r.n),e:Ur(r.e),alg:"RS256",kid:"2011-04-29"}};ma.jwkToPkix=function(t){let e=Fi.pki.publicKeyToAsn1({n:qr(t.n),e:qr(t.e)});return bx(Fi.asn1.toDer(e).getBytes(),"ascii")}});var Ix=E((ND,_x)=>{"use strict";d0();var wx=_e(),{base64urlToBigInteger:A3}=y0();function Sx(t,e){return e.map(r=>A3(t[r]))}function C3(t){return wx.pki.setRsaPrivateKey(...Sx(t,["n","e","d","p","q","dp","dq","qi"]))}function T3(t){return wx.pki.setRsaPublicKey(...Sx(t,["n","e"]))}_x.exports={jwk2pub:T3,jwk2priv:C3}});var Cx=E(ci=>{"use strict";var ui=va(),R3=Ef(),{toString:D3}=(yt(),dt),{fromString:P3}=(lt(),ht);ci.utils=Ex();ci.generateKey=async function(t){let e=await ui.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Bx(e);return{privateKey:r[0],publicKey:r[1]}};ci.unmarshalPrivateKey=async function(t){let r=[await ui.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await k3(t)],i=await Bx({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};ci.getRandomValues=R3;ci.hashAndSign=async function(t,e){let r=await ui.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await ui.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};ci.hashAndVerify=async function(t,e,r){let i=await ui.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ui.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function Bx(t){return Promise.all([ui.get().subtle.exportKey("jwk",t.privateKey),ui.get().subtle.exportKey("jwk",t.publicKey)])}function k3(t){return ui.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:N3,jwk2priv:O3}=Ix();function Ax(t,e,r,i){let n=e?N3(t):O3(t),s=D3(Uint8Array.from(r),"ascii"),a=i(s,n);return P3(a,"ascii")}ci.encrypt=function(t,e){return Ax(t,!0,e,(r,i)=>i.encrypt(r))};ci.decrypt=function(t,e){return Ax(t,!1,e,(r,i)=>i.decrypt(r))}});var g0=E((LD,Tx)=>{"use strict";var{base64:L3}=(sn(),mi),M3=xf();Tx.exports={export:async function(t,e){let i=await M3.create().encrypt(t,e);return L3.encode(i)}}});var Nx=E((MD,kx)=>{"use strict";var{sha256:Rx}=(tr(),Ut),Dx=Oe(),{equals:Px}=(or(),ar),{toString:K3}=(yt(),dt);yx();var v0=_e(),Qt=Cx(),x0=Zo(),F3=g0(),b0=class{constructor(e){this._key=e}async verify(e,r){return Qt.hashAndVerify(this._key,r,e)}marshal(){return Qt.utils.jwkToPkix(this._key)}get bytes(){return x0.PublicKey.encode({Type:x0.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Qt.encrypt(this._key,e)}equals(e){return Px(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Rx.digest(this.bytes);return e}},Ea=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Qt.getRandomValues(16)}async sign(e){return Qt.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw Dx(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new b0(this._publicKey)}decrypt(e){return Qt.decrypt(this._key,e)}marshal(){return Qt.utils.jwkToPkcs1(this._key)}get bytes(){return x0.PrivateKey.encode({Type:x0.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Px(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Rx.digest(this.bytes);return e}async id(){let e=await this.public.hash();return K3(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new v0.util.ByteBuffer(this.marshal()),n=v0.asn1.fromDer(i),s=v0.pki.privateKeyFromAsn1(n),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return v0.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return F3.export(this.bytes,e);throw Dx(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function U3(t){let e=Qt.utils.pkcs1ToJwk(t),r=await Qt.unmarshalPrivateKey(e);return new Ea(r.privateKey,r.publicKey)}function q3(t){let e=Qt.utils.pkixToJwk(t);return new b0(e)}async function V3(t){let e=await Qt.unmarshalPrivateKey(t);return new Ea(e.privateKey,e.publicKey)}async function G3(t){let e=await Qt.generateKey(t);return new Ea(e.privateKey,e.publicKey)}kx.exports={RsaPublicKey:b0,RsaPrivateKey:Ea,unmarshalRsaPublicKey:q3,unmarshalRsaPrivateKey:U3,generateKeyPair:G3,fromJwk:V3}});var Lx=E(Ui=>{"use strict";var wa=mc(),H3=32,z3=64,m0=32;Ui.publicKeyLength=H3;Ui.privateKeyLength=z3;Ui.generateKey=async function(){let t=wa.utils.randomPrivateKey(),e=await wa.getPublicKey(t);return{privateKey:Ox(t,e),publicKey:e}};Ui.generateKeyFromSeed=async function(t){if(t.length!==m0)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await wa.getPublicKey(e);return{privateKey:Ox(e,r),publicKey:r}};Ui.hashAndSign=function(t,e){let r=t.slice(0,m0);return wa.sign(e,r)};Ui.hashAndVerify=function(t,e,r){return wa.verify(e,r,t)};function Ox(t,e){let r=new Uint8Array(Ui.privateKeyLength);for(let i=0;i<m0;i++)r[i]=t[i],r[m0+i]=e[i];return r}});var qx=E((FD,Ux)=>{"use strict";var Mx=Oe(),{equals:Kx}=(or(),ar),{sha256:Fx}=(tr(),Ut),{base58btc:j3}=(nn(),rn),{identity:W3}=(Ns(),Qn),wt=Lx(),E0=Zo(),Y3=g0(),w0=class{constructor(e){this._key=bs(e,wt.publicKeyLength)}async verify(e,r){return wt.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return E0.PublicKey.encode({Type:E0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Kx(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Fx.digest(this.bytes);return e}},xs=class{constructor(e,r){this._key=bs(e,wt.privateKeyLength),this._publicKey=bs(r,wt.publicKeyLength)}async sign(e){return wt.hashAndSign(this._key,e)}get public(){return new w0(this._publicKey)}marshal(){return this._key}get bytes(){return E0.PrivateKey.encode({Type:E0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Kx(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Fx.digest(this.bytes);return e}async id(){let e=await W3.digest(this.public.bytes);return j3.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Y3.export(this.bytes,e);throw Mx(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function $3(t){if(t.length>wt.privateKeyLength){t=bs(t,wt.privateKeyLength+wt.publicKeyLength);let i=t.slice(0,wt.privateKeyLength),n=t.slice(wt.privateKeyLength,t.length);return new xs(i,n)}t=bs(t,wt.privateKeyLength);let e=t.slice(0,wt.privateKeyLength),r=t.slice(wt.publicKeyLength);return new xs(e,r)}function Q3(t){return t=bs(t,wt.publicKeyLength),new w0(t)}async function Z3(){let{privateKey:t,publicKey:e}=await wt.generateKey();return new xs(t,e)}async function X3(t){let{privateKey:e,publicKey:r}=await wt.generateKeyFromSeed(t);return new xs(e,r)}function bs(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Mx(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}Ux.exports={Ed25519PublicKey:w0,Ed25519PrivateKey:xs,unmarshalEd25519PrivateKey:$3,unmarshalEd25519PublicKey:Q3,generateKeyPair:Z3,generateKeyPairFromSeed:X3}});var Hx=E((UD,Gx)=>{"use strict";var Sa=Oe(),qi=Rc(),{sha256:Vx}=(tr(),Ut);Gx.exports=()=>{let t=32;function e(){return qi.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await Vx.digest(c);try{return await qi.sign(h,u)}catch(l){throw Sa(l,"ERR_INVALID_INPUT")}}async function i(u,c,h){try{let{digest:l}=await Vx.digest(h);return qi.verify(c,l,u)}catch(l){throw Sa(l,"ERR_INVALID_INPUT")}}function n(u){return qi.Point.fromHex(u).toRawBytes(!0)}function s(u){return qi.Point.fromHex(u).toRawBytes(!1)}function a(u){try{qi.getPublicKey(u,!0)}catch(c){throw Sa(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{qi.Point.fromHex(u)}catch(c){throw Sa(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return qi.getPublicKey(u,!0)}catch(c){throw Sa(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:s,validatePrivateKey:a,validatePublicKey:o,computePublicKey:f}}});var Yx=E((qD,Wx)=>{"use strict";var{sha256:zx}=(tr(),Ut),J3=Oe(),{equals:jx}=(or(),ar),{toString:eT}=(yt(),dt),tT=g0();Wx.exports=(t,e,r)=>{r=r||Hx()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return jx(this.bytes,u.bytes)}async hash(){let{bytes:u}=await zx.digest(this.bytes);return u}}class n{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return jx(this.bytes,u.bytes)}async hash(){let{bytes:u}=await zx.digest(this.bytes);return u}async id(){let u=await this.public.hash();return eT(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return tT.export(this.bytes,u);throw J3(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(f){return new n(f)}function a(f){return new i(f)}async function o(){let f=await r.generateKey();return new n(f)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:a,generateKeyPair:o}}});var Qx=E((VD,$x)=>{"use strict";$x.exports={SHA1:20,SHA256:32,SHA512:64}});var Jx=E(Xx=>{"use strict";var Zx=va(),rT=Qx(),iT={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},nT=async(t,e)=>{let r=await Zx.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};Xx.create=async function(t,e){let r=iT[t],i=await Zx.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return nT(i,n)},length:rT[t]}}});var nb=E((HD,ib)=>{"use strict";var eb=Oe(),{concat:tb}=(sr(),nr),{fromString:sT}=(lt(),ht),aT=Jx(),rb={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};ib.exports=async(t,e,r)=>{let i=rb[t];if(!i){let x=Object.keys(rb).join(" / ");throw eb(new Error(`unknown cipher type '${t}'. Must be ${x}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw eb(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,a=20,o=sT("key expansion"),f=2*(s+n+a),u=await aT.create(e,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let x=await u.digest(tb([c,o])),w=x.length;l+w>f&&(w=f-l),h.push(x),l+=w,c=await u.digest(c)}let d=f/2,p=tb(h),y=p.slice(0,d),g=p.slice(d,f),v=x=>({iv:x.slice(0,s),cipherKey:x.slice(s,s+n),macKey:x.slice(s+n)});return{k1:v(y),k2:v(g)}}});var ab=E((zD,sb)=>{"use strict";var oT=Oe();sb.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw oT(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var lb=E(hb=>{"use strict";var uT=Oe(),_a=va(),{base64urlToBuffer:ob}=y0(),cT=ab(),{toString:wf}=(yt(),dt),{concat:fT}=(sr(),nr),{equals:hT}=(or(),ar),ub={"P-256":256,"P-384":384,"P-521":521};hb.generateEphmeralKeyPair=async function(t){cT(Object.keys(ub),t);let e=await _a.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let a;s?a=await _a.get().subtle.importKey("jwk",pT(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let o=[await _a.get().subtle.importKey("jwk",fb(t,n),{name:"ECDH",namedCurve:t},!1,[]),a],f=await _a.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],ub[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},i=await _a.get().subtle.exportKey("jwk",e.publicKey);return{key:lT(i),genSharedKey:r}};var cb={"P-256":32,"P-384":48,"P-521":66};function lT(t){let e=cb[t.crv];return fT([Uint8Array.from([4]),ob(t.x,e),ob(t.y,e)],1+e*2)}function fb(t,e){let r=cb[t];if(hT(!e.slice(0,1),Uint8Array.from([4])))throw uT(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:wf(e.slice(1,r+1),"base64url"),y:wf(e.slice(1+r),"base64url"),ext:!0}}var pT=(t,e)=>({...fb(t,e.public),d:wf(e.private,"base64url")})});var db=E((WD,pb)=>{"use strict";var dT=lb();pb.exports=async t=>dT.generateEphmeralKeyPair(t)});var vb=E((YD,gb)=>{"use strict";var Vr=Zo();da();sx();var Sf=_e(),Ia=Oe(),{fromString:yT}=(lt(),ht),gT=fx(),Zt={rsa:Nx(),ed25519:qx(),secp256k1:Yx()(Vr,Ef())},S0={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function ms(t){let e=Zt[t.toLowerCase()];if(!e){let r=Object.keys(Zt).join(" / ");throw Ia(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var vT=async(t,e)=>ms(t).generateKeyPair(e),xT=async(t,e,r)=>{let i=ms(t);if(t.toLowerCase()!=="ed25519")throw Ia(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},bT=t=>{let e=Vr.PublicKey.decode(t),r=e.Data;switch(e.Type){case Vr.KeyType.RSA:return Zt.rsa.unmarshalRsaPublicKey(r);case Vr.KeyType.Ed25519:return Zt.ed25519.unmarshalEd25519PublicKey(r);case Vr.KeyType.Secp256k1:if(Zt.secp256k1)return Zt.secp256k1.unmarshalSecp256k1PublicKey(r);throw Ia(new Error(S0.message),S0.code);default:ms(e.Type)}},mT=(t,e)=>(e=(e||"rsa").toLowerCase(),ms(e),t.bytes),yb=async t=>{let e=Vr.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Vr.KeyType.RSA:return Zt.rsa.unmarshalRsaPrivateKey(r);case Vr.KeyType.Ed25519:return Zt.ed25519.unmarshalEd25519PrivateKey(r);case Vr.KeyType.Secp256k1:if(Zt.secp256k1)return Zt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Ia(new Error(S0.message),S0.code);default:ms(e.Type)}},ET=(t,e)=>(e=(e||"rsa").toLowerCase(),ms(e),t.bytes),wT=async(t,e)=>{try{let n=await gT.import(t,e);return yb(n)}catch(n){}let r=Sf.pki.decryptRsaPrivateKey(t,e);if(r===null)throw Ia(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=Sf.asn1.toDer(Sf.pki.privateKeyToAsn1(r));return i=yT(i.getBytes(),"ascii"),Zt.rsa.unmarshalRsaPrivateKey(i)};gb.exports={supportedKeys:Zt,keysPBM:Vr,keyStretcher:nb(),generateEphemeralKeyPair:db(),generateKeyPair:vT,generateKeyPairFromSeed:xT,unmarshalPublicKey:bT,marshalPublicKey:mT,unmarshalPrivateKey:yb,marshalPrivateKey:ET,import:wT}});var xb=E(_f=>{"use strict";_f.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"};_f.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}});var Eb=E((QD,mb)=>{"use strict";var Es=Qi(),bb=Es.Reader,ST=Es.Writer,qe=Es.util,Ba=Es.roots["libp2p-envelope"]||(Es.roots["libp2p-envelope"]={});Ba.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=qe.newBuffer([]),t.prototype.payloadType=qe.newBuffer([]),t.prototype.payload=qe.newBuffer([]),t.prototype.signature=qe.newBuffer([]),t.encode=function(r,i){return i||(i=ST.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof bb||(r=bb.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ba.Envelope;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof Ba.Envelope)return r;var i=new Ba.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?qe.base64.decode(r.publicKey,i.publicKey=qe.newBuffer(qe.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?qe.base64.decode(r.payloadType,i.payloadType=qe.newBuffer(qe.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?qe.base64.decode(r.payload,i.payload=qe.newBuffer(qe.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?qe.base64.decode(r.signature,i.signature=qe.newBuffer(qe.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=qe.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=qe.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=qe.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=qe.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?qe.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?qe.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?qe.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?qe.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Es.util.toJSONOptions)},t}();mb.exports=Ba});var Ib=E((ZD,_b)=>{"use strict";var _T=Oe(),{concat:IT}=(sr(),nr),{fromString:BT}=(lt(),ht),AT=vb(),CT=us(),If=ja(),{equals:_0}=(or(),ar),{codes:TT}=xb(),{Envelope:wb}=Eb(),Vi=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=AT.marshalPublicKey(this.peerId.pubKey);return this._marshal=wb.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return _0(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&_0(this.payloadType,e.payloadType)&&_0(this.payload,e.payload)&&_0(this.signature,e.signature)}validate(e){let r=Sb(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},Sb=(t,e,r)=>{let i=BT(t),n=If.encode(i.byteLength),s=If.encode(e.length),a=If.encode(r.length);return IT([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(a),r])};Vi.createFromProtobuf=async t=>{let e=wb.decode(t),r=await CT.createFromPubKey(e.publicKey);return new Vi({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};Vi.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=Sb(r,i,n),a=await e.privKey.sign(s);return new Vi({peerId:e,payloadType:i,payload:n,signature:a})};Vi.openAndCertify=async(t,e)=>{let r=await Vi.createFromProtobuf(t);if(!await r.validate(e))throw _T(new Error("envelope signature is not valid for the given domain"),TT.ERR_SIGNATURE_NOT_VALID);return r};_b.exports=Vi});var MT=E((fi,Ab)=>{"use strict";var RT=fi&&fi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),DT=fi&&fi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bb=fi&&fi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RT(e,t,r);return DT(e,t),e},ws=fi&&fi.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})},Bf=Bb(s2()),PT=l2(),Af=d2(),se=Bb(mn()),kT=v2(),I0=Uc(),ct=En(),Cf=R2(),NT=k2(),OT=q2(),Tf=us(),LT=Ib(),Rf=class extends Bf.default{constructor(e,r={}){let i=[se.GossipsubIDv11,se.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:se.GossipsubD,Dlo:se.GossipsubDlo,Dhi:se.GossipsubDhi,Dscore:se.GossipsubDscore,Dout:se.GossipsubDout,Dlazy:se.GossipsubDlazy,heartbeatInterval:se.GossipsubHeartbeatInterval,fanoutTTL:se.GossipsubFanoutTTL,mcacheLength:se.GossipsubHistoryLength,mcacheGossip:se.GossipsubHistoryGossip,seenTTL:se.GossipsubSeenTTL},r),{scoreParams:Cf.createPeerScoreParams(r.scoreParams),scoreThresholds:Cf.createPeerScoreThresholds(r.scoreThresholds)});n.fallbackToFloodsub&&i.push(se.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:i,libp2p:e},n));this._options=n,this.direct=new Set(n.directPeers.map(s=>s.id.toB58String())),n.directPeers.forEach(s=>{e.peerStore.addressBook.add(s.id,s.addrs)}),this.seenCache=new OT({validity:n.seenTTL/1e3}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new PT.MessageCache(n.mcacheGossip,n.mcacheLength,this.getMsgId.bind(this)),this.heartbeat=new kT.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new NT.IWantTracer(this.getMsgId.bind(this)),this._libp2p=e,this.score=new Cf.PeerScore(this._options.scoreParams,e.connectionManager,this.getMsgId.bind(this))}_decodeRpc(e){return Af.RPC.decode(e)}_encodeRpc(e){return Af.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(a=>r===a.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return ws(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&this._processRpcControlMessage(e,i.control),!0):!1})}_processRpcControlMessage(e,r){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let a=ct.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,a)}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return ws(this,void 0,void 0,function*(){let i=yield this.getMsgId(e),n=ct.messageIdToString(i);if(this.seenCache.has(n)){this.score.duplicateMessage(e);return}this.seenCache.put(n),yield this.score.validateMessage(e),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){return this.direct.has(e)||this.score.score(e)>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return ws(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){throw this.score.rejectMessage(e,i.code),this.gossipTracer.rejectMessage(e,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>se.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=se.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let a=new Map;if(r.forEach(({topicID:u,messageIDs:c})=>{!u||!c||!this.mesh.has(u)||c.forEach(h=>{let l=ct.messageIdToString(h);this.seenCache.has(l)||a.set(l,h)})}),!a.size)return[];let o=a.size;o+s>se.GossipsubMaxIHaveLength&&(o=se.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",o,a.size,e);let f=Array.from(a.values());return ct.shuffle(f),f=f.slice(0,o),this.iasked.set(e,s+o),this.gossipTracer.addPromise(e,f),[{messageIDs:f}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(a=>{let[o,f]=this.messageCache.getForPeer(a,e);if(!!o){if(f>se.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,a);return}n.set(ct.messageIdToString(a),o)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(Bf.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){let i=[],n=this.score.score(e),s=this._now(),a=this._options.doPX;return r.forEach(({topicID:o})=>{var f;if(!o)return;let u=this.mesh.get(o);if(!u){a=!1;return}if(u.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(o),a=!1;return}let c=(f=this.backoff.get(o))===null||f===void 0?void 0:f.get(e);if(typeof c=="number"&&s<c){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),a=!1;let h=c+se.GossipsubGraftFloodThreshold-se.GossipsubPruneBackoff;s<h&&this.score.addPenalty(e,1),this._addBackoff(e,o),i.push(o);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,o),i.push(o),a=!1,this._addBackoff(e,o);return}if(u.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(o),this._addBackoff(e,o);return}this.log("GRAFT: Add mesh link from %s in %s",e,o),this.score.graft(e,o),u.add(e)}),i.length?i.map(o=>this._makePrune(e,o,a)):[]}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:a})=>{if(!n)return;let o=this.mesh.get(n);if(!!o&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),o.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),a&&a.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(a)}})}_addBackoff(e,r){this._doAddBackoff(e,r,se.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%se.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%se.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return ws(this,void 0,void 0,function*(){e.length>se.GossipsubPrunePeers&&(ct.shuffle(e),e=e.slice(0,se.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>ws(this,void 0,void 0,function*(){if(!i.peerID)return;let s=Tf.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let a=yield LT.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),o=a.peerId.toB58String();if(s!==o){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",o,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(a)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(a){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){super.start(),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(e=>{this._connect(e)})},se.GossipsubDirectConnectInitialDelay)}stop(){super.stop(),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),clearTimeout(this._directPeerInitial)}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(Tf.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&I0.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=I0.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}_publish(e){return ws(this,void 0,void 0,function*(){e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e),this.gossipTracer.deliverMessage(e));let r=yield this.getMsgId(e),i=ct.messageIdToString(r);this.seenCache.put(i),this.messageCache.put(e);let n=new Set;e.topicIDs.forEach(a=>{let o=this.topics.get(a);if(!!o)if(this._options.floodPublish&&e.from===this.peerId.toB58String())o.forEach(f=>{(this.direct.has(f)||this.score.score(f)>=this._options.scoreThresholds.publishThreshold)&&n.add(f)});else{this.direct.forEach(u=>{n.add(u)}),o.forEach(u=>{let c=this.score.score(u),h=this.peers.get(u);!h||h.protocol===se.FloodsubID&&c>=this._options.scoreThresholds.publishThreshold&&n.add(u)});let f=this.mesh.get(a);if(!f||!f.size){if(f=this.fanout.get(a),!f){let u=I0.getGossipPeers(this,a,this._options.D,c=>this.score.score(c)>=this._options.scoreThresholds.publishThreshold);u.size>0?(f=u,this.fanout.set(a,u)):f=new Set}this.lastpub.set(a,this._now())}f.forEach(u=>{n.add(u)})}});let s=ct.createGossipRpc([Bf.utils.normalizeOutRpcMessage(e)]);n.forEach(a=>{a!==e.from&&this._sendRpc(a,s)})})}_sendGraft(e,r){let i=[{topicID:r}],n=ct.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){let i=[this._makePrune(e,r,this._options.doPX)],n=ct.createGossipRpc([],{prune:i});this._sendRpc(e,n)}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(Af.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:a})=>(a&&this.mesh.get(a)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:a})=>!(a&&this.mesh.get(a)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){let n=this._options.doPX;for(let[s,a]of e){let o=a.map(h=>({topicID:h})),f=[],u=r.get(s);u&&(f=u.map(h=>this._makePrune(s,h,n&&!i.get(s))),r.delete(s));let c=ct.createGossipRpc([],{graft:o,prune:f});this._sendRpc(s,c)}for(let[s,a]of r){let o=a.map(u=>this._makePrune(s,u,n&&!i.get(s))),f=ct.createGossipRpc([],{prune:o});this._sendRpc(s,f)}}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;ct.shuffle(i),i.length>se.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(f=>{let u=this.peers.get(f);!u||!r.has(f)&&!this.direct.has(f)&&ct.hasGossipProtocol(u.protocol)&&this.score.score(f)>=this._options.scoreThresholds.gossipThreshold&&n.push(f)});let a=this._options.Dlazy,o=se.GossipsubGossipFactor*n.length;o>a&&(a=o),a>n.length?a=n.length:ct.shuffle(n),n.slice(0,a).forEach(f=>{let u=i;i.length>se.GossipsubMaxIHaveLength&&(u=ct.shuffle(u.slice()).slice(0,se.GossipsubMaxIHaveLength)),this._pushGossip(f,{topicID:e,messageIDs:u})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=ct.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=ct.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){if(this.peers.get(e).protocol===se.GossipsubIDv10)return{topicID:r,peers:[]};let n=se.GossipsubPruneBackoff/1e3,s=[];return i&&I0.getGossipPeers(this,r,se.GossipsubPrunePeers,o=>o!==e&&this.score.score(o)>=0).forEach(o=>{let f=Tf.createFromB58String(o);s.push({peerID:f.toBytes(),signedPeerRecord:this._libp2p.peerStore.addressBook.getRawEnvelope(f)})}),{topicID:r,peers:s,backoff:n}}};Rf.multicodec=se.GossipsubIDv11;Ab.exports=Rf});return MT();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
return Libp2pGossipsub}));
